{"remainingRequest":"/Users/erwinkarim/Websites/Snapped/snapped-mobile-master/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/erwinkarim/Websites/Snapped/snapped-mobile-master/src/views/students/StudentAssignments/Answer/Index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/erwinkarim/Websites/Snapped/snapped-mobile-master/src/views/students/StudentAssignments/Answer/Index.vue","mtime":1679379067245},{"path":"/Users/erwinkarim/Websites/Snapped/snapped-mobile-master/node_modules/cache-loader/dist/cjs.js","mtime":1680070113546},{"path":"/Users/erwinkarim/Websites/Snapped/snapped-mobile-master/node_modules/babel-loader/lib/index.js","mtime":1680059914906},{"path":"/Users/erwinkarim/Websites/Snapped/snapped-mobile-master/node_modules/cache-loader/dist/cjs.js","mtime":1680070113546},{"path":"/Users/erwinkarim/Websites/Snapped/snapped-mobile-master/node_modules/vue-loader/lib/index.js","mtime":1680070113705}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCBTdWJtaXNzaW9uUmVwb3NpdG9yeSBmcm9tICJAL3JlcG9zaXRvcmllcy9TdWJtaXNzaW9uUmVwb3NpdG9yeSI7CmltcG9ydCBNb2RhbCBmcm9tICJAL2NvbXBvbmVudHMvTW9kYWwiOwoKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJJbmRleCIsCiAgY29tcG9uZW50czoge01vZGFsfSwKICBwcm9wczogewogICAgYXNzaWdubWVudERldGFpbHM6IE9iamVjdAogIH0sCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CgogICAgICAvLyBTdGF0ZXMKICAgICAgaXNTaG93aW5nTW9kYWw6IGZhbHNlLAogICAgICBpc1N1Ym1pdHRpbmc6IGZhbHNlLAogICAgICBzdWJtaXNzaW9uU3RhdHVzOiBudWxsLAoKICAgICAgZXJyb3I6IG51bGwsCgogICAgICBhbnN3ZXI6IHsKICAgICAgICB0eXBlOiBudWxsLAogICAgICAgIGNvbnRlbnQ6ICcnCiAgICAgIH0KICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIGhhbmRsZVdyaXR0ZW5BbnN3ZXIodmFsdWUpIHsKICAgICAgdGhpcy5hbnN3ZXIudHlwZSA9ICd3cml0dGVuJzsKICAgICAgdGhpcy5hbnN3ZXIuY29udGVudCA9IHZhbHVlOwogICAgfSwKICAgIGhhbmRsZVNuYXBwZWRBbnN3ZXIodmFsdWUpIHsKICAgICAgdGhpcy5hbnN3ZXIudHlwZSA9ICdzbmFwcGVkJzsKICAgICAgdGhpcy5hbnN3ZXIuY29udGVudCA9IHZhbHVlOwogICAgfSwKICAgIGhhbmRsZVN1Ym1pdChyZW1hcmtzKSB7CgogICAgICB0aGlzLnJlc2V0RXJyb3IoKTsKCiAgICAgIHRoaXMuaXNTdWJtaXR0aW5nID0gdHJ1ZTsKICAgICAgdGhpcy50b2dnbGVNb2RhbCgpOwoKICAgICAgU3VibWlzc2lvblJlcG9zaXRvcnkuc3RvcmUoCiAgICAgICAgICB7CiAgICAgICAgICAgIGFzc2lnbm1lbnRJRDogdGhpcy5hc3NpZ25tZW50RGV0YWlscy5pZCwKICAgICAgICAgICAgYW5zd2VyVHlwZTogdGhpcy5hbnN3ZXIudHlwZSwKICAgICAgICAgICAgYW5zd2VyQ29udGVudDogdGhpcy5hbnN3ZXIuY29udGVudCwKICAgICAgICAgICAgcmVtYXJrczogcmVtYXJrcywKICAgICAgICAgIH0pCiAgICAgICAgICAudGhlbihyZXNwb25zZSA9PiB7CgogICAgICAgICAgICB0aGlzLmlzU3VibWl0dGluZyA9IGZhbHNlOwogICAgICAgICAgICB0aGlzLnRvZ2dsZU1vZGFsKCk7CgogICAgICAgICAgICBpZiAocmVzcG9uc2UuZGF0YS5zdWNjZXNzKSB7CiAgICAgICAgICAgICAgdGhpcy5zdWJtaXNzaW9uU3RhdHVzID0gJ3N1Y2Nlc3MnOwogICAgICAgICAgICAgIHRoaXMudG9nZ2xlTW9kYWwoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfSkKICAgICAgICAgIC5jYXRjaChlcnJvciA9PiB7CiAgICAgICAgICAgIHRoaXMuaXNTdWJtaXR0aW5nID0gZmFsc2U7CiAgICAgICAgICAgIHRoaXMudG9nZ2xlTW9kYWwoKTsKCiAgICAgICAgICAgIHRoaXMuaGFuZGxlRXJyb3IoewogICAgICAgICAgICAgIHN0YXR1czogdHJ1ZSwKICAgICAgICAgICAgICBtZXNzYWdlOiBlcnJvcgogICAgICAgICAgICB9KQogICAgICAgICAgfSkKCgogICAgfSwKICAgIGhhbmRsZUVycm9yKGVycm9yKSB7CiAgICAgIHRoaXMuc3VibWlzc2lvblN0YXR1cyA9ICdlcnJvcic7CiAgICAgIHRoaXMuZXJyb3IgPSBlcnJvci5tZXNzYWdlOwogICAgICB0aGlzLnRvZ2dsZU1vZGFsKCk7CiAgICB9LAoKICAgIHJlc2V0RXJyb3IoKSB7CiAgICAgIHRoaXMuc3VibWlzc2lvblN0YXR1cyA9IG51bGw7CiAgICAgIHRoaXMuZXJyb3IgPSBudWxsOwogICAgfSwKCiAgICB0b2dnbGVNb2RhbCgpIHsKICAgICAgdGhpcy5pc1Nob3dpbmdNb2RhbCA9ICF0aGlzLmlzU2hvd2luZ01vZGFsOwogICAgfQogIH0sCn0K"},{"version":3,"sources":["Index.vue"],"names":[],"mappings":";AAsEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA","file":"Index.vue","sourceRoot":"src/views/students/StudentAssignments/Answer","sourcesContent":["<template>\n  <div>\n\n    <!-- OVERLAYS -->\n    <div v-if=\"isShowingModal\" @click=\"toggleModal\"\n         class=\"fixed w-full h-screen z-70 flex flex-col justify-center items-center inset-x-0 block top-0 bg-gray-primary bg-opacity-75 \">\n    </div>\n\n\n    <!-- MODAL -->\n    <div v-if=\"isShowingModal\"\n         class=\"fixed left-0 w-full items-center flex flex-col items-center justify-center top-1/4 z-70\"\n    >\n      <modal v-if=\"submissionStatus === 'success'\"\n             :modal-type=\"submissionStatus\"\n             :redirect-route=\"{name: 'student.assignments.show'}\"\n             @toggleModal=\"toggleModal\"\n             class=\"w-4/5 \"\n      >\n        <template slot=\"message\">\n          <div class=\"w-full\">\n            Got something to change? Don't worry! You can always edit your published homework\n          </div>\n        </template>\n        <template slot=\"button\">\n          Okay\n        </template>\n      </modal>\n      <modal v-if=\"submissionStatus === 'error'\"\n             :modal-type=\"submissionStatus\"\n             @toggleModal=\"toggleModal\"\n             class=\"w-4/5 \"\n      >\n        <template slot=\"message\">\n          <div class=\"w-full\">\n            {{ error }}\n          </div>\n        </template>\n        <template slot=\"button\">\n          Okay\n        </template>\n      </modal>\n      <modal v-if=\"isSubmitting\"\n             modal-type=\"no-icon\"\n             :has-button=\"false\"\n             class=\"w-4/5 \"\n      >\n        <p slot=\"message\">\n          Submitting your answer.\n          <br>\n          Please wait...\n        </p>\n      </modal>\n    </div>\n\n\n    <router-view\n        @writtenAnswer=\"handleWrittenAnswer\"\n        @snappedAnswer=\"handleSnappedAnswer\"\n        @error=\"handleError\"\n        @submit=\"handleSubmit\"\n        :assignment-details=\"assignmentDetails\"\n        :answer=\"answer\"\n    />\n  </div>\n\n\n</template>\n\n<script>\nimport SubmissionRepository from \"@/repositories/SubmissionRepository\";\nimport Modal from \"@/components/Modal\";\n\nexport default {\n  name: \"Index\",\n  components: {Modal},\n  props: {\n    assignmentDetails: Object\n  },\n  data() {\n    return {\n\n      // States\n      isShowingModal: false,\n      isSubmitting: false,\n      submissionStatus: null,\n\n      error: null,\n\n      answer: {\n        type: null,\n        content: ''\n      }\n    }\n  },\n  methods: {\n    handleWrittenAnswer(value) {\n      this.answer.type = 'written';\n      this.answer.content = value;\n    },\n    handleSnappedAnswer(value) {\n      this.answer.type = 'snapped';\n      this.answer.content = value;\n    },\n    handleSubmit(remarks) {\n\n      this.resetError();\n\n      this.isSubmitting = true;\n      this.toggleModal();\n\n      SubmissionRepository.store(\n          {\n            assignmentID: this.assignmentDetails.id,\n            answerType: this.answer.type,\n            answerContent: this.answer.content,\n            remarks: remarks,\n          })\n          .then(response => {\n\n            this.isSubmitting = false;\n            this.toggleModal();\n\n            if (response.data.success) {\n              this.submissionStatus = 'success';\n              this.toggleModal();\n            }\n          })\n          .catch(error => {\n            this.isSubmitting = false;\n            this.toggleModal();\n\n            this.handleError({\n              status: true,\n              message: error\n            })\n          })\n\n\n    },\n    handleError(error) {\n      this.submissionStatus = 'error';\n      this.error = error.message;\n      this.toggleModal();\n    },\n\n    resetError() {\n      this.submissionStatus = null;\n      this.error = null;\n    },\n\n    toggleModal() {\n      this.isShowingModal = !this.isShowingModal;\n    }\n  },\n}\n</script>\n\n<style scoped>\n\n</style>\n"]}]}