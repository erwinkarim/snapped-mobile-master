{"remainingRequest":"/Users/erwinkarim/Websites/Snapped/snapped-mobile-master/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/erwinkarim/Websites/Snapped/snapped-mobile-master/src/views/teachers/TeacherClasses/SubjectsList.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/erwinkarim/Websites/Snapped/snapped-mobile-master/src/views/teachers/TeacherClasses/SubjectsList.vue","mtime":1679379067249},{"path":"/Users/erwinkarim/Websites/Snapped/snapped-mobile-master/node_modules/cache-loader/dist/cjs.js","mtime":1680070113546},{"path":"/Users/erwinkarim/Websites/Snapped/snapped-mobile-master/node_modules/babel-loader/lib/index.js","mtime":1680059914906},{"path":"/Users/erwinkarim/Websites/Snapped/snapped-mobile-master/node_modules/cache-loader/dist/cjs.js","mtime":1680070113546},{"path":"/Users/erwinkarim/Websites/Snapped/snapped-mobile-master/node_modules/vue-loader/lib/index.js","mtime":1680070113705}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCBUZWFjaGVyUmVwb3NpdG9yeSBmcm9tICJAL3JlcG9zaXRvcmllcy9UZWFjaGVyUmVwb3NpdG9yeSI7CmltcG9ydCBJY29uQmFzZSBmcm9tICJAL2NvbXBvbmVudHMvSWNvbkJhc2UiOwppbXBvcnQge1N3aXBlciwgU3dpcGVyU2xpZGUsIGRpcmVjdGl2ZX0gZnJvbSAndnVlLWF3ZXNvbWUtc3dpcGVyJwppbXBvcnQgUHJvZmlsZVBob3RvIGZyb20gIkAvY29tcG9uZW50cy9pY29ucy9Qcm9maWxlUGhvdG8iOwppbXBvcnQgJ0AvZGlyZWN0aXZlcy9zY3JvbGwnCmltcG9ydCByb3V0ZXIgZnJvbSAiQC9yb3V0ZXIiOwoKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJTdWJqZWN0c0xpc3QiLAogIGNvbXBvbmVudHM6IHtQcm9maWxlUGhvdG8sIEljb25CYXNlfSwKICBwcm9wczogewogICAgc2VhcmNoOiBTdHJpbmcKICB9LAogIGRhdGEoKSB7CiAgICByZXR1cm4gewoKICAgICAgLy8gU3RhdGVzCiAgICAgIGxvYWRpbmc6IGZhbHNlLAogICAgICBlcnJvcjogbnVsbCwKICAgICAgaXNTY3JvbGxlZERvd25Ud286IGZhbHNlLAogICAgICBpc1Njcm9sbGVkVXA6IGZhbHNlLAogICAgICBzY3JvbGxMb2NhdGlvbjogMCwKICAgICAgc2V0U3RpY2t5U2VhcmNoQmFyOiBmYWxzZSwKCiAgICAgIC8vIERhdGEKICAgICAgc3ViamVjdHM6IG51bGwsCiAgICAgIGZpbHRlcmVkU3ViamVjdHM6IG51bGwKCiAgICB9CiAgfSwKICBjcmVhdGVkKCkgewogICAgdGhpcy5mZXRjaERhdGEoKQogIH0sCiAgd2F0Y2g6IHsKICAgICckcm91dGUnOiAnZmV0Y2hEYXRhJywKICAgICdzZWFyY2gnOiAnc2VhcmNoTmFtZScKICB9LAogIGNvbXB1dGVkOiB7CiAgICBjb250YWluZXJDbGFzczogZnVuY3Rpb24gKCkgewogICAgICBpZiAodGhpcy5zZXRTdGlja3lTZWFyY2hCYXIpIHsKICAgICAgICByZXR1cm4gJ210LTIwJwogICAgICB9CiAgICAgIGlmICh0aGlzLmlzU2Nyb2xsZWRVcCkgewogICAgICAgIHJldHVybiAnbXQtMCcKICAgICAgfQogICAgfQogIH0sCiAgbWV0aG9kczogewoKICAgIGZldGNoRGF0YSgpIHsKICAgICAgdGhpcy5lcnJvciA9IHRoaXMuc3ViamVjdHMgPSBudWxsCiAgICAgIHRoaXMubG9hZGluZyA9IHRydWUKCiAgICAgIGNvbnN0IGNsYXNzSUQgPSB0aGlzLiRyb3V0ZS5wYXJhbXMuY2xhc3NJRAoKICAgICAgVGVhY2hlclJlcG9zaXRvcnkuZ2V0U3ViamVjdHNXaXRoU3R1ZGVudHNGb3JUZWFjaGVyQ2xhc3Moe2NsYXNzSUQ6IGNsYXNzSUQsIHNlYXJjaDogbnVsbH0pCiAgICAgICAgICAudGhlbihyZXNwb25zZSA9PiB7CgogICAgICAgICAgICB0aGlzLnN1YmplY3RzID0gcmVzcG9uc2UuZGF0YS5kYXRhOwogICAgICAgICAgICB0aGlzLmZpbHRlcmVkU3ViamVjdHMgPSByZXNwb25zZS5kYXRhLmRhdGE7CgogICAgICAgICAgfSkKICAgICAgICAgIC5jYXRjaChlcnIgPT4gewoKICAgICAgICAgIH0pCiAgICB9LAogICAgc2VhcmNoTmFtZSgpIHsKCiAgICAgIC8vIENvcHkgb3JpZ2luYWwgcmVzdWx0cyBpbnRvIGZpbHRlclN1YmplY3RzCiAgICAgIHRoaXMuZmlsdGVyZWRTdWJqZWN0cyA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkodGhpcy5zdWJqZWN0cykpOwoKICAgICAgdGhpcy5maWx0ZXJlZFN1YmplY3RzID0gdGhpcy5maWx0ZXJlZFN1YmplY3RzLm1hcCgoc3ViamVjdCkgPT4gewogICAgICAgIHJldHVybiB7CiAgICAgICAgICBwZXJpb2Q6IHN1YmplY3QucGVyaW9kLAogICAgICAgICAgc3R1ZGVudHM6IHN1YmplY3Quc3R1ZGVudHMuZmlsdGVyKHN0dWRlbnQgPT4gewogICAgICAgICAgICByZXR1cm4gKHN0dWRlbnQubmFtZS50b0xvd2VyQ2FzZSgpKS5pbmNsdWRlcyh0aGlzLnNlYXJjaC50b0xvd2VyQ2FzZSgpKQogICAgICAgICAgfSksCiAgICAgICAgICBzdWJqZWN0X3RpdGxlOiBzdWJqZWN0LnN1YmplY3RfdGl0bGUKICAgICAgICB9CiAgICAgIH0pCiAgICB9LAoKICAgIGdvVG9TdHVkZW50U2hvdyhzdHVkZW50SUQpIHsKICAgICAgcm91dGVyLnB1c2goe25hbWU6ICdzdHVkZW50LnByb2ZpbGUuc2hvdycsIHBhcmFtczoge3N0dWRlbnRJRDogc3R1ZGVudElEfX0pCiAgICB9LAogICAgaGFuZGxlU2Nyb2xsOiBmdW5jdGlvbiAoZXZ0LCBlbCkgewoKICAgICAgaWYgKHdpbmRvdy5zY3JvbGxZID4gNjAgJiYgd2luZG93LnNjcm9sbFkgPiB0aGlzLnNjcm9sbExvY2F0aW9uKSB7CiAgICAgICAgbGV0IHN0YXR1cyA9IHdpbmRvdy5zY3JvbGxZID4gNjAKICAgICAgICB0aGlzLmlzU2Nyb2xsZWREb3duVHdvID0gc3RhdHVzCiAgICAgICAgdGhpcy5pc1Njcm9sbGVkVXAgPSAhc3RhdHVzCiAgICAgIH0KCiAgICAgIGlmICh3aW5kb3cuc2Nyb2xsWSA8IDYwICYmIHdpbmRvdy5zY3JvbGxZIDwgdGhpcy5zY3JvbGxMb2NhdGlvbikgewogICAgICAgIGxldCBzdGF0dXMgPSB3aW5kb3cuc2Nyb2xsWSA8IDYwCiAgICAgICAgdGhpcy5pc1Njcm9sbGVkVXAgPSBzdGF0dXMKICAgICAgICB0aGlzLmlzU2Nyb2xsZWREb3duVHdvID0gIXN0YXR1cwogICAgICB9CgogICAgICB0aGlzLnNldFN0aWNreVNlYXJjaEJhciA9IHdpbmRvdy5zY3JvbGxZID4gNjAKICAgICAgdGhpcy5zY3JvbGxMb2NhdGlvbiA9IHdpbmRvdy5zY3JvbGxZCiAgICB9CiAgfQp9Cg=="},{"version":3,"sources":["SubjectsList.vue"],"names":[],"mappings":";AAqCA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA","file":"SubjectsList.vue","sourceRoot":"src/views/teachers/TeacherClasses","sourcesContent":["<template>\n\n  <div class=\"mb-20\" :class=\"containerClass\" v-scroll=\"handleScroll\">\n    <div v-for=\"subject in filteredSubjects\"\n         :key=\"subject.subject_title\"\n    >\n\n      <!-- Subject Title + Period -->\n      <div\n          class=\"text-purple-primary truncate font-bold flex flex-row justify-between text-left text-sm bg-gray-secondary py-2 px-5\">\n        <div class=\"w-3/5 truncate\">\n          {{ subject.subject_title }}\n        </div>\n        <div class=\"w-2/5 text-right\">\n          {{ subject.period }}\n        </div>\n      </div>\n\n      <!-- Student List for Subject -->\n      <div v-for=\"student in subject.students\"\n           :key=\"student.id\"\n           @click=\"goToStudentShow(student.id)\"\n           class=\"text-left px-5 py-4 flex flex-row w-full border-b-1 items-center bg-white\"\n      >\n        <icon-base class=\" w-1/8\">\n          <profile-photo :gender=\"student.gender\"/>\n        </icon-base>\n        <div class=\"w-5/6 ml-5 text-purple-primary truncate pr-4\">\n          {{ student.name }}\n        </div>\n      </div>\n    </div>\n  </div>\n\n</template>\n\n<script>\nimport TeacherRepository from \"@/repositories/TeacherRepository\";\nimport IconBase from \"@/components/IconBase\";\nimport {Swiper, SwiperSlide, directive} from 'vue-awesome-swiper'\nimport ProfilePhoto from \"@/components/icons/ProfilePhoto\";\nimport '@/directives/scroll'\nimport router from \"@/router\";\n\nexport default {\n  name: \"SubjectsList\",\n  components: {ProfilePhoto, IconBase},\n  props: {\n    search: String\n  },\n  data() {\n    return {\n\n      // States\n      loading: false,\n      error: null,\n      isScrolledDownTwo: false,\n      isScrolledUp: false,\n      scrollLocation: 0,\n      setStickySearchBar: false,\n\n      // Data\n      subjects: null,\n      filteredSubjects: null\n\n    }\n  },\n  created() {\n    this.fetchData()\n  },\n  watch: {\n    '$route': 'fetchData',\n    'search': 'searchName'\n  },\n  computed: {\n    containerClass: function () {\n      if (this.setStickySearchBar) {\n        return 'mt-20'\n      }\n      if (this.isScrolledUp) {\n        return 'mt-0'\n      }\n    }\n  },\n  methods: {\n\n    fetchData() {\n      this.error = this.subjects = null\n      this.loading = true\n\n      const classID = this.$route.params.classID\n\n      TeacherRepository.getSubjectsWithStudentsForTeacherClass({classID: classID, search: null})\n          .then(response => {\n\n            this.subjects = response.data.data;\n            this.filteredSubjects = response.data.data;\n\n          })\n          .catch(err => {\n\n          })\n    },\n    searchName() {\n\n      // Copy original results into filterSubjects\n      this.filteredSubjects = JSON.parse(JSON.stringify(this.subjects));\n\n      this.filteredSubjects = this.filteredSubjects.map((subject) => {\n        return {\n          period: subject.period,\n          students: subject.students.filter(student => {\n            return (student.name.toLowerCase()).includes(this.search.toLowerCase())\n          }),\n          subject_title: subject.subject_title\n        }\n      })\n    },\n\n    goToStudentShow(studentID) {\n      router.push({name: 'student.profile.show', params: {studentID: studentID}})\n    },\n    handleScroll: function (evt, el) {\n\n      if (window.scrollY > 60 && window.scrollY > this.scrollLocation) {\n        let status = window.scrollY > 60\n        this.isScrolledDownTwo = status\n        this.isScrolledUp = !status\n      }\n\n      if (window.scrollY < 60 && window.scrollY < this.scrollLocation) {\n        let status = window.scrollY < 60\n        this.isScrolledUp = status\n        this.isScrolledDownTwo = !status\n      }\n\n      this.setStickySearchBar = window.scrollY > 60\n      this.scrollLocation = window.scrollY\n    }\n  }\n}\n</script>\n\n<style scoped>\n\n</style>\n"]}]}