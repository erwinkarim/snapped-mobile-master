{"remainingRequest":"/Users/erwinkarim/Websites/Snapped/snapped-mobile-master/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/erwinkarim/Websites/Snapped/snapped-mobile-master/src/views/edcoins/CoinHome.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/erwinkarim/Websites/Snapped/snapped-mobile-master/src/views/edcoins/CoinHome.vue","mtime":1679379067243},{"path":"/Users/erwinkarim/Websites/Snapped/snapped-mobile-master/node_modules/babel-loader/lib/index.js","mtime":1680059914906},{"path":"/Users/erwinkarim/Websites/Snapped/snapped-mobile-master/node_modules/cache-loader/dist/cjs.js","mtime":1680070113546},{"path":"/Users/erwinkarim/Websites/Snapped/snapped-mobile-master/node_modules/vue-loader/lib/index.js","mtime":1680070113705}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCBBcHBMb2dvIGZyb20gIkAvY29tcG9uZW50cy9pY29ucy9BcHBMb2dvIjsKaW1wb3J0IERhc2hib2FyZExheW91dCBmcm9tICJAL3ZpZXdzL2xheW91dC9EYXNoYm9hcmRMYXlvdXQiOwppbXBvcnQgSWNvbkJhc2VUd28gZnJvbSAiQC9jb21wb25lbnRzL0ljb25CYXNlVHdvIjsKaW1wb3J0IFNlY3Rpb25UaXRsZSBmcm9tICJAL2NvbXBvbmVudHMvU2VjdGlvblRpdGxlIjsKaW1wb3J0IEVkQ29pblRyYW5zYWN0aW9uUGlsbCBmcm9tICIuLi8uLi9jb21wb25lbnRzL0VkQ29pblRyYW5zYWN0aW9uUGlsbC52dWUiOwppbXBvcnQgQ29pbnNCb3R0b21OYXZCYXIgZnJvbSAiQC9jb21wb25lbnRzL0NvaW5zQm90dG9tTmF2QmFyLnZ1ZSI7CmltcG9ydCBDb2luc0ljb24gZnJvbSAiLi4vLi4vY29tcG9uZW50cy9pY29ucy9Db2luc0ljb24udnVlIjsKaW1wb3J0IFNxdWFyZUNoZWNrSWNvbiBmcm9tICIuLi8uLi9jb21wb25lbnRzL2ljb25zL1NxdWFyZUNoZWNrSWNvbi52dWUiOwppbXBvcnQgY29pbl9yb3V0ZXMgZnJvbSAiLi4vLi4vcm91dGVyL2NvaW5fcm91dGVzIjsKaW1wb3J0IENvaW5zUmVwb3NpdG9yeSBmcm9tICIuLi8uLi9yZXBvc2l0b3JpZXMvQ29pbnNSZXBvc2l0b3J5IjsKCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiQ29pbkhvbWUiLAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBib3R0b21CYXJDbGFzczogdHJ1ZSwKICAgICAgdGFiczogW10sCiAgICAgIHRyeENvdW50OiAwLAogICAgICB0cnhSZXN1bHQ6IFtdLAogICAgICBhdmFpbGFibGVNYXJrczogMCwKICAgICAgaG9tZVVSTDogdGhpcy4kc3RvcmUuZ2V0dGVycy5nZXRBdXRoVXNlclJvbGUgPT0gJ1RlYWNoZXInID8gJ3RlYWNoZXIuaG9tZScgOiAnc3R1ZGVudC5ob21lJywKICAgIH07CiAgfSwKICBtb3VudGVkKCkgewogICAgY29uc29sZS5sb2coJ0NvaW5Ib21lIE1vdW50ZWQnKTsKCiAgICAvLyBsb2FkIHVwIHRoZSB0cmFuc2FjdGlvbnMKICAgIENvaW5zUmVwb3NpdG9yeS5jb2luVHJ4TGlzdCgpLnRoZW4oKHJlcykgPT4gewogICAgICBjb25zb2xlLmxvZygnZ2V0IGNvaW5zIHRyeCBoaXN0b3J5JywgcmVzKTsKICAgICAgdGhpcy50cnhSZXN1bHQgPSByZXMuZGF0YTsKICAgIH0pCgogICAgQ29pbnNSZXBvc2l0b3J5Lm1hcmtzRm9yQ29pbnNMaXN0KCkudGhlbigocmVzcG9uc2UpID0+IHsKICAgICAgY29uc29sZS5sb2cocmVzcG9uc2UpOwogICAgICB0aGlzLmF2YWlsYWJsZU1hcmtzID0gcmVzcG9uc2UuZGF0YS5tYXJrcy5yZWR1Y2UoKGEsIHYpID0+IHsKICAgICAgICBpZih2LmFtb3VudF9yZWRlZW1lZCA9PT0gbnVsbCl7CiAgICAgICAgICByZXR1cm4gYSArPSB2LmZpbmFsX21hcmtzOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICByZXR1cm4gYTsKICAgICAgICB9CiAgICAgIH0sIDApOwogICAgfSk7CgogIH0sCiAgbWV0aG9kczogewogICAgc2xpZGVyVXBkYXRlKGUpewogICAgICBjb25zb2xlLmxvZygnc2xpZGVyIHZhbHVlJywgZS50YXJnZXQudmFsdWUpOwogICAgICB0aGlzLnRyeENvdW50ID0gcGFyc2VJbnQoZS50YXJnZXQudmFsdWUpOwogICAgfQoKICB9LAogIGNvbXBvbmVudHM6IHsKICAgIEFwcExvZ28sIERhc2hib2FyZExheW91dCwgSWNvbkJhc2VUd28sIFNlY3Rpb25UaXRsZSwgRWRDb2luVHJhbnNhY3Rpb25QaWxsLAogICAgU3F1YXJlQ2hlY2tJY29uLCBDb2luc0ljb24sIENvaW5zQm90dG9tTmF2QmFyLCBjb2luX3JvdXRlcywKfQp9Cgo="},{"version":3,"sources":["CoinHome.vue"],"names":[],"mappings":";AAiFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA","file":"CoinHome.vue","sourceRoot":"src/views/edcoins","sourcesContent":["<template>\n  <dashboard-layout :has-custom-bottom-bar=\"true\" >\n\n    <template v-slot:content>\n      <div class=\"flex flex-col px-5 w-full md:px-10\">\n        <router-link class=\"w-2/7\" :to=\"{ name: homeURL }\">\n          <icon-base-two>\n            <AppLogo/>\n          </icon-base-two>\n        </router-link>\n      </div>\n\n      <!-- total coins -->\n      <div class=\"px-5 w-full md:px-10\">\n        <section-title class=\"text-left\" title=\"Coins\"/>\n        <div class=\"overflow-hidden justify-between py-3 px-3 max-w-sm md:max-w-xl h-full rounded rounded-xl bg-gray-secondary\">\n          <div class=\"flex flex-row items-center h-full text-left text-purple-primary\">\n            <div class=\"flex flex-col px-2 w-1/8\">\n              <CoinsIcon />\n            </div>\n            <div class=\"flex flex-col px-2 w-3/8\">\n              {{ trxResult.length === 0 ? 0 : trxResult.at(0).balance }} Coins\n            </div>\n            <router-link class=\"flex flex-col px-2 w-1/2 text-right\" :to=\"{ name: 'coin.top_up' }\">\n              Top-Up\n            </router-link>\n          </div>\n        </div>\n      </div>\n\n      <!-- total marks -->\n      <div class=\"px-5 w-full md:px-10\">\n        <div class=\"mt-3 mb-3\">\n          <section-title class=\"text-left\" title=\"Marks\"/>\n          <div class=\"overflow-hidden justify-between py-3 px-3 max-w-sm md:max-w-xl h-full rounded rounded-xl bg-gray-secondary\">\n            <div class=\"flex flex-row items-center h-full text-left text-purple-primary\">\n              <div class=\"flex flex-col px-2 w-1/8\">\n                <SquareCheckIcon />\n              </div>\n              <div class=\"flex flex-col px-2 w-3/8\">\n                {{ availableMarks }} Marks Available\n              </div>\n              <router-link class=\"flex flex-col px-2 w-1/2 text-right\" :to=\"{ name: 'coin.top_up_redeem_marks' }\">\n                Redeem\n              </router-link>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <!-- transaction history -->\n      <div class=\"px-5 w-full md:px-10\">\n        <div class=\"mt-2 mb-3\">\n          <p>Showing {{ trxResult.length }} transaction(s)</p>\n        </div>\n\n        <div class=\"mt-2 mb-3\">\n          <section-title class=\"mb-5 text-left\" title=\"Transaction History\" />\n          <div v-if=\"trxResult.length === 0\">\n            No transactions\n          </div>\n          <div v-else>\n            <div v-for=\"trx in trxResult\">\n              <router-link :to=\"{ name: 'coin.trxDetail', params: { trxID: trx.id }}\">\n                <EdCoinTransactionPill :trxID=trx.id :trxAmount=trx.amount  :date=trx.created_at />\n              </router-link>\n            </div>\n          </div>\n        </div>\n      </div>\n      <div class=\"h-30\">Empty Space</div>\n\n    </template>\n\n    <template v-slot:bottomBar>\n      <CoinsBottomNavBar />\n    </template>\n  </dashboard-layout>\n</template>\n\n<script>\nimport AppLogo from \"@/components/icons/AppLogo\";\nimport DashboardLayout from \"@/views/layout/DashboardLayout\";\nimport IconBaseTwo from \"@/components/IconBaseTwo\";\nimport SectionTitle from \"@/components/SectionTitle\";\nimport EdCoinTransactionPill from \"../../components/EdCoinTransactionPill.vue\";\nimport CoinsBottomNavBar from \"@/components/CoinsBottomNavBar.vue\";\nimport CoinsIcon from \"../../components/icons/CoinsIcon.vue\";\nimport SquareCheckIcon from \"../../components/icons/SquareCheckIcon.vue\";\nimport coin_routes from \"../../router/coin_routes\";\nimport CoinsRepository from \"../../repositories/CoinsRepository\";\n\nexport default {\n  name: \"CoinHome\",\n  data() {\n    return {\n      bottomBarClass: true,\n      tabs: [],\n      trxCount: 0,\n      trxResult: [],\n      availableMarks: 0,\n      homeURL: this.$store.getters.getAuthUserRole == 'Teacher' ? 'teacher.home' : 'student.home',\n    };\n  },\n  mounted() {\n    console.log('CoinHome Mounted');\n\n    // load up the transactions\n    CoinsRepository.coinTrxList().then((res) => {\n      console.log('get coins trx history', res);\n      this.trxResult = res.data;\n    })\n\n    CoinsRepository.marksForCoinsList().then((response) => {\n      console.log(response);\n      this.availableMarks = response.data.marks.reduce((a, v) => {\n        if(v.amount_redeemed === null){\n          return a += v.final_marks;\n        } else {\n          return a;\n        }\n      }, 0);\n    });\n\n  },\n  methods: {\n    sliderUpdate(e){\n      console.log('slider value', e.target.value);\n      this.trxCount = parseInt(e.target.value);\n    }\n\n  },\n  components: {\n    AppLogo, DashboardLayout, IconBaseTwo, SectionTitle, EdCoinTransactionPill,\n    SquareCheckIcon, CoinsIcon, CoinsBottomNavBar, coin_routes,\n}\n}\n\n</script>\n\n<style scoped>\n\n</style>"]}]}