{"remainingRequest":"/Users/erwinkarim/Websites/Snapped/snapped-mobile-master/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/erwinkarim/Websites/Snapped/snapped-mobile-master/src/views/students/StudentAssignments/Answer/AnswerSave.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/erwinkarim/Websites/Snapped/snapped-mobile-master/src/views/students/StudentAssignments/Answer/AnswerSave.vue","mtime":1679379067245},{"path":"/Users/erwinkarim/Websites/Snapped/snapped-mobile-master/node_modules/babel-loader/lib/index.js","mtime":1680059914906},{"path":"/Users/erwinkarim/Websites/Snapped/snapped-mobile-master/node_modules/cache-loader/dist/cjs.js","mtime":1680070113546},{"path":"/Users/erwinkarim/Websites/Snapped/snapped-mobile-master/node_modules/vue-loader/lib/index.js","mtime":1680070113705}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCBQYWdlVGl0bGVUd28gZnJvbSAiQC9jb21wb25lbnRzL1BhZ2VUaXRsZVR3byI7CmltcG9ydCBOYXZCYWNrIGZyb20gIkAvY29tcG9uZW50cy9OYXZCYWNrIjsKaW1wb3J0IEljb25CYXNlVHdvIGZyb20gIkAvY29tcG9uZW50cy9JY29uQmFzZVR3byI7CmltcG9ydCBUcmFzaEljb24gZnJvbSAiQC9jb21wb25lbnRzL2ljb25zL1RyYXNoSWNvbiI7CmltcG9ydCBNb2RhbCBmcm9tICJAL2NvbXBvbmVudHMvTW9kYWwiOwppbXBvcnQgRGFzaGJvYXJkTGF5b3V0IGZyb20gIkAvdmlld3MvbGF5b3V0L0Rhc2hib2FyZExheW91dCI7CmltcG9ydCBQYWdlSGVhZGVyVGhyZWUgZnJvbSAiQC9jb21wb25lbnRzL1BhZ2VIZWFkZXJUaHJlZSI7CmltcG9ydCByb3V0ZXIgZnJvbSAiQC9yb3V0ZXIiOwppbXBvcnQgQXJyb3dCYWNrSWNvbiBmcm9tICJAL2NvbXBvbmVudHMvaWNvbnMvQXJyb3dCYWNrSWNvbiI7CmltcG9ydCBDcm9wSWNvbiBmcm9tICJAL2NvbXBvbmVudHMvaWNvbnMvQ3JvcEljb24iOwoKLy8gVnVlIENyb3BwZXIKaW1wb3J0IFZ1ZUNyb3BwZXIgZnJvbSAndnVlLWNyb3BwZXJqcyc7CmltcG9ydCAnY3JvcHBlcmpzL2Rpc3QvY3JvcHBlci5jc3MnOwoKLy8gRk9OVCBBV0VTT01FCmltcG9ydCB7Rm9udEF3ZXNvbWVJY29ufSBmcm9tICdAZm9ydGF3ZXNvbWUvdnVlLWZvbnRhd2Vzb21lJwppbXBvcnQge2ZhVHJhc2gsIGZhQ3JvcEFsdH0gZnJvbSAiQGZvcnRhd2Vzb21lL2ZyZWUtc29saWQtc3ZnLWljb25zIjsKCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiQW5zd2VyU2F2ZSIsCiAgcHJvcHM6IHsKICAgIGFuc3dlcjogT2JqZWN0LAogICAgYXNzaWdubWVudERldGFpbHM6IE9iamVjdCwKICB9LAogIGRhdGEoKSB7CiAgICByZXR1cm4gewoKICAgICAgLy8gU3RhdGVzCiAgICAgIGlzTWFpblBhZ2U6IHRydWUsCiAgICAgIGlzUHJldmlld2luZ1NuYXBwZWRBbnN3ZXI6IGZhbHNlLAogICAgICBpc1N1Ym1pdHRpbmc6IGZhbHNlLAogICAgICBpc1Nob3dpbmdNb2RhbDogZmFsc2UsCiAgICAgIHN1Ym1pc3Npb25TdGF0dXM6IG51bGwsCgogICAgICBzbmFwcGVkQW5zd2VyUHJldmlld3M6IFtdLAoKICAgICAgcmVtYXJrczogJycsCgogICAgICBzbmFwcGVkQW5zd2VyczogW10sCgogICAgICAvLyBJY29ucwogICAgICBpY29uczogewogICAgICAgIGNyb3A6IGZhQ3JvcEFsdCwKICAgICAgICB0cmFzaDogZmFUcmFzaAogICAgICB9CiAgICB9CiAgfSwKICBjb21wdXRlZDogewogICAgaGFzQW5zd2VyQ29udGVudCgpIHsKICAgICAgcmV0dXJuIHRoaXMuYW5zd2VyLnR5cGUgIT09IG51bGwgJiYgdGhpcy5hbnN3ZXIuY29udGVudCAhPT0gJyc7CiAgICB9LAogICAgaXNXcml0dGVuQW5zd2VyKCkgewogICAgICByZXR1cm4gdGhpcy5hbnN3ZXIudHlwZSA9PT0gJ3dyaXR0ZW4nOwogICAgfSwKICAgIGlzU25hcHBlZEFuc3dlcigpIHsKICAgICAgcmV0dXJuIHRoaXMuYW5zd2VyLnR5cGUgPT09ICdzbmFwcGVkJzsKICAgIH0sCiAgfSwKICBtZXRob2RzOiB7CgogICAgdG9nZ2xlU25hcHBlZEFuc3dlclByZXZpZXcoKSB7CiAgICAgIGlmICh0aGlzLmlzUHJldmlld2luZ1NuYXBwZWRBbnN3ZXIpIHsKICAgICAgICB0aGlzLmlzTWFpblBhZ2UgPSB0cnVlOwogICAgICAgIHRoaXMuaXNQcmV2aWV3aW5nU25hcHBlZEFuc3dlciA9IGZhbHNlOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuaXNNYWluUGFnZSA9IGZhbHNlOwogICAgICAgIHRoaXMuaXNQcmV2aWV3aW5nU25hcHBlZEFuc3dlciA9IHRydWU7CiAgICAgIH0KICAgIH0sCgogICAgb25GaWxlU2VsZWN0ZWQoZSkgewogICAgICBsZXQgZmlsZXMgPSBlLnRhcmdldC5maWxlcyB8fCBlLmRhdGFUcmFuc2Zlci5maWxlcwoKICAgICAgaWYgKCFmaWxlcy5sZW5ndGgpIHsKICAgICAgICByZXR1cm4KICAgICAgfQoKICAgICAgaWYgKGZpbGVzWzBdLnR5cGUubWF0Y2goImltYWdlLioiKSkgewogICAgICAgIHRoaXMuZ2VuZXJhdGVTbmFwcGVkQW5zd2VyUHJldmlldyhmaWxlcykKICAgICAgfQoKICAgICAgZS50YXJnZXQudmFsdWUgPSAnJwoKICAgIH0sCgogICAgaGFuZGxlVnVlQ3JvcHBlclJlYWR5KGUpIHsKICAgICAgbGV0IGNyb3BwZXIgPSBlLnRhcmdldC5jcm9wcGVyOwoKICAgICAgY3JvcHBlci5hdXRvQ3JvcCA9IGZhbHNlOwoKICAgICAgY3JvcHBlci5jbGVhcigpOwogICAgICBjcm9wcGVyLmRpc2FibGUoKTsKCiAgICAgIC8vIElmIHRoaXMgaXMgbmV3IHBob3RvIHVwbG9hZGVkLCBhZGQgaW1hZ2UgdG8gc25hcHBlZCBhbnN3ZXJzIGFycmF5CiAgICAgIGlmICghY3JvcHBlci5yZXBsYWNlZCkgewogICAgICAgIGNyb3BwZXIuZ2V0Q3JvcHBlZENhbnZhcyh7CiAgICAgICAgICBtYXhXaWR0aDogNzIwLAogICAgICAgICAgbWF4SGVpZ2h0OiA3MjAsCiAgICAgICAgICBmaWxsQ29sb3I6ICcjZmZmJwogICAgICAgIH0pLnRvQmxvYigoYmxvYikgPT4gewogICAgICAgICAgdGhpcy5zbmFwcGVkQW5zd2Vycy5wdXNoKGJsb2IpCiAgICAgICAgfSwnaW1hZ2UvanBlZycpOwogICAgICB9CgoKICAgIH0sCgogICAgZ2VuZXJhdGVTbmFwcGVkQW5zd2VyUHJldmlldyhmaWxlcykgewogICAgICBmaWxlcy5mb3JFYWNoKGYgPT4gewoKICAgICAgICBpZiAoIWYudHlwZS5tYXRjaCgiaW1hZ2UuKiIpKSB7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfQoKICAgICAgICBsZXQgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTsKICAgICAgICBsZXQgdGhhdCA9IHRoaXM7CgogICAgICAgIHJlYWRlci5vbmxvYWQgPSBmdW5jdGlvbiAoZSkgewoKICAgICAgICAgIHRoYXQuc25hcHBlZEFuc3dlclByZXZpZXdzLnB1c2goewogICAgICAgICAgICBzb3VyY2U6IGUudGFyZ2V0LnJlc3VsdCwKICAgICAgICAgICAgY3JvcHBpbmc6IGZhbHNlCiAgICAgICAgICB9KTsKICAgICAgICB9CgogICAgICAgIHJlYWRlci5yZWFkQXNEYXRhVVJMKGYpOwogICAgICB9KTsKICAgIH0sCgogICAgdG9nZ2xlU25hcHBlZENyb3BwaW5nU3RhdHVzKGtleSkgewogICAgICB0aGlzLnNuYXBwZWRBbnN3ZXJQcmV2aWV3c1trZXldLmNyb3BwaW5nID0gIXRoaXMuc25hcHBlZEFuc3dlclByZXZpZXdzW2tleV0uY3JvcHBpbmc7CgogICAgICBsZXQgY3JvcHBlcktleSA9IGBjcm9wcGVyXyR7a2V5fWAKICAgICAgbGV0IGNyb3BwZXIgPSB0aGlzLiRyZWZzW2Nyb3BwZXJLZXldWzBdOwoKICAgICAgLy8gSWYgY3JvcHBpbmcsIGVuYWJsZQogICAgICBpZiAodGhpcy5zbmFwcGVkQW5zd2VyUHJldmlld3Nba2V5XS5jcm9wcGluZykgewogICAgICAgIGNyb3BwZXIuZW5hYmxlKCk7CiAgICAgIH0gZWxzZXsKICAgICAgICBjcm9wcGVyLmNsZWFyKCk7CiAgICAgICAgY3JvcHBlci5kaXNhYmxlKCk7CiAgICAgIH0KICAgIH0sCgogICAgdnVlQ3JvcHBlckNvbnRhaW5lclN0eWxlKGtleSkgewogICAgICBsZXQgc3R5bGUgPSB7CiAgICAgICAgd2lkdGg6ICcxMDAlJywKICAgICAgICAvLyBkaXNwbGF5OiAnbm9uZScKICAgICAgfQoKICAgICAgaWYgKHRoaXMuc25hcHBlZEFuc3dlclByZXZpZXdzW2tleV0uY3JvcHBpbmcpIHsKICAgICAgICBzdHlsZS5kaXNwbGF5ID0gJ2ZsZXgnCiAgICAgIH0KICAgICAgcmV0dXJuICBzdHlsZTsKICAgIH0sCgogICAgc2F2ZUNyb3BwZWRTbmFwcGVkQW5zd2VyKGtleSkgewogICAgICBsZXQgY3JvcHBlcktleSA9IGBjcm9wcGVyXyR7a2V5fWAKCiAgICAgIGxldCBjcm9wcGVyID0gdGhpcy4kcmVmc1tjcm9wcGVyS2V5XVswXTsKCiAgICAgIGxldCBjcm9wcGVkID0gIGNyb3BwZXIuZ2V0Q3JvcHBlZENhbnZhcyh7CiAgICAgICAgbWF4V2lkdGg6IDcyMCwKICAgICAgICBtYXhIZWlnaHQ6IDcyMCwKICAgICAgICBmaWxsQ29sb3I6ICcjZmZmJwogICAgICB9KTsKCiAgICAgIGxldCBkYXRhVVJMID0gY3JvcHBlZC50b0RhdGFVUkwoImltYWdlL2pwZWciKTsKICAgICAgY3JvcHBlci5yZXBsYWNlKGRhdGFVUkwpOwogICAgICB0aGlzLnNuYXBwZWRBbnN3ZXJQcmV2aWV3c1trZXldLnNvdXJjZSA9IGRhdGFVUkw7CgogICAgICBjcm9wcGVkLnRvQmxvYigoYmxvYikgPT4gewogICAgICAgICAgICAgIHRoaXMuc25hcHBlZEFuc3dlcnNba2V5XSA9IGJsb2I7CiAgICAgICAgICAgIH0sJ2ltYWdlL2pwZWcnKTsKCiAgICAgIHRoaXMudG9nZ2xlU25hcHBlZENyb3BwaW5nU3RhdHVzKGtleSkKCiAgICB9LAoKICAgIHJlbW92ZVNuYXBwZWRBbnN3ZXIoa2V5KSB7CgogICAgICBsZXQgY3JvcHBlcktleSA9IGBjcm9wcGVyXyR7a2V5fWAKCiAgICAgIGxldCBjcm9wcGVyID0gdGhpcy4kcmVmc1tjcm9wcGVyS2V5XVswXTsKICAgICAgY3JvcHBlci5kZXN0cm95KCk7CgogICAgICB0aGlzLnNuYXBwZWRBbnN3ZXJzLnNwbGljZShrZXksIDEpOwogICAgICB0aGlzLnNuYXBwZWRBbnN3ZXJQcmV2aWV3cy5zcGxpY2Uoa2V5LCAxKTsKICAgIH0sCgogICAgc3VibWl0KCkgewogICAgICBpZiAodGhpcy5pc1NuYXBwZWRBbnN3ZXIpIHsKICAgICAgICBpZiAodGhpcy5zbmFwcGVkQW5zd2Vycy5sZW5ndGggPiAwKSB7CiAgICAgICAgICB0aGlzLiRlbWl0KCdzbmFwcGVkQW5zd2VyJywgdGhpcy5zbmFwcGVkQW5zd2VycykKICAgICAgICAgIHRoaXMuJGVtaXQoJ3N1Ym1pdCcsIHRoaXMucmVtYXJrcykKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy4kZW1pdCgnZXJyb3InLCB7CiAgICAgICAgICAgIHN0YXR1czogdHJ1ZSwKICAgICAgICAgICAgbWVzc2FnZTogJ1BsZWFzZSBzbmFwIGFuIGFuc3dlciEnCiAgICAgICAgICB9KQogICAgICAgIH0KICAgICAgfQoKICAgICAgaWYgKHRoaXMuaXNXcml0dGVuQW5zd2VyKSB7CiAgICAgICAgdGhpcy4kZW1pdCgnc3VibWl0JywgdGhpcy5yZW1hcmtzKQogICAgICB9CgogICAgfSwKCgogIH0sCiAgbW91bnRlZCgpIHsKCiAgICBpZiAodGhpcy5pc1NuYXBwZWRBbnN3ZXIpIHsKICAgICAgdGhpcy5nZW5lcmF0ZVNuYXBwZWRBbnN3ZXJQcmV2aWV3KHRoaXMuYW5zd2VyLmNvbnRlbnQpCiAgICB9CiAgfSwKICBjcmVhdGVkKCkgewogICAgaWYgKCF0aGlzLmhhc0Fuc3dlckNvbnRlbnQpIHsKICAgICAgcm91dGVyLnB1c2goe25hbWU6ICdzdHVkZW50LmFzc2lnbm1lbnRzLnNob3cnfSkKICAgIH0KICB9LAogIGNvbXBvbmVudHM6IHsKICAgIENyb3BJY29uLAogICAgQXJyb3dCYWNrSWNvbiwKICAgIFBhZ2VIZWFkZXJUaHJlZSwKICAgIERhc2hib2FyZExheW91dCwgTW9kYWwsIFRyYXNoSWNvbiwgSWNvbkJhc2VUd28sIE5hdkJhY2ssIFBhZ2VUaXRsZVR3bywKICAgIEZvbnRBd2Vzb21lSWNvbiwKICAgIFZ1ZUNyb3BwZXIKICB9Cn0K"},{"version":3,"sources":["AnswerSave.vue"],"names":[],"mappings":";AA2JA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;;AAGA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"AnswerSave.vue","sourceRoot":"src/views/students/StudentAssignments/Answer","sourcesContent":["<template>\n\n  <dashboard-layout :content-fills-screen=\"isPreviewingSnappedAnswer\"\n                    :has-custom-bottom-bar=\"isMainPage\"\n                    :no-bottom-bar=\" isPreviewingSnappedAnswer\"\n  >\n\n    <template v-slot:pageHeader>\n      <page-header-three>\n\n        <template v-slot:leftAction>\n          <nav-back v-if=\"isMainPage\"\n                    type=\"cancel\"\n                    :to=\"{name: 'student.assignments.show'}\"\n                    class=\"w-2/7\" stroke-color=\"red-primary\"\n          />\n\n          <div @click=\"toggleSnappedAnswerPreview\"\n               v-if=\"isPreviewingSnappedAnswer\"\n          >\n            <icon-base-two class=\"w-2/7 ml-5\">\n              <arrow-back-icon/>\n            </icon-base-two>\n          </div>\n        </template>\n\n        <template v-slot:mini-title>\n          Answer\n        </template>\n\n      </page-header-three>\n    </template>\n\n    <template slot=\"content\" v-if=\"isMainPage\">\n\n      <div class=\"relative pt-40 px-6 h-full text-left text-purple-primary\">\n\n        <!-- SUBMISSION DETAIL -->\n        <div>\n          <div>\n            Your answer will be submitted to\n          </div>\n          <div class=\"font-bold mt-1\">\n            {{ assignmentDetails ? assignmentDetails.title : '' }}\n          </div>\n        </div>\n\n        <!-- VIEW SNAPPED ANSWER -->\n        <div class=\"mt-10\" v-if=\"isSnappedAnswer\">\n          <div class=\"mb-4\">\n            Your Snapped Answer\n          </div>\n          <div class=\"flex flex-col\">\n\n            <div v-for=\"(image,key) in snappedAnswerPreviews\"\n                 class=\"flex flex-col py-5 px-5 mt-2 mb-2 w-full text-lg font-normal leading-tight rounded-md border border-none appearance-none bg-gray-secondary text-purple-secondary focus:outline-none focus:shadow-outline placeholder-purple-secondary\"\n            >\n\n              <div class=\"mt-5 w-full\">\n                {{`cropper_${key}`}}\n                <vue-cropper :ref=\"`cropper_${key}`\"\n                             :container-style=\"vueCropperContainerStyle(key)\"\n                             :src=\"image.source\"\n                             alt=\"Source Image\"\n                             @ready=\"handleVueCropperReady\"\n                >\n                </vue-cropper>\n\n                <div v-if=\"image.cropping\" class=\"flex flex-row items-center mt-4 md:mt-4 \">\n                  <button @click=\"toggleSnappedCroppingStatus(key)\"\n                          class=\"flex flex-row items-center w-1/2  py-3 md:py-5 mr-1 rounded-lg bg-red-primary focus:outline-none\">\n                    <div class=\"text-white text-sm md:text-lg w-full\">\n                      Cancel\n                    </div>\n                  </button>\n                  <button @click=\"saveCroppedSnappedAnswer(key)\"\n                          class=\"flex flex-row items-center  py-3  md:py-5 w-1/2 ml-1 rounded-lg bg-green-400 focus:outline-none\">\n                    <div class=\"text-white text-sm md:text-lg w-3/4\">\n                      Done\n                    </div>\n                    <div class=\"w-1/4\">\n                      <icon-base-two class=\"w-1/2\">\n                        <crop-icon/>\n                      </icon-base-two>\n                    </div>\n                  </button>\n                </div>\n\n                <div v-else class=\"flex flex-row items-center mt-2 md:mt-4 \">\n                  <button @click=\"removeSnappedAnswer(key)\"\n                          class=\"flex flex-row items-center w-1/2  py-3 md:py-5 mr-1 rounded-lg bg-red-primary focus:outline-none\">\n                    <div class=\"text-white text-sm md:text-lg w-3/4\">\n                      Remove\n                    </div>\n                    <div class=\"w-1/4\">\n                      <font-awesome-icon class=\"w-full fa-1x text-white\" :icon=\"icons.trash\"/>\n                    </div>\n                  </button>\n                  <button @click=\"toggleSnappedCroppingStatus(key)\"\n                          class=\"flex flex-row items-center  py-3  md:py-5 w-1/2 ml-1 rounded-lg bg-purple-primary focus:outline-none\">\n                    <div class=\"text-white text-sm md:text-lg w-3/4\">\n                      Crop\n                    </div>\n                    <div class=\"w-1/4\">\n                      <font-awesome-icon class=\"w-full fa-1x text-white\" :icon=\"icons.crop\"/>\n                    </div>\n                  </button>\n                </div>\n              </div>\n\n            </div>\n\n          </div>\n\n\n          <!-- ADD MORE PHOTO -->\n          <div class=\"flex mb-4 -mx-1\">\n            <label\n                class=\"text-center pl-6 pr-2 py-5 mt-2  appearance-none border rounded-md border-none w-full text-lg font-normal leading-tight focus:outline-none focus:shadow-outline text-red-primary\">\n              + Add more photo\n              <input class=\"hidden\" type=\"file\" accept=\"image/*\" multiple @change=\"onFileSelected\">\n            </label>\n          </div>\n        </div>\n\n\n        <div class=\"mt-6\">\n          <div>\n            Your remarks\n          </div>\n          <div class=\"mt-4 h-36 \">\n            <textarea v-model=\"remarks\"\n                      class=\"resize-y text-purple-primary py-4 px-5 h-full w-full bg-gray-secondary rounded focus:outline-none placeholder-purple-secondary\"\n                      placeholder=\"Remarks\"></textarea>\n          </div>\n        </div>\n\n      </div>\n    </template>\n\n\n    <template v-slot:bottomBar>\n      <div class=\"w-full md:max-w-xl px-2\">\n        <button @click=\"submit\"\n                :disabled=\"isSubmitting\"\n                class=\"w-full font-bold rounded-full text-purple-primary text-sm bg-yellow-primary py-4 px-1 flex flex-row justify-center\">\n          Submit Answer\n        </button>\n      </div>\n    </template>\n  </dashboard-layout>\n\n</template>\n\n<script>\nimport PageTitleTwo from \"@/components/PageTitleTwo\";\nimport NavBack from \"@/components/NavBack\";\nimport IconBaseTwo from \"@/components/IconBaseTwo\";\nimport TrashIcon from \"@/components/icons/TrashIcon\";\nimport Modal from \"@/components/Modal\";\nimport DashboardLayout from \"@/views/layout/DashboardLayout\";\nimport PageHeaderThree from \"@/components/PageHeaderThree\";\nimport router from \"@/router\";\nimport ArrowBackIcon from \"@/components/icons/ArrowBackIcon\";\nimport CropIcon from \"@/components/icons/CropIcon\";\n\n// Vue Cropper\nimport VueCropper from 'vue-cropperjs';\nimport 'cropperjs/dist/cropper.css';\n\n// FONT AWESOME\nimport {FontAwesomeIcon} from '@fortawesome/vue-fontawesome'\nimport {faTrash, faCropAlt} from \"@fortawesome/free-solid-svg-icons\";\n\nexport default {\n  name: \"AnswerSave\",\n  props: {\n    answer: Object,\n    assignmentDetails: Object,\n  },\n  data() {\n    return {\n\n      // States\n      isMainPage: true,\n      isPreviewingSnappedAnswer: false,\n      isSubmitting: false,\n      isShowingModal: false,\n      submissionStatus: null,\n\n      snappedAnswerPreviews: [],\n\n      remarks: '',\n\n      snappedAnswers: [],\n\n      // Icons\n      icons: {\n        crop: faCropAlt,\n        trash: faTrash\n      }\n    }\n  },\n  computed: {\n    hasAnswerContent() {\n      return this.answer.type !== null && this.answer.content !== '';\n    },\n    isWrittenAnswer() {\n      return this.answer.type === 'written';\n    },\n    isSnappedAnswer() {\n      return this.answer.type === 'snapped';\n    },\n  },\n  methods: {\n\n    toggleSnappedAnswerPreview() {\n      if (this.isPreviewingSnappedAnswer) {\n        this.isMainPage = true;\n        this.isPreviewingSnappedAnswer = false;\n      } else {\n        this.isMainPage = false;\n        this.isPreviewingSnappedAnswer = true;\n      }\n    },\n\n    onFileSelected(e) {\n      let files = e.target.files || e.dataTransfer.files\n\n      if (!files.length) {\n        return\n      }\n\n      if (files[0].type.match(\"image.*\")) {\n        this.generateSnappedAnswerPreview(files)\n      }\n\n      e.target.value = ''\n\n    },\n\n    handleVueCropperReady(e) {\n      let cropper = e.target.cropper;\n\n      cropper.autoCrop = false;\n\n      cropper.clear();\n      cropper.disable();\n\n      // If this is new photo uploaded, add image to snapped answers array\n      if (!cropper.replaced) {\n        cropper.getCroppedCanvas({\n          maxWidth: 720,\n          maxHeight: 720,\n          fillColor: '#fff'\n        }).toBlob((blob) => {\n          this.snappedAnswers.push(blob)\n        },'image/jpeg');\n      }\n\n\n    },\n\n    generateSnappedAnswerPreview(files) {\n      files.forEach(f => {\n\n        if (!f.type.match(\"image.*\")) {\n          return;\n        }\n\n        let reader = new FileReader();\n        let that = this;\n\n        reader.onload = function (e) {\n\n          that.snappedAnswerPreviews.push({\n            source: e.target.result,\n            cropping: false\n          });\n        }\n\n        reader.readAsDataURL(f);\n      });\n    },\n\n    toggleSnappedCroppingStatus(key) {\n      this.snappedAnswerPreviews[key].cropping = !this.snappedAnswerPreviews[key].cropping;\n\n      let cropperKey = `cropper_${key}`\n      let cropper = this.$refs[cropperKey][0];\n\n      // If cropping, enable\n      if (this.snappedAnswerPreviews[key].cropping) {\n        cropper.enable();\n      } else{\n        cropper.clear();\n        cropper.disable();\n      }\n    },\n\n    vueCropperContainerStyle(key) {\n      let style = {\n        width: '100%',\n        // display: 'none'\n      }\n\n      if (this.snappedAnswerPreviews[key].cropping) {\n        style.display = 'flex'\n      }\n      return  style;\n    },\n\n    saveCroppedSnappedAnswer(key) {\n      let cropperKey = `cropper_${key}`\n\n      let cropper = this.$refs[cropperKey][0];\n\n      let cropped =  cropper.getCroppedCanvas({\n        maxWidth: 720,\n        maxHeight: 720,\n        fillColor: '#fff'\n      });\n\n      let dataURL = cropped.toDataURL(\"image/jpeg\");\n      cropper.replace(dataURL);\n      this.snappedAnswerPreviews[key].source = dataURL;\n\n      cropped.toBlob((blob) => {\n              this.snappedAnswers[key] = blob;\n            },'image/jpeg');\n\n      this.toggleSnappedCroppingStatus(key)\n\n    },\n\n    removeSnappedAnswer(key) {\n\n      let cropperKey = `cropper_${key}`\n\n      let cropper = this.$refs[cropperKey][0];\n      cropper.destroy();\n\n      this.snappedAnswers.splice(key, 1);\n      this.snappedAnswerPreviews.splice(key, 1);\n    },\n\n    submit() {\n      if (this.isSnappedAnswer) {\n        if (this.snappedAnswers.length > 0) {\n          this.$emit('snappedAnswer', this.snappedAnswers)\n          this.$emit('submit', this.remarks)\n        } else {\n          this.$emit('error', {\n            status: true,\n            message: 'Please snap an answer!'\n          })\n        }\n      }\n\n      if (this.isWrittenAnswer) {\n        this.$emit('submit', this.remarks)\n      }\n\n    },\n\n\n  },\n  mounted() {\n\n    if (this.isSnappedAnswer) {\n      this.generateSnappedAnswerPreview(this.answer.content)\n    }\n  },\n  created() {\n    if (!this.hasAnswerContent) {\n      router.push({name: 'student.assignments.show'})\n    }\n  },\n  components: {\n    CropIcon,\n    ArrowBackIcon,\n    PageHeaderThree,\n    DashboardLayout, Modal, TrashIcon, IconBaseTwo, NavBack, PageTitleTwo,\n    FontAwesomeIcon,\n    VueCropper\n  }\n}\n</script>\n\n<style>\n</style>\n"]}]}