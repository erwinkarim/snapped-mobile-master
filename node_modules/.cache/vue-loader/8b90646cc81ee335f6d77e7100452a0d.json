{"remainingRequest":"/Users/erwinkarim/Websites/Snapped/snapped-mobile-master/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/erwinkarim/Websites/Snapped/snapped-mobile-master/src/views/teachers/TeachersStudents/StudentsList.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/erwinkarim/Websites/Snapped/snapped-mobile-master/src/views/teachers/TeachersStudents/StudentsList.vue","mtime":1680008048383},{"path":"/Users/erwinkarim/Websites/Snapped/snapped-mobile-master/node_modules/babel-loader/lib/index.js","mtime":1680059914906},{"path":"/Users/erwinkarim/Websites/Snapped/snapped-mobile-master/node_modules/cache-loader/dist/cjs.js","mtime":1680070113546},{"path":"/Users/erwinkarim/Websites/Snapped/snapped-mobile-master/node_modules/vue-loader/lib/index.js","mtime":1680070113705}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCBUZWFjaGVyUmVwb3NpdG9yeSBmcm9tICJAL3JlcG9zaXRvcmllcy9UZWFjaGVyUmVwb3NpdG9yeSI7CmltcG9ydCBJY29uQmFzZSBmcm9tICJAL2NvbXBvbmVudHMvSWNvbkJhc2UiOwppbXBvcnQgUHJvZmlsZVBob3RvIGZyb20gIkAvY29tcG9uZW50cy9pY29ucy9Qcm9maWxlUGhvdG8iOwppbXBvcnQgcm91dGVyIGZyb20gIkAvcm91dGVyIjsKaW1wb3J0IFRhZ2dpbmdJY29uIGZyb20gIi4uLy4uLy4uL2NvbXBvbmVudHMvaWNvbnMvVGFnZ2luZ0ljb24iOwppbXBvcnQgSWNvbkJhc2VUd28gZnJvbSAiLi4vLi4vLi4vY29tcG9uZW50cy9JY29uQmFzZVR3byI7CmltcG9ydCBTdHVkZW50UmVwb3NpdG9yeSBmcm9tICJAL3JlcG9zaXRvcmllcy9TdHVkZW50UmVwb3NpdG9yeSI7CmltcG9ydCBJbmZpbml0ZUxvYWRpbmcgZnJvbSAidnVlLWluZmluaXRlLWxvYWRpbmciOwoKCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiU3R1ZGVudHNMaXN0IiwKICBwcm9wczogewogICAgc2VhcmNoOiBTdHJpbmcKICB9LAogIGRhdGEoKSB7CiAgICByZXR1cm4gewoKICAgICAgLy8gc3RhdGVzCiAgICAgIGVycm9yOiBudWxsLAogICAgICBsb2FkaW5nOiBmYWxzZSwKICAgICAgYXdhaXRpbmdTZWFyY2g6IGZhbHNlLAoKICAgICAgZmlsdGVyQ291bnQ6IDAsCiAgICAgIGZpbHRlcnM6IHsKICAgICAgICBwYWdlTnVtOiAxLAogICAgICAgIHBlclBhZ2U6IDIwLAogICAgICAgIHNlYXJjaDogJycKICAgICAgfSwKICAgICAgbWV0YTogbnVsbCwKCiAgICAgIC8vIGRhdGEKICAgICAgc3R1ZGVudHM6IFtdLAogICAgICBwZXJmb3JtYW5jZXM6IG51bGwKICAgIH0KICB9LAogIHdhdGNoOiB7CiAgICAnJHJvdXRlJzogJ2ZldGNoRGF0YScsCiAgICAnc2VhcmNoJzogJ3NlYXJjaE5hbWUnCiAgfSwKICBjb21wdXRlZDogewogICAgaGFzTG9hZE1vcmUoKSB7CiAgICAgIGlmICh0aGlzLm1ldGEpIHsKICAgICAgICByZXR1cm4gdGhpcy5maWx0ZXJzLnBhZ2VOdW0gPD0gdGhpcy5tZXRhLmxhc3RfcGFnZQogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiB0cnVlOwogICAgICB9CiAgICB9LAogIH0sCiAgbWV0aG9kczogewoKICAgIGhhbmRsZUluZmluaXRlU2Nyb2xsKCRzdGF0ZSkgewoKICAgICAgaWYgKHRoaXMuaGFzTG9hZE1vcmUpIHsKCiAgICAgICAgVGVhY2hlclJlcG9zaXRvcnkuZ2V0VGVhY2hlclN0dWRlbnRzKHRoaXMuZmlsdGVycykKICAgICAgICAgICAgLnRoZW4ocmVzcG9uc2UgPT4gewoKICAgICAgICAgICAgICBsZXQgZGF0YSA9IHJlc3BvbnNlLmRhdGEuZGF0YQoKICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGRhdGEubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgICAgIHRoaXMuc3R1ZGVudHMucHVzaChkYXRhW2ldKTsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIC8vIFVwZGF0ZSBtZXRhIGRldGFpbHMgYW5kIHBhZ2VOdW0gZm9yIGZpbHRlcnMKICAgICAgICAgICAgICB0aGlzLm1ldGEgPSByZXNwb25zZS5kYXRhLm1ldGE7CiAgICAgICAgICAgICAgdGhpcy5maWx0ZXJzLnBhZ2VOdW0gPSB0aGlzLm1ldGEuY3VycmVudF9wYWdlICsgMTsKCiAgICAgICAgICAgICAgJHN0YXRlLmxvYWRlZCgpOwoKICAgICAgICAgICAgfSkKCiAgICAgIH0gZWxzZSB7CiAgICAgICAgJHN0YXRlLmNvbXBsZXRlKCk7CiAgICAgIH0KICAgIH0sCgogICAgZ2V0U3R1ZGVudFBlcmZvcm1hbmNlKCkgewogICAgICBUZWFjaGVyUmVwb3NpdG9yeS5nZXRTdHVkZW50UGVyZm9ybWFuY2UoKQogICAgICAgICAgLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgICAgICBsZXQgZGF0YSA9IHJlc3BvbnNlLmRhdGE7CgogICAgICAgICAgICB0aGlzLnBlcmZvcm1hbmNlcyA9IGRhdGEuZGF0YTsKICAgICAgICAgIH0pCiAgICB9LAoKICAgIHNlYXJjaE5hbWUoKSB7CgogICAgICB0aGlzLmZpbHRlcnMuc2VhcmNoID0gdGhpcy5zZWFyY2g7CgogICAgICBpZiAoIXRoaXMuYXdhaXRpbmdTZWFyY2gpIHsKICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICAgIHRoaXMuYXdhaXRpbmdTZWFyY2ggPSBmYWxzZTsKICAgICAgICAgIHRoaXMudXBkYXRlRmlsdGVyKCk7CiAgICAgICAgfSwgMTAwMCk7IC8vIDEgc2VjIGRlbGF5CiAgICAgIH0KICAgICAgdGhpcy5hd2FpdGluZ1NlYXJjaCA9IHRydWU7CiAgICB9LAoKICAgIHVwZGF0ZUZpbHRlcigpIHsKICAgICAgdGhpcy5maWx0ZXJzLnBhZ2VOdW0gPSAxCiAgICAgIHRoaXMuZmlsdGVycy5wZXJQYWdlID0gMjAKCiAgICAgIHRoaXMuc3R1ZGVudHMgPSBbXTsKICAgICAgdGhpcy5maWx0ZXJDb3VudCsrOwogICAgfSwKCiAgICBnb1RvU3R1ZGVudFNob3coc3R1ZGVudElEKSB7CiAgICAgIHJvdXRlci5wdXNoKHtuYW1lOiAnc3R1ZGVudC5wcm9maWxlLnNob3cnLCBwYXJhbXM6IHtzdHVkZW50SUQ6IHN0dWRlbnRJRH19KQogICAgfSwKCiAgICB0YWdnaW5nQ2xhc3Moc3RhdHVzQ29sb3IpIHsKCiAgICAgIHN3aXRjaCAoc3RhdHVzQ29sb3IpIHsKICAgICAgICBjYXNlICduZXV0cmFsJyA6CiAgICAgICAgICByZXR1cm4gJyc7CiAgICAgICAgY2FzZSAncmVkJzoKICAgICAgICAgIHJldHVybiAndGV4dC1yZWQtcHJpbWFyeSc7CiAgICAgICAgY2FzZSAneWVsbG93JzoKICAgICAgICAgIHJldHVybiAidGV4dC15ZWxsb3ctcHJpbWFyeSI7CiAgICAgICAgY2FzZSAnZ3JlZW4nOgogICAgICAgICAgcmV0dXJuICJ0ZXh0LWdyZWVuLXByaW1hcnkiOwogICAgICB9CiAgICB9CiAgfSwKICBjcmVhdGVkKCkgewogICAgLy8gdGhpcy5mZXRjaERhdGEoKQogIH0sCiAgbW91bnRlZCgpIHsKICAgIHRoaXMuZ2V0U3R1ZGVudFBlcmZvcm1hbmNlKCkKICB9LAogIGNvbXBvbmVudHM6IHtJY29uQmFzZVR3bywgVGFnZ2luZ0ljb24sIFByb2ZpbGVQaG90bywgSWNvbkJhc2UsIEluZmluaXRlTG9hZGluZ30sCgp9Cg=="},{"version":3,"sources":["StudentsList.vue"],"names":[],"mappings":";AAqCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA","file":"StudentsList.vue","sourceRoot":"src/views/teachers/TeachersStudents","sourcesContent":["<template>\n  <div>\n    <div v-for=\"student in students\"\n         :key=\"student.id\"\n         @click=\"goToStudentShow(student.id)\"\n         class=\"text-left px-5 py-2 h-20 flex flex-row w-full border-b-1 items-center bg-white\"\n    >\n      <div class=\"flex flex-row items-center w-11/12\">\n        <icon-base-two class=\" w-1/6\" icon-name=\"profile-photo-icon\" icon-color=\"white\" view-box=\"0 0 60 55\">\n          <profile-photo :gender=\"student.gender\"/>\n        </icon-base-two>\n        <div class=\"w-5/6 ml-5 text-purple-primary  truncate pr-4\"> {{ student.name }}</div>\n      </div>\n      <div v-for=\"performance in performances\"\n           v-if=\"performance.student_id === student.id \"\n           class=\" w-1/12\"\n      >\n        <icon-base-two :class=\"taggingClass(performance.status_color)\" class=\"w-5/6\">\n          <tagging-icon/>\n        </icon-base-two>\n      </div>\n    </div>\n\n    <infinite-loading :identifier=\"filterCount\"\n                      @infinite=\"handleInfiniteScroll\"\n                      spinner=\"bubbles\"\n                      force-use-infinite-wrapper\n    >\n      <div slot=\"spinner\" class=\"mt-10\">Loading...</div>\n      <div slot=\"no-more\"></div>\n      <div slot=\"no-results\">No results message</div>\n    </infinite-loading>\n\n  </div>\n</template>\n\n<script>\nimport TeacherRepository from \"@/repositories/TeacherRepository\";\nimport IconBase from \"@/components/IconBase\";\nimport ProfilePhoto from \"@/components/icons/ProfilePhoto\";\nimport router from \"@/router\";\nimport TaggingIcon from \"../../../components/icons/TaggingIcon\";\nimport IconBaseTwo from \"../../../components/IconBaseTwo\";\nimport StudentRepository from \"@/repositories/StudentRepository\";\nimport InfiniteLoading from \"vue-infinite-loading\";\n\n\nexport default {\n  name: \"StudentsList\",\n  props: {\n    search: String\n  },\n  data() {\n    return {\n\n      // states\n      error: null,\n      loading: false,\n      awaitingSearch: false,\n\n      filterCount: 0,\n      filters: {\n        pageNum: 1,\n        perPage: 20,\n        search: ''\n      },\n      meta: null,\n\n      // data\n      students: [],\n      performances: null\n    }\n  },\n  watch: {\n    '$route': 'fetchData',\n    'search': 'searchName'\n  },\n  computed: {\n    hasLoadMore() {\n      if (this.meta) {\n        return this.filters.pageNum <= this.meta.last_page\n      } else {\n        return true;\n      }\n    },\n  },\n  methods: {\n\n    handleInfiniteScroll($state) {\n\n      if (this.hasLoadMore) {\n\n        TeacherRepository.getTeacherStudents(this.filters)\n            .then(response => {\n\n              let data = response.data.data\n\n              for (let i = 0; i < data.length; i++) {\n                this.students.push(data[i]);\n              }\n\n              // Update meta details and pageNum for filters\n              this.meta = response.data.meta;\n              this.filters.pageNum = this.meta.current_page + 1;\n\n              $state.loaded();\n\n            })\n\n      } else {\n        $state.complete();\n      }\n    },\n\n    getStudentPerformance() {\n      TeacherRepository.getStudentPerformance()\n          .then(response => {\n            let data = response.data;\n\n            this.performances = data.data;\n          })\n    },\n\n    searchName() {\n\n      this.filters.search = this.search;\n\n      if (!this.awaitingSearch) {\n        setTimeout(() => {\n          this.awaitingSearch = false;\n          this.updateFilter();\n        }, 1000); // 1 sec delay\n      }\n      this.awaitingSearch = true;\n    },\n\n    updateFilter() {\n      this.filters.pageNum = 1\n      this.filters.perPage = 20\n\n      this.students = [];\n      this.filterCount++;\n    },\n\n    goToStudentShow(studentID) {\n      router.push({name: 'student.profile.show', params: {studentID: studentID}})\n    },\n\n    taggingClass(statusColor) {\n\n      switch (statusColor) {\n        case 'neutral' :\n          return '';\n        case 'red':\n          return 'text-red-primary';\n        case 'yellow':\n          return \"text-yellow-primary\";\n        case 'green':\n          return \"text-green-primary\";\n      }\n    }\n  },\n  created() {\n    // this.fetchData()\n  },\n  mounted() {\n    this.getStudentPerformance()\n  },\n  components: {IconBaseTwo, TaggingIcon, ProfilePhoto, IconBase, InfiniteLoading},\n\n}\n</script>\n\n<style scoped>\n\n</style>\n"]}]}