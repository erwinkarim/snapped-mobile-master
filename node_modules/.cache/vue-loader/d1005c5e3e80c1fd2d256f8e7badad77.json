{"remainingRequest":"/Users/erwinkarim/Websites/Snapped/snapped-mobile-master/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/erwinkarim/Websites/Snapped/snapped-mobile-master/src/views/auth/Edit.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/erwinkarim/Websites/Snapped/snapped-mobile-master/src/views/auth/Edit.vue","mtime":1679379067243},{"path":"/Users/erwinkarim/Websites/Snapped/snapped-mobile-master/node_modules/babel-loader/lib/index.js","mtime":1680059914906},{"path":"/Users/erwinkarim/Websites/Snapped/snapped-mobile-master/node_modules/cache-loader/dist/cjs.js","mtime":1680070113546},{"path":"/Users/erwinkarim/Websites/Snapped/snapped-mobile-master/node_modules/vue-loader/lib/index.js","mtime":1680070113705}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCBEYXNoYm9hcmRMYXlvdXQgZnJvbSAiQC92aWV3cy9sYXlvdXQvRGFzaGJvYXJkTGF5b3V0IjsKaW1wb3J0IFBhZ2VUaXRsZSBmcm9tICJAL2NvbXBvbmVudHMvUGFnZVRpdGxlIjsKaW1wb3J0IFNlY3Rpb25UaXRsZSBmcm9tICJAL2NvbXBvbmVudHMvU2VjdGlvblRpdGxlIjsKaW1wb3J0IEF1dGhlbnRpY2F0aW9uUmVwb3NpdG9yeSBmcm9tICJAL3JlcG9zaXRvcmllcy9BdXRoZW50aWNhdGlvblJlcG9zaXRvcnkiOwppbXBvcnQgUGFnZUhlYWRlclRocmVlIGZyb20gIkAvY29tcG9uZW50cy9QYWdlSGVhZGVyVGhyZWUiOwppbXBvcnQgTmF2QmFjayBmcm9tICJAL2NvbXBvbmVudHMvTmF2QmFjayI7CgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIkVkaXQiLAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBmb3JtOiB7fSwKCiAgICAgIHN0YXRlczogewogICAgICAgIGlzU3VibWl0dGluZzogZmFsc2UsCiAgICAgIH0sCgogICAgICBjaGFuZ2VQYXNzd29yZDogewogICAgICAgIG9sZDogbnVsbCwKICAgICAgICBuZXc6IG51bGwsCiAgICAgICAgbmV3X2NvbmZpcm1hdGlvbjogbnVsbAogICAgICB9LAogICAgICBzdWNjZXNzOiBudWxsLAogICAgICBlcnJvcnM6IFtdCiAgICB9CiAgfSwKCiAgY29tcHV0ZWQ6IHsKICAgIHZhbGlkRm9ybSgpIHsKICAgICAgcmV0dXJuIHRoaXMuZXJyb3JzLmxlbmd0aCA9PT0gMDsKICAgIH0sCiAgICBuYXZCYWNrUm91dGUoKSB7CiAgICAgIGxldCByb3V0ZU5hbWUgPSAnJzsKCiAgICAgIGlmKHRoaXMuJHN0b3JlLmdldHRlcnMuZ2V0QXV0aFVzZXJSb2xlID09PSAnVGVhY2hlcicpewogICAgICAgIHJvdXRlTmFtZSA9ICd0ZWFjaGVyLnNldHRpbmdzJwogICAgICB9CgogICAgICBpZih0aGlzLiRzdG9yZS5nZXR0ZXJzLmdldEF1dGhVc2VyUm9sZSA9PT0gJ1N0dWRlbnQnKXsKICAgICAgICByb3V0ZU5hbWUgPSAnc3R1ZGVudC5zZXR0aW5ncycKICAgICAgfQogICAgfQogIH0sCgogIG1ldGhvZHM6IHsKCiAgICB2YWxpZGF0ZUZvcm0oKSB7CgogICAgICAvLyBkZXRlcm1pbmUgaWYgdXNlciBpcyB1cGRhdGluZyBwYXNzd29yZAogICAgICBsZXQgaXNVcGRhdGluZ1Bhc3N3b3JkID0gKAogICAgICAgICAgdGhpcy5jaGFuZ2VQYXNzd29yZC5vbGQgIT09IG51bGwKICAgICAgICAgIHx8IHRoaXMuY2hhbmdlUGFzc3dvcmQubmV3ICE9PSAnJwogICAgICAgICAgfHwgdGhpcy5jaGFuZ2VQYXNzd29yZC5uZXcgIT09IG51bGwKICAgICAgICAgIHx8IHRoaXMuY2hhbmdlUGFzc3dvcmQubmV3ICE9PSAnJwogICAgICAgICAgfHwgdGhpcy5jaGFuZ2VQYXNzd29yZC5uZXdfY29uZmlybWF0aW9uICE9PSBudWxsCiAgICAgICAgICB8fCB0aGlzLmNoYW5nZVBhc3N3b3JkLm5ld19jb25maXJtYXRpb24gIT09ICcnCiAgICAgICk7CgogICAgICAvLyBJZiB1c2VyIGlzIHVwZGF0aW5nIHBhc3N3b3JkLCBjaGVjayBpZiB1c2VyIGxlZnQgYW55IHBhc3N3b3JkIGlucHV0cyBudWxsIG9yIGVtcHR5IHN0cmluZwogICAgICBpZiAoaXNVcGRhdGluZ1Bhc3N3b3JkKSB7CiAgICAgICAgaWYgKCF0aGlzLmNoYW5nZVBhc3N3b3JkLm9sZCkgdGhpcy5lcnJvcnMucHVzaCgnUGxlYXNlIGVudGVyIGN1cnJlbnQgcGFzc3dvcmQuJykKICAgICAgICBpZiAoIXRoaXMuY2hhbmdlUGFzc3dvcmQubmV3KSB0aGlzLmVycm9ycy5wdXNoKCdQbGVhc2UgZW50ZXIgbmV3IHBhc3N3b3JkLicpCiAgICAgICAgaWYgKCF0aGlzLmNoYW5nZVBhc3N3b3JkLm5ld19jb25maXJtYXRpb24pIHRoaXMuZXJyb3JzLnB1c2goJ1BsZWFzZSBjb25maXJtIG5ldyBwYXNzd29yZC4nKQogICAgICB9CiAgICB9LAoKICAgIHN1Ym1pdCgpIHsKCiAgICAgIHRoaXMucmVzZXRTdWNjZXNzRXJyb3JCYXIoKTsKICAgICAgdGhpcy52YWxpZGF0ZUZvcm0oKTsKCiAgICAgIGxldCBwYXlsb2FkID0gewogICAgICAgIG9sZF9wYXNzd29yZDogdGhpcy5jaGFuZ2VQYXNzd29yZC5vbGQsCiAgICAgICAgcGFzc3dvcmQ6IHRoaXMuY2hhbmdlUGFzc3dvcmQubmV3LAogICAgICAgIHBhc3N3b3JkX2NvbmZpcm1hdGlvbjogdGhpcy5jaGFuZ2VQYXNzd29yZC5uZXdfY29uZmlybWF0aW9uLAogICAgICB9CgogICAgICBpZiAodGhpcy52YWxpZEZvcm0gJiYgIXRoaXMuaXNTdWJtaXR0aW5nKSB7CgogICAgICAgIHRoaXMuc3RhdGVzLmlzU3VibWl0dGluZyA9IHRydWU7CgogICAgICAgIEF1dGhlbnRpY2F0aW9uUmVwb3NpdG9yeS51cGRhdGVVc2VyRGV0YWlscyhwYXlsb2FkKQogICAgICAgICAgICAudGhlbihyZXNwb25zZSA9PiB7CgogICAgICAgICAgICAgIHRoaXMuc3RhdGVzLmlzU3VibWl0dGluZyA9IGZhbHNlOwoKICAgICAgICAgICAgICBpZiAocmVzcG9uc2UuZGF0YS5zdWNjZXNzKSB7CiAgICAgICAgICAgICAgICB0aGlzLnN1Y2Nlc3MgPSByZXNwb25zZS5kYXRhLm1lc3NhZ2U7CiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHRoaXMuZXJyb3JzLnB1c2gocmVzcG9uc2UuZGF0YS5kYXRhLmVycm9yKQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSkKICAgICAgICAgICAgLmNhdGNoKGVycm9yID0+IHsKICAgICAgICAgICAgICB0aGlzLnN0YXRlcy5pc1N1Ym1pdHRpbmcgPSBmYWxzZTsKICAgICAgICAgICAgfSkKICAgICAgfQoKICAgIH0sCiAgICByZXNldFN1Y2Nlc3NFcnJvckJhcigpIHsKICAgICAgdGhpcy5zdWNjZXNzID0gbnVsbDsKICAgICAgdGhpcy5lcnJvcnMgPSBbXTsKICAgIH0sCgogICAgcmVzZXRJbnB1dHMoKSB7CiAgICAgIHRoaXMuY2hhbmdlUGFzc3dvcmQub2xkID0gbnVsbDsKICAgICAgdGhpcy5jaGFuZ2VQYXNzd29yZC5uZXcgPSBudWxsOwogICAgICB0aGlzLmNoYW5nZVBhc3N3b3JkLm5ld19jb25maXJtYXRpb24gPSBudWxsOwogICAgfQoKICB9LAogIGNvbXBvbmVudHM6IHtOYXZCYWNrLCBQYWdlSGVhZGVyVGhyZWUsIFNlY3Rpb25UaXRsZSwgUGFnZVRpdGxlLCBEYXNoYm9hcmRMYXlvdXR9Cn0K"},{"version":3,"sources":["Edit.vue"],"names":[],"mappings":";AAiFA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA","file":"Edit.vue","sourceRoot":"src/views/auth","sourcesContent":["<template>\n  <dashboard-layout\n      :has-custom-bottom-bar=\"true\"\n  >\n\n    <template v-slot:pageHeader>\n\n      <page-header-three>\n        <template v-slot:leftAction>\n          <nav-back :to=\"navBackRoute\"\n                    stroke-color=\"bg-purple-primary\"\n                    class=\"w-2/7\"\n          />\n        </template>\n        <template v-slot:mini-title>\n          <div class=\"truncate\">\n            Edit Profile\n          </div>\n        </template>\n      </page-header-three>\n    </template>\n\n    <template v-slot:content>\n      <div class=\"absolute h-full w-full my-auto flex flex-col px-4 mt-20\">\n\n        <!-- FORM INPUTS -->\n        <div class=\"px-3 w-full md:max-w-xl lg:max-w-2xl mx-auto mt-5\">\n\n          <div v-if=\"success\"\n              class=\"bg-green-300 mb-4 py-3 mb-2 px-4 text-left text-purple-primary text-xs rounded-lg\"\n          >\n             {{success}}\n          </div>\n          <!-- ERROR BAR -->\n          <div v-if=\"errors.length\"\n               class=\"bg-red-500 mb-4 py-3 mb-2 px-4 text-left text-white text-xs rounded-lg\"\n          >\n            <ul>\n              <li v-for=\"error in errors\">{{ error }}</li>\n            </ul>\n          </div>\n\n          <div class=\"w-full mt-5\">\n            <section-title class=\"text-left my-4\" title=\"Change Password\"/>\n            <div class=\"mb-8\">\n              <input v-model=\"changePassword.old\"\n                     type=\"password\"\n                     @click=\"resetSuccessErrorBar\"\n                     placeholder=\"Current Password\"\n                     class=\"appearance-none border rounded border-none w-full py-2 pl-5 pr-2 md:h-20 md:text-xl mt-3 bg-gray-secondary text-gray-700 font-normal leading-tight focus:outline-none focus:shadow-outline placeholder-purple-secondary h-14\"\n              >\n              <input v-model=\"changePassword.new\"\n                     type=\"password\"\n                     @click=\"resetSuccessErrorBar\"\n                     placeholder=\"New Password\"\n                     class=\"appearance-none border rounded border-none w-full py-2 pl-5 pr-2 md:h-20 md:text-xl mt-3 bg-gray-secondary text-gray-700 font-normal leading-tight focus:outline-none focus:shadow-outline placeholder-purple-secondary h-14\"\n              >\n              <input v-model=\"changePassword.new_confirmation\"\n                     type=\"password\"\n                     @click=\"resetSuccessErrorBar\"\n                     placeholder=\"Confirm New Password\"\n                     class=\"appearance-none border rounded border-none w-full py-2 pl-5 pr-2 md:h-20 md:text-xl mt-3 bg-gray-secondary text-gray-700 font-normal leading-tight focus:outline-none focus:shadow-outline placeholder-purple-secondary h-14\"\n              >\n            </div>\n          </div>\n\n        </div>\n\n      </div>\n    </template>\n\n    <template v-slot:bottomBar>\n      <button @click=\"submit\"\n              class=\"w-full font-bold focus:outline-none rounded-full text-purple-primary text-sm bg-white border-2 border-purple-primary py-3 px-1 flex flex-row justify-center\">\n        Submit\n      </button>\n    </template>\n  </dashboard-layout>\n</template>\n\n<script>\nimport DashboardLayout from \"@/views/layout/DashboardLayout\";\nimport PageTitle from \"@/components/PageTitle\";\nimport SectionTitle from \"@/components/SectionTitle\";\nimport AuthenticationRepository from \"@/repositories/AuthenticationRepository\";\nimport PageHeaderThree from \"@/components/PageHeaderThree\";\nimport NavBack from \"@/components/NavBack\";\n\nexport default {\n  name: \"Edit\",\n  data() {\n    return {\n      form: {},\n\n      states: {\n        isSubmitting: false,\n      },\n\n      changePassword: {\n        old: null,\n        new: null,\n        new_confirmation: null\n      },\n      success: null,\n      errors: []\n    }\n  },\n\n  computed: {\n    validForm() {\n      return this.errors.length === 0;\n    },\n    navBackRoute() {\n      let routeName = '';\n\n      if(this.$store.getters.getAuthUserRole === 'Teacher'){\n        routeName = 'teacher.settings'\n      }\n\n      if(this.$store.getters.getAuthUserRole === 'Student'){\n        routeName = 'student.settings'\n      }\n    }\n  },\n\n  methods: {\n\n    validateForm() {\n\n      // determine if user is updating password\n      let isUpdatingPassword = (\n          this.changePassword.old !== null\n          || this.changePassword.new !== ''\n          || this.changePassword.new !== null\n          || this.changePassword.new !== ''\n          || this.changePassword.new_confirmation !== null\n          || this.changePassword.new_confirmation !== ''\n      );\n\n      // If user is updating password, check if user left any password inputs null or empty string\n      if (isUpdatingPassword) {\n        if (!this.changePassword.old) this.errors.push('Please enter current password.')\n        if (!this.changePassword.new) this.errors.push('Please enter new password.')\n        if (!this.changePassword.new_confirmation) this.errors.push('Please confirm new password.')\n      }\n    },\n\n    submit() {\n\n      this.resetSuccessErrorBar();\n      this.validateForm();\n\n      let payload = {\n        old_password: this.changePassword.old,\n        password: this.changePassword.new,\n        password_confirmation: this.changePassword.new_confirmation,\n      }\n\n      if (this.validForm && !this.isSubmitting) {\n\n        this.states.isSubmitting = true;\n\n        AuthenticationRepository.updateUserDetails(payload)\n            .then(response => {\n\n              this.states.isSubmitting = false;\n\n              if (response.data.success) {\n                this.success = response.data.message;\n              } else {\n                this.errors.push(response.data.data.error)\n              }\n            })\n            .catch(error => {\n              this.states.isSubmitting = false;\n            })\n      }\n\n    },\n    resetSuccessErrorBar() {\n      this.success = null;\n      this.errors = [];\n    },\n\n    resetInputs() {\n      this.changePassword.old = null;\n      this.changePassword.new = null;\n      this.changePassword.new_confirmation = null;\n    }\n\n  },\n  components: {NavBack, PageHeaderThree, SectionTitle, PageTitle, DashboardLayout}\n}\n</script>\n\n<style scoped>\n\n</style>\n"]}]}