{"ast":null,"code":"import { resolveComponent as _resolveComponent, createVNode as _createVNode, createElementVNode as _createElementVNode, withCtx as _withCtx, createCommentVNode as _createCommentVNode, toDisplayString as _toDisplayString, openBlock as _openBlock, createElementBlock as _createElementBlock, renderList as _renderList, Fragment as _Fragment, vModelText as _vModelText, withDirectives as _withDirectives, createBlock as _createBlock } from \"vue\";\nconst _hoisted_1 = /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"truncate\"\n}, \" Edit Profile \", -1 /* HOISTED */);\nconst _hoisted_2 = {\n  class: \"absolute h-full w-full my-auto flex flex-col px-4 mt-20\"\n};\nconst _hoisted_3 = {\n  class: \"px-3 w-full md:max-w-xl lg:max-w-2xl mx-auto mt-5\"\n};\nconst _hoisted_4 = {\n  key: 0,\n  class: \"bg-green-300 mb-4 py-3 mb-2 px-4 text-left text-purple-primary text-xs rounded-lg\"\n};\nconst _hoisted_5 = {\n  key: 1,\n  class: \"bg-red-500 mb-4 py-3 mb-2 px-4 text-left text-white text-xs rounded-lg\"\n};\nconst _hoisted_6 = {\n  class: \"w-full mt-5\"\n};\nconst _hoisted_7 = {\n  class: \"mb-8\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_nav_back = _resolveComponent(\"nav-back\");\n  const _component_page_header_three = _resolveComponent(\"page-header-three\");\n  const _component_section_title = _resolveComponent(\"section-title\");\n  const _component_dashboard_layout = _resolveComponent(\"dashboard-layout\");\n  return _openBlock(), _createBlock(_component_dashboard_layout, {\n    \"has-custom-bottom-bar\": true\n  }, {\n    pageHeader: _withCtx(() => [_createVNode(_component_page_header_three, null, {\n      leftAction: _withCtx(() => [_createVNode(_component_nav_back, {\n        to: $options.navBackRoute,\n        \"stroke-color\": \"bg-purple-primary\",\n        class: \"w-2/7\"\n      }, null, 8 /* PROPS */, [\"to\"])]),\n      \"mini-title\": _withCtx(() => [_hoisted_1]),\n      _: 1 /* STABLE */\n    })]),\n\n    content: _withCtx(() => [_createElementVNode(\"div\", _hoisted_2, [_createCommentVNode(\" FORM INPUTS \"), _createElementVNode(\"div\", _hoisted_3, [$data.success ? (_openBlock(), _createElementBlock(\"div\", _hoisted_4, _toDisplayString($data.success), 1 /* TEXT */)) : _createCommentVNode(\"v-if\", true), _createCommentVNode(\" ERROR BAR \"), $data.errors.length ? (_openBlock(), _createElementBlock(\"div\", _hoisted_5, [_createElementVNode(\"ul\", null, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.errors, error => {\n      return _openBlock(), _createElementBlock(\"li\", null, _toDisplayString(error), 1 /* TEXT */);\n    }), 256 /* UNKEYED_FRAGMENT */))])])) : _createCommentVNode(\"v-if\", true), _createElementVNode(\"div\", _hoisted_6, [_createVNode(_component_section_title, {\n      class: \"text-left my-4\",\n      title: \"Change Password\"\n    }), _createElementVNode(\"div\", _hoisted_7, [_withDirectives(_createElementVNode(\"input\", {\n      \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $data.changePassword.old = $event),\n      type: \"password\",\n      onClick: _cache[1] || (_cache[1] = (...args) => $options.resetSuccessErrorBar && $options.resetSuccessErrorBar(...args)),\n      placeholder: \"Current Password\",\n      class: \"appearance-none border rounded border-none w-full py-2 pl-5 pr-2 md:h-20 md:text-xl mt-3 bg-gray-secondary text-gray-700 font-normal leading-tight focus:outline-none focus:shadow-outline placeholder-purple-secondary h-14\"\n    }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.changePassword.old]]), _withDirectives(_createElementVNode(\"input\", {\n      \"onUpdate:modelValue\": _cache[2] || (_cache[2] = $event => $data.changePassword.new = $event),\n      type: \"password\",\n      onClick: _cache[3] || (_cache[3] = (...args) => $options.resetSuccessErrorBar && $options.resetSuccessErrorBar(...args)),\n      placeholder: \"New Password\",\n      class: \"appearance-none border rounded border-none w-full py-2 pl-5 pr-2 md:h-20 md:text-xl mt-3 bg-gray-secondary text-gray-700 font-normal leading-tight focus:outline-none focus:shadow-outline placeholder-purple-secondary h-14\"\n    }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.changePassword.new]]), _withDirectives(_createElementVNode(\"input\", {\n      \"onUpdate:modelValue\": _cache[4] || (_cache[4] = $event => $data.changePassword.new_confirmation = $event),\n      type: \"password\",\n      onClick: _cache[5] || (_cache[5] = (...args) => $options.resetSuccessErrorBar && $options.resetSuccessErrorBar(...args)),\n      placeholder: \"Confirm New Password\",\n      class: \"appearance-none border rounded border-none w-full py-2 pl-5 pr-2 md:h-20 md:text-xl mt-3 bg-gray-secondary text-gray-700 font-normal leading-tight focus:outline-none focus:shadow-outline placeholder-purple-secondary h-14\"\n    }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.changePassword.new_confirmation]])])])])])]),\n    bottomBar: _withCtx(() => [_createElementVNode(\"button\", {\n      onClick: _cache[6] || (_cache[6] = (...args) => $options.submit && $options.submit(...args)),\n      class: \"w-full font-bold focus:outline-none rounded-full text-purple-primary text-sm bg-white border-2 border-purple-primary py-3 px-1 flex flex-row justify-center\"\n    }, \" Submit \")]),\n    _: 1 /* STABLE */\n  });\n}","map":{"version":3,"names":["_createElementVNode","class","_createBlock","_component_dashboard_layout","pageHeader","_withCtx","_createVNode","_component_page_header_three","leftAction","_component_nav_back","to","$options","navBackRoute","_hoisted_1","content","_hoisted_2","_createCommentVNode","_hoisted_3","$data","success","_createElementBlock","_hoisted_4","_toDisplayString","errors","length","_hoisted_5","_Fragment","_renderList","error","_hoisted_6","_component_section_title","title","_hoisted_7","changePassword","old","$event","type","onClick","_cache","args","resetSuccessErrorBar","placeholder","new","new_confirmation","bottomBar","submit"],"sources":["/Users/erwinkarim/Websites/Snapped/snapped-mobile-master/src/views/auth/Edit.vue"],"sourcesContent":["<template>\n  <dashboard-layout\n      :has-custom-bottom-bar=\"true\"\n  >\n\n    <template v-slot:pageHeader>\n\n      <page-header-three>\n        <template v-slot:leftAction>\n          <nav-back :to=\"navBackRoute\"\n                    stroke-color=\"bg-purple-primary\"\n                    class=\"w-2/7\"\n          />\n        </template>\n        <template v-slot:mini-title>\n          <div class=\"truncate\">\n            Edit Profile\n          </div>\n        </template>\n      </page-header-three>\n    </template>\n\n    <template v-slot:content>\n      <div class=\"absolute h-full w-full my-auto flex flex-col px-4 mt-20\">\n\n        <!-- FORM INPUTS -->\n        <div class=\"px-3 w-full md:max-w-xl lg:max-w-2xl mx-auto mt-5\">\n\n          <div v-if=\"success\"\n              class=\"bg-green-300 mb-4 py-3 mb-2 px-4 text-left text-purple-primary text-xs rounded-lg\"\n          >\n             {{success}}\n          </div>\n          <!-- ERROR BAR -->\n          <div v-if=\"errors.length\"\n               class=\"bg-red-500 mb-4 py-3 mb-2 px-4 text-left text-white text-xs rounded-lg\"\n          >\n            <ul>\n              <li v-for=\"error in errors\">{{ error }}</li>\n            </ul>\n          </div>\n\n          <div class=\"w-full mt-5\">\n            <section-title class=\"text-left my-4\" title=\"Change Password\"/>\n            <div class=\"mb-8\">\n              <input v-model=\"changePassword.old\"\n                     type=\"password\"\n                     @click=\"resetSuccessErrorBar\"\n                     placeholder=\"Current Password\"\n                     class=\"appearance-none border rounded border-none w-full py-2 pl-5 pr-2 md:h-20 md:text-xl mt-3 bg-gray-secondary text-gray-700 font-normal leading-tight focus:outline-none focus:shadow-outline placeholder-purple-secondary h-14\"\n              >\n              <input v-model=\"changePassword.new\"\n                     type=\"password\"\n                     @click=\"resetSuccessErrorBar\"\n                     placeholder=\"New Password\"\n                     class=\"appearance-none border rounded border-none w-full py-2 pl-5 pr-2 md:h-20 md:text-xl mt-3 bg-gray-secondary text-gray-700 font-normal leading-tight focus:outline-none focus:shadow-outline placeholder-purple-secondary h-14\"\n              >\n              <input v-model=\"changePassword.new_confirmation\"\n                     type=\"password\"\n                     @click=\"resetSuccessErrorBar\"\n                     placeholder=\"Confirm New Password\"\n                     class=\"appearance-none border rounded border-none w-full py-2 pl-5 pr-2 md:h-20 md:text-xl mt-3 bg-gray-secondary text-gray-700 font-normal leading-tight focus:outline-none focus:shadow-outline placeholder-purple-secondary h-14\"\n              >\n            </div>\n          </div>\n\n        </div>\n\n      </div>\n    </template>\n\n    <template v-slot:bottomBar>\n      <button @click=\"submit\"\n              class=\"w-full font-bold focus:outline-none rounded-full text-purple-primary text-sm bg-white border-2 border-purple-primary py-3 px-1 flex flex-row justify-center\">\n        Submit\n      </button>\n    </template>\n  </dashboard-layout>\n</template>\n\n<script>\nimport DashboardLayout from \"@/views/layout/DashboardLayout\";\nimport PageTitle from \"@/components/PageTitle\";\nimport SectionTitle from \"@/components/SectionTitle\";\nimport AuthenticationRepository from \"@/repositories/AuthenticationRepository\";\nimport PageHeaderThree from \"@/components/PageHeaderThree\";\nimport NavBack from \"@/components/NavBack\";\n\nexport default {\n  name: \"Edit\",\n  data() {\n    return {\n      form: {},\n\n      states: {\n        isSubmitting: false,\n      },\n\n      changePassword: {\n        old: null,\n        new: null,\n        new_confirmation: null\n      },\n      success: null,\n      errors: []\n    }\n  },\n\n  computed: {\n    validForm() {\n      return this.errors.length === 0;\n    },\n    navBackRoute() {\n      let routeName = '';\n\n      if(this.$store.getters.getAuthUserRole === 'Teacher'){\n        routeName = 'teacher.settings'\n      }\n\n      if(this.$store.getters.getAuthUserRole === 'Student'){\n        routeName = 'student.settings'\n      }\n    }\n  },\n\n  methods: {\n\n    validateForm() {\n\n      // determine if user is updating password\n      let isUpdatingPassword = (\n          this.changePassword.old !== null\n          || this.changePassword.new !== ''\n          || this.changePassword.new !== null\n          || this.changePassword.new !== ''\n          || this.changePassword.new_confirmation !== null\n          || this.changePassword.new_confirmation !== ''\n      );\n\n      // If user is updating password, check if user left any password inputs null or empty string\n      if (isUpdatingPassword) {\n        if (!this.changePassword.old) this.errors.push('Please enter current password.')\n        if (!this.changePassword.new) this.errors.push('Please enter new password.')\n        if (!this.changePassword.new_confirmation) this.errors.push('Please confirm new password.')\n      }\n    },\n\n    submit() {\n\n      this.resetSuccessErrorBar();\n      this.validateForm();\n\n      let payload = {\n        old_password: this.changePassword.old,\n        password: this.changePassword.new,\n        password_confirmation: this.changePassword.new_confirmation,\n      }\n\n      if (this.validForm && !this.isSubmitting) {\n\n        this.states.isSubmitting = true;\n\n        AuthenticationRepository.updateUserDetails(payload)\n            .then(response => {\n\n              this.states.isSubmitting = false;\n\n              if (response.data.success) {\n                this.success = response.data.message;\n              } else {\n                this.errors.push(response.data.data.error)\n              }\n            })\n            .catch(error => {\n              this.states.isSubmitting = false;\n            })\n      }\n\n    },\n    resetSuccessErrorBar() {\n      this.success = null;\n      this.errors = [];\n    },\n\n    resetInputs() {\n      this.changePassword.old = null;\n      this.changePassword.new = null;\n      this.changePassword.new_confirmation = null;\n    }\n\n  },\n  components: {NavBack, PageHeaderThree, SectionTitle, PageTitle, DashboardLayout}\n}\n</script>\n\n<style scoped>\n\n</style>\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}