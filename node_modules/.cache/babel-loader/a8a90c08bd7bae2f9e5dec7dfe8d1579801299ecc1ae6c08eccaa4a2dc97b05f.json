{"ast":null,"code":"import { toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = {\n  class: \"mx-auto h-screen flex flex-col justify-center items-center\"\n};\nconst _hoisted_2 = {\n  class: \"font-bold my-3 text-xl\"\n};\nconst _hoisted_3 = {\n  class: \"text-sm\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, _toDisplayString($data.title), 1 /* TEXT */), _createElementVNode(\"div\", _hoisted_3, _toDisplayString($data.message), 1 /* TEXT */)]);\n}","map":{"version":3,"names":["class","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_toDisplayString","$data","title","_hoisted_3","message"],"sources":["/Users/erwinkarim/Websites/Snapped/snapped-mobile-master/src/views/integrations/googleAuthCallback.vue"],"sourcesContent":["<template>\n  <div class=\"mx-auto h-screen flex flex-col justify-center items-center\">\n    <div class=\"font-bold my-3 text-xl\">\n      {{ title }}\n    </div>\n    <div class=\"text-sm\">\n      {{ message }}\n    </div>\n  </div>\n</template>\n\n<script>\nimport GoogleClassroomRepository from \"@/repositories/GoogleClassroomRepository\";\n\nexport default {\n  name: \"googleAuthCallback\",\n  data() {\n    return {\n\n      // State\n      isAuthenticating: true,\n      isAuthenticated: false,\n\n      title: 'Authenticating...',\n      message: \"Please wait. Thank you.\",\n    }\n  },\n  methods: {\n    googleClassroomCallback() {\n\n      let payload = {\n        code: this.$route.query.code,\n        // token: this.$store.getters.getToken\n      }\n\n      GoogleClassroomRepository.integrationCallback(payload)\n          .then(response => {\n\n            if (response.data.success) {\n\n              // Give time to update user details at backend\n              setTimeout(() => {\n                this.isAuthenticating = false;\n\n                this.title = 'Success!'\n                this.message = response.data.message\n\n                // Send post message to parent. To get updated user details\n                window.opener.postMessage({success: true})\n\n                // Close the window\n                setTimeout(() => {\n                  window.close();\n                }, 1500)\n              }, 1500)\n\n\n            } else {\n\n              this.title = 'Oops!'\n              this.message = response.data.message\n\n              setTimeout(() => {\n                window.close();\n              }, 1500)\n            }\n          })\n          .catch((error) => {\n\n            this.isAuthenticating = false;\n\n            this.title = 'Oops!'\n            this.message = error;\n          });\n    },\n  },\n  mounted() {\n    window.addEventListener('message', this.handleMessage)\n  },\n  created() {\n    this.googleClassroomCallback();\n  }\n}\n</script>\n\n<style scoped>\n\n</style>\n"],"mappings":";;EACOA,KAAK,EAAC;AAA4D;;EAChEA,KAAK,EAAC;AAAwB;;EAG9BA,KAAK,EAAC;AAAS;;uBAJtBC,mBAAA,CAOM,OAPNC,UAOM,GANJC,mBAAA,CAEM,OAFNC,UAEM,EAAAC,gBAAA,CADDC,KAAA,CAAAC,KAAK,kBAEVJ,mBAAA,CAEM,OAFNK,UAEM,EAAAH,gBAAA,CADDC,KAAA,CAAAG,OAAO,iB"},"metadata":{},"sourceType":"module","externalDependencies":[]}