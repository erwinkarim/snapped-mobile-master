{"remainingRequest":"/Users/erwinkarim/Websites/Snapped/snapped-mobile-master/node_modules/thread-loader/dist/cjs.js!/Users/erwinkarim/Websites/Snapped/snapped-mobile-master/node_modules/babel-loader/lib/index.js!/Users/erwinkarim/Websites/Snapped/snapped-mobile-master/src/repositories/SubmissionRepository.js","dependencies":[{"path":"/Users/erwinkarim/Websites/Snapped/snapped-mobile-master/src/repositories/SubmissionRepository.js","mtime":1679379067241},{"path":"/Users/erwinkarim/Websites/Snapped/snapped-mobile-master/babel.config.js","mtime":1679379067182},{"path":"/Users/erwinkarim/Websites/Snapped/snapped-mobile-master/node_modules/cache-loader/dist/cjs.js","mtime":1680070113546},{"path":"/Users/erwinkarim/Websites/Snapped/snapped-mobile-master/node_modules/thread-loader/dist/cjs.js","mtime":1680070298752},{"path":"/Users/erwinkarim/Websites/Snapped/snapped-mobile-master/node_modules/babel-loader/lib/index.js","mtime":1680059914906}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IFJlcG9zaXRvcnkgZnJvbSAiQC9yZXBvc2l0b3JpZXMvUmVwb3NpdG9yeSI7CmNvbnN0IHJlc291cmNlID0gJy9zdWJtaXNzaW9ucyc7CmV4cG9ydCBkZWZhdWx0IHsKICBmaW5kKHN1Ym1pc3Npb25JRCkgewogICAgcmV0dXJuIFJlcG9zaXRvcnkuZ2V0KGAke3Jlc291cmNlfS8ke3N1Ym1pc3Npb25JRH0vZGV0YWlsc2ApOwogIH0sCiAgc3RvcmUoewogICAgYXNzaWdubWVudElEOiBhc3NpZ25tZW50SUQsCiAgICBhbnN3ZXJUeXBlOiBhbnN3ZXJUeXBlLAogICAgYW5zd2VyQ29udGVudDogYW5zd2VyQ29udGVudCwKICAgIHJlbWFya3M6IHJlbWFya3MKICB9KSB7CiAgICBsZXQgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoKTsKICAgIGZvcm1EYXRhLmFwcGVuZCgnYXNzaWdubWVudF9pZCcsIGFzc2lnbm1lbnRJRCk7CiAgICBmb3JtRGF0YS5hcHBlbmQoJ3JlbWFya3MnLCByZW1hcmtzKTsKICAgIGlmIChhbnN3ZXJUeXBlID09PSAnd3JpdHRlbicpIHsKICAgICAgZm9ybURhdGEuYXBwZW5kKCd3cml0dGVuX2Fuc3dlcicsIGFuc3dlckNvbnRlbnQpOwogICAgfQogICAgaWYgKGFuc3dlclR5cGUgPT09ICdzbmFwcGVkJykgewogICAgICBhbnN3ZXJDb250ZW50LmZvckVhY2goZnVuY3Rpb24gKGZpbGUsIGluZGV4KSB7CiAgICAgICAgZm9ybURhdGEuYXBwZW5kKGBzbmFwX2Fuc3dlclske2luZGV4fV1gLCBmaWxlKTsKICAgICAgfSk7CiAgICB9CiAgICByZXR1cm4gUmVwb3NpdG9yeS5wb3N0KGAke3Jlc291cmNlfS9zdG9yZWAsIGZvcm1EYXRhLCB7CiAgICAgIGhlYWRlcnM6IHsKICAgICAgICAnQ29udGVudC1UeXBlJzogJ211bHRpcGFydC9mb3JtLWRhdGEnCiAgICAgIH0KICAgIH0pOwogIH0sCiAgdXBkYXRlKHsKICAgIHN1Ym1pc3Npb25JRDogc3VibWlzc2lvbklELAogICAgYXNzaWdubWVudElEOiBhc3NpZ25tZW50SUQsCiAgICBhbnN3ZXJUeXBlOiBhbnN3ZXJUeXBlLAogICAgYW5zd2VyQ29udGVudDogYW5zd2VyQ29udGVudCwKICAgIHJlbWFya3M6IHJlbWFya3MKICB9KSB7CiAgICBsZXQgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoKTsKICAgIGZvcm1EYXRhLmFwcGVuZCgnYXNzaWdubWVudF9pZCcsIGFzc2lnbm1lbnRJRCk7CiAgICBmb3JtRGF0YS5hcHBlbmQoJ3JlbWFya3MnLCByZW1hcmtzKTsKICAgIGlmIChhbnN3ZXJUeXBlID09PSAnd3JpdHRlbicpIHsKICAgICAgZm9ybURhdGEuYXBwZW5kKCd3cml0dGVuX2Fuc3dlcicsIGFuc3dlckNvbnRlbnQpOwogICAgfQogICAgaWYgKGFuc3dlclR5cGUgPT09ICdzbmFwcGVkJykgewogICAgICAvLyBQcm9jZXNzIHRvUmVtb3ZlIFNuYXBwZWQgQW5zd2VycwogICAgICBmb3JtRGF0YS5hcHBlbmQoJ3RvX3JlbW92ZScsIGFuc3dlckNvbnRlbnQudG9SZW1vdmUuam9pbigpKTsKICAgICAgYW5zd2VyQ29udGVudC50b0FkZC5mb3JFYWNoKGZ1bmN0aW9uIChmaWxlLCBpbmRleCkgewogICAgICAgIGZvcm1EYXRhLmFwcGVuZChgc25hcF9hbnN3ZXJbJHtpbmRleH1dYCwgZmlsZSk7CiAgICAgIH0pOwogICAgfQogICAgcmV0dXJuIFJlcG9zaXRvcnkucG9zdChgJHtyZXNvdXJjZX0vJHtzdWJtaXNzaW9uSUR9L3VwZGF0ZWAsIGZvcm1EYXRhLCB7CiAgICAgIGhlYWRlcnM6IHsKICAgICAgICAnQ29udGVudC1UeXBlJzogJ211bHRpcGFydC9mb3JtLWRhdGEnCiAgICAgIH0KICAgIH0pOwogIH0sCiAgY29udmVydFRvRGF0YVVSTChwYXRoKSB7CiAgICByZXR1cm4gUmVwb3NpdG9yeS5wb3N0KGAvZGF0YS11cmxgLCB7CiAgICAgIGltYWdlX3BhdGg6IHBhdGgKICAgIH0pOwogIH0KfTs="},{"version":3,"names":["Repository","resource","find","submissionID","get","store","assignmentID","answerType","answerContent","remarks","formData","FormData","append","forEach","file","index","post","headers","update","toRemove","join","toAdd","convertToDataURL","path","image_path"],"sources":["/Users/erwinkarim/Websites/Snapped/snapped-mobile-master/src/repositories/SubmissionRepository.js"],"sourcesContent":["import Repository from \"@/repositories/Repository\";\n\nconst resource = '/submissions'\n\nexport default {\n\n    find(submissionID) {\n        return Repository.get(`${resource}/${submissionID}/details`)\n    },\n\n    store({assignmentID: assignmentID, answerType: answerType, answerContent: answerContent, remarks: remarks}) {\n\n        let formData = new FormData()\n\n        formData.append('assignment_id', assignmentID)\n        formData.append('remarks', remarks)\n\n        if (answerType === 'written') {\n            formData.append('written_answer', answerContent)\n        }\n        if (answerType === 'snapped') {\n            answerContent.forEach(function (file, index) {\n                formData.append(`snap_answer[${index}]`, file);\n            });\n        }\n\n        return Repository.post(`${resource}/store`,\n            formData,\n            {\n                headers: {\n                    'Content-Type': 'multipart/form-data'\n                }\n            });\n    },\n\n    update({\n               submissionID: submissionID,\n               assignmentID: assignmentID,\n               answerType: answerType,\n               answerContent: answerContent,\n               remarks: remarks\n           }) {\n\n        let formData = new FormData()\n\n        formData.append('assignment_id', assignmentID)\n        formData.append('remarks', remarks)\n\n        if (answerType === 'written') {\n            formData.append('written_answer', answerContent)\n        }\n        if (answerType === 'snapped') {\n\n            // Process toRemove Snapped Answers\n            formData.append('to_remove', answerContent.toRemove.join())\n\n            answerContent.toAdd.forEach(function (file, index) {\n                formData.append(`snap_answer[${index}]`, file);\n            });\n        }\n\n        return Repository.post(`${resource}/${submissionID}/update`,\n            formData,\n            {\n                headers: {\n                    'Content-Type': 'multipart/form-data'\n                }\n            });\n    },\n\n    convertToDataURL(path) {\n        return Repository.post(\n            `/data-url`, {\n                image_path: path\n            }\n        );\n    }\n}\n"],"mappings":"AAAA,OAAOA,UAAU,MAAM,2BAA2B;AAElD,MAAMC,QAAQ,GAAG,cAAc;AAE/B,eAAe;EAEXC,IAAIA,CAACC,YAAY,EAAE;IACf,OAAOH,UAAU,CAACI,GAAG,CAAE,GAAEH,QAAS,IAAGE,YAAa,UAAS,CAAC;EAChE,CAAC;EAEDE,KAAKA,CAAC;IAACC,YAAY,EAAEA,YAAY;IAAEC,UAAU,EAAEA,UAAU;IAAEC,aAAa,EAAEA,aAAa;IAAEC,OAAO,EAAEA;EAAO,CAAC,EAAE;IAExG,IAAIC,QAAQ,GAAG,IAAIC,QAAQ,EAAE;IAE7BD,QAAQ,CAACE,MAAM,CAAC,eAAe,EAAEN,YAAY,CAAC;IAC9CI,QAAQ,CAACE,MAAM,CAAC,SAAS,EAAEH,OAAO,CAAC;IAEnC,IAAIF,UAAU,KAAK,SAAS,EAAE;MAC1BG,QAAQ,CAACE,MAAM,CAAC,gBAAgB,EAAEJ,aAAa,CAAC;IACpD;IACA,IAAID,UAAU,KAAK,SAAS,EAAE;MAC1BC,aAAa,CAACK,OAAO,CAAC,UAAUC,IAAI,EAAEC,KAAK,EAAE;QACzCL,QAAQ,CAACE,MAAM,CAAE,eAAcG,KAAM,GAAE,EAAED,IAAI,CAAC;MAClD,CAAC,CAAC;IACN;IAEA,OAAOd,UAAU,CAACgB,IAAI,CAAE,GAAEf,QAAS,QAAO,EACtCS,QAAQ,EACR;MACIO,OAAO,EAAE;QACL,cAAc,EAAE;MACpB;IACJ,CAAC,CAAC;EACV,CAAC;EAEDC,MAAMA,CAAC;IACIf,YAAY,EAAEA,YAAY;IAC1BG,YAAY,EAAEA,YAAY;IAC1BC,UAAU,EAAEA,UAAU;IACtBC,aAAa,EAAEA,aAAa;IAC5BC,OAAO,EAAEA;EACb,CAAC,EAAE;IAEN,IAAIC,QAAQ,GAAG,IAAIC,QAAQ,EAAE;IAE7BD,QAAQ,CAACE,MAAM,CAAC,eAAe,EAAEN,YAAY,CAAC;IAC9CI,QAAQ,CAACE,MAAM,CAAC,SAAS,EAAEH,OAAO,CAAC;IAEnC,IAAIF,UAAU,KAAK,SAAS,EAAE;MAC1BG,QAAQ,CAACE,MAAM,CAAC,gBAAgB,EAAEJ,aAAa,CAAC;IACpD;IACA,IAAID,UAAU,KAAK,SAAS,EAAE;MAE1B;MACAG,QAAQ,CAACE,MAAM,CAAC,WAAW,EAAEJ,aAAa,CAACW,QAAQ,CAACC,IAAI,EAAE,CAAC;MAE3DZ,aAAa,CAACa,KAAK,CAACR,OAAO,CAAC,UAAUC,IAAI,EAAEC,KAAK,EAAE;QAC/CL,QAAQ,CAACE,MAAM,CAAE,eAAcG,KAAM,GAAE,EAAED,IAAI,CAAC;MAClD,CAAC,CAAC;IACN;IAEA,OAAOd,UAAU,CAACgB,IAAI,CAAE,GAAEf,QAAS,IAAGE,YAAa,SAAQ,EACvDO,QAAQ,EACR;MACIO,OAAO,EAAE;QACL,cAAc,EAAE;MACpB;IACJ,CAAC,CAAC;EACV,CAAC;EAEDK,gBAAgBA,CAACC,IAAI,EAAE;IACnB,OAAOvB,UAAU,CAACgB,IAAI,CACjB,WAAU,EAAE;MACTQ,UAAU,EAAED;IAChB,CAAC,CACJ;EACL;AACJ,CAAC"}]}