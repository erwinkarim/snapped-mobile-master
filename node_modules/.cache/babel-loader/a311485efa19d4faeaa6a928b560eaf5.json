{"remainingRequest":"/Users/erwinkarim/Websites/Snapped/snapped-mobile-master/node_modules/babel-loader/lib/index.js!/Users/erwinkarim/Websites/Snapped/snapped-mobile-master/src/router/index.js","dependencies":[{"path":"/Users/erwinkarim/Websites/Snapped/snapped-mobile-master/src/router/index.js","mtime":1679379067242},{"path":"/Users/erwinkarim/Websites/Snapped/snapped-mobile-master/babel.config.js","mtime":1679379067182},{"path":"/Users/erwinkarim/Websites/Snapped/snapped-mobile-master/node_modules/cache-loader/dist/cjs.js","mtime":1680070113546},{"path":"/Users/erwinkarim/Websites/Snapped/snapped-mobile-master/node_modules/babel-loader/lib/index.js","mtime":1680059914906}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IFZ1ZSBmcm9tICd2dWUnOwppbXBvcnQgVnVlUm91dGVyIGZyb20gJ3Z1ZS1yb3V0ZXInOwppbXBvcnQgcm91dGVzIGZyb20gIkAvcm91dGVyL3JvdXRlcyI7CmltcG9ydCBzdG9yZSBmcm9tICdAL3N0b3JlL2luZGV4JzsKVnVlLnVzZShWdWVSb3V0ZXIpOwpjb25zdCByb3V0ZXIgPSBuZXcgVnVlUm91dGVyKHsKICBtb2RlOiAnaGlzdG9yeScsCiAgYmFzZTogcHJvY2Vzcy5lbnYuQkFTRV9VUkwsCiAgcm91dGVzCn0pOwpleHBvcnQgZGVmYXVsdCByb3V0ZXI7CnJvdXRlci5iZWZvcmVFYWNoKCh0bywgZnJvbSwgbmV4dCkgPT4gewogIC8vIENoZWNrIGlmIHJvdXRlIGRvZXMgbm90IGV4aXN0LiBJZiB0cnVlLCByZWRpcmVjdCB0byBsb2dpbgogIGlmICh0by5tYXRjaGVkLmxlbmd0aCA9PT0gMCAmJiB0by5wYXRoICE9PSAnLycpIHsKICAgIHJldHVybiBuZXh0KHsKICAgICAgbmFtZTogJ2xvZ2luJwogICAgfSk7CiAgfQoKICAvLyBXaGVuIGVudGVyaW5nIHJvb3QgcGF0aCAnLycKICBpZiAodG8ucGF0aCA9PT0gZnJvbS5wYXRoKSB7CiAgICBpZiAobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3Rva2VuJykpIHsKICAgICAgc3RvcmUuY29tbWl0KCdhdXRoX3N1Y2Nlc3MnLCBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndG9rZW4nKSk7CiAgICAgIHN0b3JlLmRpc3BhdGNoKCdzZXRBdXRoVXNlcicpLnRoZW4odXNlclJvbGUgPT4gewogICAgICAgIGlmICh1c2VyUm9sZSA9PT0gJ1N0dWRlbnQnKSB7CiAgICAgICAgICByZXR1cm4gbmV4dCh7CiAgICAgICAgICAgIG5hbWU6ICdzdHVkZW50LmhvbWUnCiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgICAgaWYgKHVzZXJSb2xlID09PSAnVGVhY2hlcicpIHsKICAgICAgICAgIHJldHVybiBuZXh0KHsKICAgICAgICAgICAgbmFtZTogJ3RlYWNoZXIuaG9tZScKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9IGVsc2UgewogICAgICByZXR1cm4gbmV4dCh7CiAgICAgICAgbmFtZTogJ2xvZ2luJwogICAgICB9KTsKICAgIH0KICB9CgogIC8vIElmIHBhdGggaXMgbG9naW4sIGNoZWNrIGlmIHVzZXIgaXMgbG9nZ2VkIGluLiBJZiB5ZXMsIHRoZW4gcmVkaXJlY3QgdG8gaG9tZQogIGlmICh0by5wYXRoID09PSAnL2xvZ2luJykgewogICAgaWYgKHN0b3JlLmdldHRlcnMuaXNMb2dnZWRJbikgewogICAgICAvLyBDaGVjayBpZiBhdXRoZW50aWNhdGVkIHVzZXIncyBkZXRhaWxzIGRvZXMgbm90IGV4aXN0LiBJZiBubywgZ2V0LgogICAgICBsZXQgYXV0aFVzZXJEZXRhaWxzID0gc3RvcmUuZ2V0dGVycy5nZXRBdXRoVXNlcjsKICAgICAgaWYgKE9iamVjdC5rZXlzKGF1dGhVc2VyRGV0YWlscykubGVuZ3RoID09PSAwICYmIGF1dGhVc2VyRGV0YWlscy5jb25zdHJ1Y3RvciA9PT0gT2JqZWN0KSB7CiAgICAgICAgc3RvcmUuZGlzcGF0Y2goJ3NldEF1dGhVc2VyJykudGhlbih1c2VyUm9sZSA9PiB7CiAgICAgICAgICBpZiAodXNlclJvbGUgPT09ICdTdHVkZW50JykgewogICAgICAgICAgICByZXR1cm4gbmV4dCh7CiAgICAgICAgICAgICAgbmFtZTogJ3N0dWRlbnQuaG9tZScKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgICBpZiAodXNlclJvbGUgPT09ICdUZWFjaGVyJykgewogICAgICAgICAgICByZXR1cm4gbmV4dCh7CiAgICAgICAgICAgICAgbmFtZTogJ3RlYWNoZXIuaG9tZScKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgaWYgKGF1dGhVc2VyRGV0YWlscy5yb2xlID09PSAnU3R1ZGVudCcpIHsKICAgICAgICAgIHJldHVybiBuZXh0KHsKICAgICAgICAgICAgbmFtZTogJ3N0dWRlbnQuaG9tZScKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgICBpZiAoYXV0aFVzZXJEZXRhaWxzLnJvbGUgPT09ICdUZWFjaGVyJykgewogICAgICAgICAgcmV0dXJuIG5leHQoewogICAgICAgICAgICBuYW1lOiAndGVhY2hlci5ob21lJwogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9CiAgICB9IGVsc2UgewogICAgICByZXR1cm4gbmV4dCgpOwogICAgfQogICAgcmV0dXJuIG5leHQoZmFsc2UpOwogIH0KCiAgLy8gSWYgcm91dGUgaGFzIGd1YXJkICdjaGVja0F1dGgnLgogIGlmICh0by5tYXRjaGVkLnNvbWUocmVjb3JkID0+IHJlY29yZC5tZXRhLmNoZWNrQXV0aCkpIHsKICAgIC8vIENoZWNrIGlmIHVzZXIgaXMgbG9nZ2VkIGluLgogICAgaWYgKHN0b3JlLmdldHRlcnMuaXNMb2dnZWRJbikgewogICAgICAvLyBDaGVjayBpZiBhdXRoZW50aWNhdGVkIHVzZXIncyBkZXRhaWxzIGRvZXMgbm90IGV4aXN0LiBJZiBubywgZ2V0LgogICAgICBsZXQgYXV0aFVzZXJEZXRhaWxzID0gc3RvcmUuZ2V0dGVycy5nZXRBdXRoVXNlcjsKICAgICAgaWYgKE9iamVjdC5rZXlzKGF1dGhVc2VyRGV0YWlscykubGVuZ3RoID09PSAwICYmIGF1dGhVc2VyRGV0YWlscy5jb25zdHJ1Y3RvciA9PT0gT2JqZWN0KSB7CiAgICAgICAgc3RvcmUuZGlzcGF0Y2goJ3NldEF1dGhVc2VyJykudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgICAvLyBJZiByb3V0ZSBoYXMgZ3VhcmQgJ2NoZWNrUm9sZScKICAgICAgICAgIGlmICh0by5tYXRjaGVkLnNvbWUocmVjb3JkID0+IHJlY29yZC5tZXRhLmNoZWNrUm9sZSkpIHsKICAgICAgICAgICAgaWYgKHN0b3JlLmdldHRlcnMuZ2V0QXV0aFVzZXJSb2xlID09PSB0by5tZXRhLmNoZWNrUm9sZSkgewogICAgICAgICAgICAgIHJldHVybiBuZXh0KCk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgcmV0dXJuIG5leHQoZmFsc2UpOwogICAgICAgICAgICB9CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAvLyBJZiBvbmx5IGNoZWNrIGF1dGggJiYgd2l0aG91dCBjaGVjayByb2xlCiAgICAgICAgICAgIHJldHVybiBuZXh0KCk7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgaWYgKHRvLm1hdGNoZWQuc29tZShyZWNvcmQgPT4gcmVjb3JkLm1ldGEuY2hlY2tSb2xlKSkgewogICAgICAgICAgaWYgKHN0b3JlLmdldHRlcnMuZ2V0QXV0aFVzZXJSb2xlID09PSB0by5tZXRhLmNoZWNrUm9sZSkgewogICAgICAgICAgICByZXR1cm4gbmV4dCgpOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgcmV0dXJuIG5leHQoZmFsc2UpOwogICAgICAgICAgfQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAvLyBJZiBvbmx5IGNoZWNrIGF1dGggJiYgd2l0aG91dCBjaGVjayByb2xlCiAgICAgICAgICByZXR1cm4gbmV4dCgpOwogICAgICAgIH0KICAgICAgfQogICAgfSBlbHNlIHsKICAgICAgcmV0dXJuIG5leHQoewogICAgICAgIG5hbWU6ICdsb2dpbicKICAgICAgfSk7CiAgICB9CiAgfQoKICAvLyBJZiByb3V0ZSBpcyBvcGVuIHRvIHB1YmxpYywgYWxsb3cgbmV4dAogIGVsc2UgewogICAgcmV0dXJuIG5leHQoKTsKICB9Cn0pOw=="},{"version":3,"names":["Vue","VueRouter","routes","store","use","router","mode","base","process","env","BASE_URL","beforeEach","to","from","next","matched","length","path","name","localStorage","getItem","commit","dispatch","then","userRole","getters","isLoggedIn","authUserDetails","getAuthUser","Object","keys","constructor","role","some","record","meta","checkAuth","response","checkRole","getAuthUserRole"],"sources":["/Users/erwinkarim/Websites/Snapped/snapped-mobile-master/src/router/index.js"],"sourcesContent":["import Vue from 'vue'\nimport VueRouter from 'vue-router'\n\nimport routes from \"@/router/routes\"\nimport store from '@/store/index'\n\nVue.use(VueRouter)\n\nconst router = new VueRouter({\n    mode: 'history',\n    base: process.env.BASE_URL,\n    routes\n})\n\nexport default router\n\n\nrouter.beforeEach((to, from, next) => {\n\n    // Check if route does not exist. If true, redirect to login\n    if (to.matched.length === 0 && to.path !== '/') {\n        return next({name: 'login'})\n    }\n\n    // When entering root path '/'\n    if (to.path === from.path) {\n\n        if (localStorage.getItem('token')) {\n\n            store.commit('auth_success', localStorage.getItem('token'))\n            store.dispatch('setAuthUser')\n                .then(userRole => {\n\n                        if (userRole === 'Student') {\n                            return next({name: 'student.home'})\n                        }\n\n                        if (userRole === 'Teacher') {\n                            return next({name: 'teacher.home'})\n                        }\n                    }\n                )\n\n        } else {\n            return next({name: 'login'})\n        }\n    }\n\n    // If path is login, check if user is logged in. If yes, then redirect to home\n    if (to.path === '/login') {\n\n        if (store.getters.isLoggedIn) {\n\n            // Check if authenticated user's details does not exist. If no, get.\n            let authUserDetails = store.getters.getAuthUser;\n\n            if (Object.keys(authUserDetails).length === 0 && authUserDetails.constructor === Object) {\n\n                store.dispatch('setAuthUser')\n                    .then(userRole => {\n\n                        if (userRole === 'Student') {\n                                return next({name: 'student.home'})\n                            }\n\n                            if (userRole === 'Teacher') {\n                                return next({name: 'teacher.home'})\n                            }\n                        }\n                    )\n            } else {\n\n                if (authUserDetails.role === 'Student') {\n                    return next({name: 'student.home'})\n                }\n\n                if (authUserDetails.role === 'Teacher') {\n                    return next({name: 'teacher.home'})\n                }\n            }\n        } else {\n            return next()\n        }\n\n        return next(false)\n    }\n\n    // If route has guard 'checkAuth'.\n    if (to.matched.some(record => record.meta.checkAuth)) {\n\n        // Check if user is logged in.\n        if (store.getters.isLoggedIn) {\n\n            // Check if authenticated user's details does not exist. If no, get.\n            let authUserDetails = store.getters.getAuthUser;\n\n            if (Object.keys(authUserDetails).length === 0 && authUserDetails.constructor === Object) {\n\n                store.dispatch('setAuthUser')\n                    .then(response => {\n\n                        // If route has guard 'checkRole'\n                        if (to.matched.some(record => record.meta.checkRole)) {\n                            if (store.getters.getAuthUserRole === to.meta.checkRole) {\n                                return next()\n                            } else {\n                                return next(false)\n                            }\n                        } else{\n                            // If only check auth && without check role\n                            return next()\n                        }\n                    })\n            } else {\n\n                if (to.matched.some(record => record.meta.checkRole)) {\n                    if (store.getters.getAuthUserRole === to.meta.checkRole) {\n                        return next()\n                    } else {\n                        return next(false)\n                    }\n                } else {\n\n                    // If only check auth && without check role\n                    return next()\n                }\n            }\n\n        } else {\n            return next({name: 'login'})\n        }\n\n    }\n\n    // If route is open to public, allow next\n    else {\n        return next()\n    }\n\n})\n"],"mappings":"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"}]}