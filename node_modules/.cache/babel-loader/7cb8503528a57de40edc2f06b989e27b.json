{"remainingRequest":"/Users/erwinkarim/Websites/Snapped/snapped-mobile-master/node_modules/thread-loader/dist/cjs.js!/Users/erwinkarim/Websites/Snapped/snapped-mobile-master/node_modules/babel-loader/lib/index.js!/Users/erwinkarim/Websites/Snapped/snapped-mobile-master/src/store/actions.js","dependencies":[{"path":"/Users/erwinkarim/Websites/Snapped/snapped-mobile-master/src/store/actions.js","mtime":1679379067242},{"path":"/Users/erwinkarim/Websites/Snapped/snapped-mobile-master/babel.config.js","mtime":1679379067182},{"path":"/Users/erwinkarim/Websites/Snapped/snapped-mobile-master/node_modules/cache-loader/dist/cjs.js","mtime":1680070113546},{"path":"/Users/erwinkarim/Websites/Snapped/snapped-mobile-master/node_modules/thread-loader/dist/cjs.js","mtime":1680070298752},{"path":"/Users/erwinkarim/Websites/Snapped/snapped-mobile-master/node_modules/babel-loader/lib/index.js","mtime":1680059914906}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IEF1dGhlbnRpY2F0aW9uUmVwb3NpdG9yeSBmcm9tICJAL3JlcG9zaXRvcmllcy9BdXRoZW50aWNhdGlvblJlcG9zaXRvcnkiOwppbXBvcnQgYXhpb3MgZnJvbSAiYXhpb3MiOwpleHBvcnQgZGVmYXVsdCB7CiAgbG9naW4oewogICAgY29tbWl0CiAgfSwgdXNlckNyZWRlbnRpYWxzKSB7CiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4gewogICAgICBBdXRoZW50aWNhdGlvblJlcG9zaXRvcnkubG9naW4odXNlckNyZWRlbnRpYWxzKS50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICBpZiAocmVzcG9uc2UuZGF0YS5zdWNjZXNzKSB7CiAgICAgICAgICBjb25zdCB0b2tlbiA9IHJlc3BvbnNlLmRhdGEudG9rZW47CiAgICAgICAgICBpZiAodG9rZW4pIHsKICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3Rva2VuJywgdG9rZW4pOwogICAgICAgICAgICBheGlvcy5kZWZhdWx0cy5oZWFkZXJzLmNvbW1vblsnQXV0aG9yaXphdGlvbiddID0gdG9rZW47CiAgICAgICAgICAgIGNvbW1pdCgnYXV0aF9zdWNjZXNzJywgdG9rZW4pOwogICAgICAgICAgICByZXNvbHZlKCk7CiAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGNvbW1pdCgnYXV0aF9lcnJvcicpOwogICAgICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ3Rva2VuJyk7CiAgICAgICAgICByZWplY3QocmVzcG9uc2UuZGF0YS5kYXRhLmVycm9yKTsKICAgICAgICB9CiAgICAgIH0pLmNhdGNoKGVycm9yID0+IHsKICAgICAgICBjb21taXQoJ2F1dGhfZXJyb3InKTsKICAgICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgndG9rZW4nKTsKICAgICAgICByZWplY3QoZXJyb3IucmVzcG9uc2UuZGF0YSk7CiAgICAgIH0pOwogICAgfSk7CiAgfSwKICBsb2dvdXQoewogICAgY29tbWl0CiAgfSkgewogICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHsKICAgICAgY29tbWl0KCdsb2dvdXQnKTsKICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ3Rva2VuJyk7CiAgICAgIGRlbGV0ZSBheGlvcy5kZWZhdWx0cy5oZWFkZXJzLmNvbW1vblsnQXV0aG9yaXphdGlvbiddOwogICAgICByZXNvbHZlKCk7CiAgICB9KTsKICB9LAogIHNldEF1dGhVc2VyKHsKICAgIGNvbW1pdAogIH0pIHsKICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7CiAgICAgIEF1dGhlbnRpY2F0aW9uUmVwb3NpdG9yeS5nZXRVc2VyRGV0YWlscygpLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgIGlmIChyZXNwb25zZS5kYXRhLnN1Y2Nlc3MpIHsKICAgICAgICAgIGxldCB1c2VyRGV0YWlscyA9IHJlc3BvbnNlLmRhdGEuZGF0YVswXTsKICAgICAgICAgIGNvbW1pdCgnc2V0X2F1dGhfdXNlcl9kZXRhaWxzJywgdXNlckRldGFpbHMpOwogICAgICAgICAgcmVzb2x2ZSh1c2VyRGV0YWlscy5yb2xlKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgY29tbWl0KCdhdXRoX2Vycm9yJyk7CiAgICAgICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgndG9rZW4nKTsKICAgICAgICAgIGRlbGV0ZSBheGlvcy5kZWZhdWx0cy5oZWFkZXJzLmNvbW1vblsnQXV0aG9yaXphdGlvbiddOwogICAgICAgICAgcmVqZWN0KHJlc3BvbnNlLmRhdGEuZGF0YS5lcnJvcik7CiAgICAgICAgfQogICAgICB9KS5jYXRjaChlcnIgPT4gewogICAgICAgIGNvbW1pdCgnYXV0aF9lcnJvcicpOwogICAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCd0b2tlbicpOwogICAgICAgIGRlbGV0ZSBheGlvcy5kZWZhdWx0cy5oZWFkZXJzLmNvbW1vblsnQXV0aG9yaXphdGlvbiddOwogICAgICAgIHJlamVjdChlcnIpOwogICAgICB9KTsKICAgIH0pOwogIH0KfTs="},{"version":3,"names":["AuthenticationRepository","axios","login","commit","userCredentials","Promise","resolve","reject","then","response","data","success","token","localStorage","setItem","defaults","headers","common","removeItem","error","catch","logout","setAuthUser","getUserDetails","userDetails","role","err"],"sources":["/Users/erwinkarim/Websites/Snapped/snapped-mobile-master/src/store/actions.js"],"sourcesContent":["import AuthenticationRepository from \"@/repositories/AuthenticationRepository\";\nimport axios from \"axios\";\n\nexport default {\n    login({commit}, userCredentials) {\n\n        return new Promise((resolve, reject) => {\n\n            AuthenticationRepository.login(userCredentials)\n                .then(response => {\n\n                    if (response.data.success) {\n\n                        const token = response.data.token\n\n                        if (token) {\n                            localStorage.setItem('token', token)\n                            axios.defaults.headers.common['Authorization'] = token\n                            commit('auth_success', token)\n                            resolve()\n                        }\n                    } else {\n                        commit('auth_error')\n                        localStorage.removeItem('token')\n                        reject(response.data.data.error)\n                    }\n\n                })\n                .catch(error => {\n                    commit('auth_error')\n                    localStorage.removeItem('token')\n                    reject(error.response.data)\n                })\n        })\n    },\n\n    logout({commit}) {\n        return new Promise((resolve, reject) => {\n            commit('logout')\n            localStorage.removeItem('token')\n            delete axios.defaults.headers.common['Authorization']\n            resolve()\n        })\n    },\n\n    setAuthUser({commit}) {\n\n        return new Promise((resolve, reject) => {\n\n            AuthenticationRepository.getUserDetails()\n                .then(response => {\n\n                    if (response.data.success) {\n                        let userDetails = response.data.data[0]\n\n                        commit('set_auth_user_details', userDetails)\n                        resolve(userDetails.role)\n                    } else {\n                        commit('auth_error')\n                        localStorage.removeItem('token')\n                        delete axios.defaults.headers.common['Authorization']\n                        reject(response.data.data.error)\n                    }\n\n                })\n                .catch(err => {\n                    commit('auth_error')\n                    localStorage.removeItem('token')\n                    delete axios.defaults.headers.common['Authorization']\n                    reject(err)\n                })\n        })\n    }\n}\n"],"mappings":"AAAA,OAAOA,wBAAwB,MAAM,yCAAyC;AAC9E,OAAOC,KAAK,MAAM,OAAO;AAEzB,eAAe;EACXC,KAAKA,CAAC;IAACC;EAAM,CAAC,EAAEC,eAAe,EAAE;IAE7B,OAAO,IAAIC,OAAO,CAAC,CAACC,OAAO,EAAEC,MAAM,KAAK;MAEpCP,wBAAwB,CAACE,KAAK,CAACE,eAAe,CAAC,CAC1CI,IAAI,CAACC,QAAQ,IAAI;QAEd,IAAIA,QAAQ,CAACC,IAAI,CAACC,OAAO,EAAE;UAEvB,MAAMC,KAAK,GAAGH,QAAQ,CAACC,IAAI,CAACE,KAAK;UAEjC,IAAIA,KAAK,EAAE;YACPC,YAAY,CAACC,OAAO,CAAC,OAAO,EAAEF,KAAK,CAAC;YACpCX,KAAK,CAACc,QAAQ,CAACC,OAAO,CAACC,MAAM,CAAC,eAAe,CAAC,GAAGL,KAAK;YACtDT,MAAM,CAAC,cAAc,EAAES,KAAK,CAAC;YAC7BN,OAAO,EAAE;UACb;QACJ,CAAC,MAAM;UACHH,MAAM,CAAC,YAAY,CAAC;UACpBU,YAAY,CAACK,UAAU,CAAC,OAAO,CAAC;UAChCX,MAAM,CAACE,QAAQ,CAACC,IAAI,CAACA,IAAI,CAACS,KAAK,CAAC;QACpC;MAEJ,CAAC,CAAC,CACDC,KAAK,CAACD,KAAK,IAAI;QACZhB,MAAM,CAAC,YAAY,CAAC;QACpBU,YAAY,CAACK,UAAU,CAAC,OAAO,CAAC;QAChCX,MAAM,CAACY,KAAK,CAACV,QAAQ,CAACC,IAAI,CAAC;MAC/B,CAAC,CAAC;IACV,CAAC,CAAC;EACN,CAAC;EAEDW,MAAMA,CAAC;IAAClB;EAAM,CAAC,EAAE;IACb,OAAO,IAAIE,OAAO,CAAC,CAACC,OAAO,EAAEC,MAAM,KAAK;MACpCJ,MAAM,CAAC,QAAQ,CAAC;MAChBU,YAAY,CAACK,UAAU,CAAC,OAAO,CAAC;MAChC,OAAOjB,KAAK,CAACc,QAAQ,CAACC,OAAO,CAACC,MAAM,CAAC,eAAe,CAAC;MACrDX,OAAO,EAAE;IACb,CAAC,CAAC;EACN,CAAC;EAEDgB,WAAWA,CAAC;IAACnB;EAAM,CAAC,EAAE;IAElB,OAAO,IAAIE,OAAO,CAAC,CAACC,OAAO,EAAEC,MAAM,KAAK;MAEpCP,wBAAwB,CAACuB,cAAc,EAAE,CACpCf,IAAI,CAACC,QAAQ,IAAI;QAEd,IAAIA,QAAQ,CAACC,IAAI,CAACC,OAAO,EAAE;UACvB,IAAIa,WAAW,GAAGf,QAAQ,CAACC,IAAI,CAACA,IAAI,CAAC,CAAC,CAAC;UAEvCP,MAAM,CAAC,uBAAuB,EAAEqB,WAAW,CAAC;UAC5ClB,OAAO,CAACkB,WAAW,CAACC,IAAI,CAAC;QAC7B,CAAC,MAAM;UACHtB,MAAM,CAAC,YAAY,CAAC;UACpBU,YAAY,CAACK,UAAU,CAAC,OAAO,CAAC;UAChC,OAAOjB,KAAK,CAACc,QAAQ,CAACC,OAAO,CAACC,MAAM,CAAC,eAAe,CAAC;UACrDV,MAAM,CAACE,QAAQ,CAACC,IAAI,CAACA,IAAI,CAACS,KAAK,CAAC;QACpC;MAEJ,CAAC,CAAC,CACDC,KAAK,CAACM,GAAG,IAAI;QACVvB,MAAM,CAAC,YAAY,CAAC;QACpBU,YAAY,CAACK,UAAU,CAAC,OAAO,CAAC;QAChC,OAAOjB,KAAK,CAACc,QAAQ,CAACC,OAAO,CAACC,MAAM,CAAC,eAAe,CAAC;QACrDV,MAAM,CAACmB,GAAG,CAAC;MACf,CAAC,CAAC;IACV,CAAC,CAAC;EACN;AACJ,CAAC"}]}