{"ast":null,"code":"import PageHeaderThree from \"@/components/PageHeaderThree\";\nimport NavBack from \"@/components/NavBack\";\nimport IconBaseTwo from \"@/components/IconBaseTwo\";\nimport ArrowBackIcon from \"@/components/icons/ArrowBackIcon\";\nimport ExpandImageIcon from \"@/components/icons/ExpandImageIcon\";\nimport BottomBar from \"@/views/teachers/TeacherAssignments/Mark/Components/BottomBar\";\nimport SubmissionRepository from \"@/repositories/SubmissionRepository\";\nimport Modal from \"@/components/Modal\";\nimport MarksRepository from \"@/repositories/teachers/MarksRepository\";\nimport router from \"@/router\";\nimport moment from \"moment\";\nimport UndoIcon from \"@/components/icons/UndoIcon\";\nimport PageHeader from \"@/views/teachers/TeacherAssignments/Mark/Components/PageHeader\";\nexport default {\n  name: \"Index\",\n  props: {\n    submissionID: [String, Number],\n    markID: [String, Number]\n  },\n  watch: {\n    '$route': 'handleRouteChange'\n  },\n  computed: {\n    containerClass: function () {\n      let value = 'bg-white mb-40 ';\n      if (this.$store.state.teacherMarking.states.isMarking) {\n        value = 'bg-black-primary';\n      }\n      return value;\n    }\n  },\n  methods: {\n    handleRouteChange() {\n      this.scrollToTop();\n      let path = this.$route.name;\n      if (path === 'teacher.assignments.marking.details' && !this.$store.state.teacherMarking.states.isPreviewing) {\n        this.$store.commit('teacherMarking/setMainMode');\n      }\n      if (path === 'teacher.assignments.marking.feedback') {\n        this.$store.commit('teacherMarking/setWritingFeedbackMode');\n      }\n    },\n    toggleStickerBar() {\n      this.$store.commit(\"teacherMarking/toggleStickerBar\");\n    },\n    toggleModalMode() {\n      this.$store.commit('teacherMarking/toggleModalMode');\n    },\n    scrollToTop() {\n      window.scroll({\n        top: 0,\n        left: 0,\n        behavior: 'smooth'\n      });\n    }\n  },\n  mounted() {\n    // this.$store.commit('teacherMarking/setInitialCanvasDimensions')\n    this.$store.commit('teacherMarking/setInitialCanvasDimensions', this.$refs.container.clientWidth, this.$refs.container.clientHeight);\n    this.$store.dispatch('teacherMarking/fetchData', this.submissionID).then(response => {\n      this.$store.dispatch(\"teacherMarking/bulkConvertSubmissionsToDataURL\");\n    });\n  },\n  destroyed() {\n    this.$store.commit('teacherMarking/resetState');\n  },\n  components: {\n    PageHeader,\n    UndoIcon,\n    Modal,\n    BottomBar,\n    ExpandImageIcon,\n    ArrowBackIcon,\n    IconBaseTwo,\n    NavBack,\n    PageHeaderThree\n  }\n};","map":{"version":3,"names":["PageHeaderThree","NavBack","IconBaseTwo","ArrowBackIcon","ExpandImageIcon","BottomBar","SubmissionRepository","Modal","MarksRepository","router","moment","UndoIcon","PageHeader","name","props","submissionID","String","Number","markID","watch","computed","containerClass","value","$store","state","teacherMarking","states","isMarking","methods","handleRouteChange","scrollToTop","path","$route","isPreviewing","commit","toggleStickerBar","toggleModalMode","window","scroll","top","left","behavior","mounted","$refs","container","clientWidth","clientHeight","dispatch","then","response","destroyed","components"],"sources":["/Users/erwinkarim/Websites/Snapped/snapped-mobile-master/src/views/teachers/TeacherAssignments/Mark/Index.vue"],"sourcesContent":["<template>\n  <div :class=\"containerClass\" ref=\"container\"\n       class=\"h-full md:max-w-xl mx-auto\"\n  >\n\n    <!---------------------\n            OVERLAYS\n     --------------------->\n    <div v-if=\"$store.state.teacherMarking.states.isShowingModal\" @click=\"toggleModalMode()\"\n         class=\"fixed w-full bg-black-primary bg-opacity-25 h-screen z-70 flex flex-col justify-center items-center inset-x-0 block top-0 \">\n    </div>\n    <div v-if=\"$store.state.teacherMarking.states.isSelectingSticker\" @click=\"toggleStickerBar\"\n         class=\"fixed w-full h-screen z-70 flex flex-col justify-center items-center inset-x-0 block top-0 \">\n    </div>\n\n\n    <!---------------------\n            MODAL\n     --------------------->\n    <div v-if=\"$store.state.teacherMarking.states.isShowingModal\"\n         class=\"fixed left-0 w-full items-center flex flex-col items-center justify-center top-1/4 z-70\">\n\n      <!-- ERROR: Missing mark. Prompt user to add mark before submitting  -->\n      <modal v-if=\"$store.state.teacherMarking.nowShowingModal === 'error_missing_mark'\"\n             modal-type=\"error\"\n             @toggleModal=\"toggleModalMode()\"\n             class=\"w-4/5 \"\n      >\n        <template slot=\"message\">\n          You must add mark for this assignment.\n        </template>\n        <template slot=\"button\">\n          Okay\n        </template>\n      </modal>\n\n      <!-- ERROR: Invalid image type. Some photos not converted to dataURL yet.  -->\n      <modal v-if=\"$store.state.teacherMarking.nowShowingModal === 'error_invalid_image_type'\"\n             modal-type=\"error\"\n             @toggleModal=\"toggleModalMode()\"\n             class=\"w-4/5 \"\n      >\n        <template slot=\"message\">\n          Please retry.\n        </template>\n        <template slot=\"button\">\n          Okay\n        </template>\n      </modal>\n\n      <!-- ERROR: Submissions failed  -->\n      <modal v-if=\"$store.state.teacherMarking.nowShowingModal === 'error_submit_markings'\"\n             modal-type=\"error\"\n             @toggleModal=\"toggleModalMode()\"\n             class=\"w-4/5 \"\n      >\n        <template slot=\"message\">\n          {{ $store.state.teacherMarking.states.errorMessages || 'Oops! There seems to be an error in your submission.'}}\n        </template>\n        <template slot=\"button\">\n          Okay\n        </template>\n      </modal>\n\n      <modal v-if=\"$store.state.teacherMarking.nowShowingModal === 'is_checking'\"\n          @toggleModal=\"toggleModalMode()\"\n             modal-type=\"no-icon\"\n             :has-button=\"false\"\n             class=\"w-4/5 \"\n      >\n        <template slot=\"message\">\n          Checking...\n        </template>\n      </modal>\n\n      <modal v-if=\"$store.state.teacherMarking.nowShowingModal === 'is_submitting'\"\n          @toggleModal=\"toggleModalMode()\"\n             :has-button=\"false\"\n             class=\"w-4/5 \"\n      >\n        <template slot=\"message\">\n          Submitting marking...\n        </template>\n      </modal>\n\n    </div>\n\n    <!-- HEADER -->\n    <page-header/>\n\n    <!-- CONTENT -->\n    <div class=\"relative\">\n      <router-view/>\n    </div>\n\n    <!-- BOTTOM -->\n    <bottom-bar/>\n\n  </div>\n</template>\n\n<script>\nimport PageHeaderThree from \"@/components/PageHeaderThree\";\nimport NavBack from \"@/components/NavBack\";\nimport IconBaseTwo from \"@/components/IconBaseTwo\";\nimport ArrowBackIcon from \"@/components/icons/ArrowBackIcon\";\nimport ExpandImageIcon from \"@/components/icons/ExpandImageIcon\";\nimport BottomBar from \"@/views/teachers/TeacherAssignments/Mark/Components/BottomBar\";\nimport SubmissionRepository from \"@/repositories/SubmissionRepository\";\nimport Modal from \"@/components/Modal\";\nimport MarksRepository from \"@/repositories/teachers/MarksRepository\";\nimport router from \"@/router\";\nimport moment from \"moment\";\nimport UndoIcon from \"@/components/icons/UndoIcon\";\nimport PageHeader from \"@/views/teachers/TeacherAssignments/Mark/Components/PageHeader\";\n\nexport default {\n  name: \"Index\",\n  props: {\n    submissionID: [String, Number],\n    markID: [String, Number],\n  },\n\n  watch: {\n    '$route': 'handleRouteChange',\n  },\n  computed: {\n\n    containerClass: function () {\n      let value = 'bg-white mb-40 ';\n\n      if (this.$store.state.teacherMarking.states.isMarking) {\n        value = 'bg-black-primary';\n      }\n\n      return value;\n    },\n\n\n  },\n  methods: {\n    handleRouteChange() {\n\n      this.scrollToTop();\n\n\n      let path = this.$route.name;\n\n      if (path === 'teacher.assignments.marking.details' && !this.$store.state.teacherMarking.states.isPreviewing) {\n        this.$store.commit('teacherMarking/setMainMode')\n      }\n\n      if (path === 'teacher.assignments.marking.feedback') {\n        this.$store.commit('teacherMarking/setWritingFeedbackMode')\n      }\n    },\n\n    toggleStickerBar() {\n      this.$store.commit(\"teacherMarking/toggleStickerBar\")\n    },\n\n    toggleModalMode() {\n      this.$store.commit('teacherMarking/toggleModalMode')\n    },\n\n    scrollToTop() {\n      window.scroll({\n        top: 0,\n        left: 0,\n        behavior: 'smooth'\n      });\n    },\n  },\n  mounted() {\n    // this.$store.commit('teacherMarking/setInitialCanvasDimensions')\n    this.$store.commit('teacherMarking/setInitialCanvasDimensions', this.$refs.container.clientWidth, this.$refs.container.clientHeight)\n    this.$store.dispatch('teacherMarking/fetchData', this.submissionID)\n        .then(response => {\n          this.$store.dispatch(\"teacherMarking/bulkConvertSubmissionsToDataURL\")\n        })\n  },\n  destroyed() {\n    this.$store.commit('teacherMarking/resetState')\n  },\n  components: {\n    PageHeader,\n    UndoIcon, Modal, BottomBar, ExpandImageIcon, ArrowBackIcon, IconBaseTwo, NavBack, PageHeaderThree\n  },\n\n}\n</script>\n\n<style scoped>\n\n</style>\n"],"mappings":"AAsGA,OAAOA,eAAc,MAAO,8BAA8B;AAC1D,OAAOC,OAAM,MAAO,sBAAsB;AAC1C,OAAOC,WAAU,MAAO,0BAA0B;AAClD,OAAOC,aAAY,MAAO,kCAAkC;AAC5D,OAAOC,eAAc,MAAO,oCAAoC;AAChE,OAAOC,SAAQ,MAAO,+DAA+D;AACrF,OAAOC,oBAAmB,MAAO,qCAAqC;AACtE,OAAOC,KAAI,MAAO,oBAAoB;AACtC,OAAOC,eAAc,MAAO,yCAAyC;AACrE,OAAOC,MAAK,MAAO,UAAU;AAC7B,OAAOC,MAAK,MAAO,QAAQ;AAC3B,OAAOC,QAAO,MAAO,6BAA6B;AAClD,OAAOC,UAAS,MAAO,gEAAgE;AAEvF,eAAe;EACbC,IAAI,EAAE,OAAO;EACbC,KAAK,EAAE;IACLC,YAAY,EAAE,CAACC,MAAM,EAAEC,MAAM,CAAC;IAC9BC,MAAM,EAAE,CAACF,MAAM,EAAEC,MAAM;EACzB,CAAC;EAEDE,KAAK,EAAE;IACL,QAAQ,EAAE;EACZ,CAAC;EACDC,QAAQ,EAAE;IAERC,cAAc,EAAE,SAAAA,CAAA,EAAY;MAC1B,IAAIC,KAAI,GAAI,iBAAiB;MAE7B,IAAI,IAAI,CAACC,MAAM,CAACC,KAAK,CAACC,cAAc,CAACC,MAAM,CAACC,SAAS,EAAE;QACrDL,KAAI,GAAI,kBAAkB;MAC5B;MAEA,OAAOA,KAAK;IACd;EAGF,CAAC;EACDM,OAAO,EAAE;IACPC,iBAAiBA,CAAA,EAAG;MAElB,IAAI,CAACC,WAAW,EAAE;MAGlB,IAAIC,IAAG,GAAI,IAAI,CAACC,MAAM,CAACnB,IAAI;MAE3B,IAAIkB,IAAG,KAAM,qCAAoC,IAAK,CAAC,IAAI,CAACR,MAAM,CAACC,KAAK,CAACC,cAAc,CAACC,MAAM,CAACO,YAAY,EAAE;QAC3G,IAAI,CAACV,MAAM,CAACW,MAAM,CAAC,4BAA4B;MACjD;MAEA,IAAIH,IAAG,KAAM,sCAAsC,EAAE;QACnD,IAAI,CAACR,MAAM,CAACW,MAAM,CAAC,uCAAuC;MAC5D;IACF,CAAC;IAEDC,gBAAgBA,CAAA,EAAG;MACjB,IAAI,CAACZ,MAAM,CAACW,MAAM,CAAC,iCAAiC;IACtD,CAAC;IAEDE,eAAeA,CAAA,EAAG;MAChB,IAAI,CAACb,MAAM,CAACW,MAAM,CAAC,gCAAgC;IACrD,CAAC;IAEDJ,WAAWA,CAAA,EAAG;MACZO,MAAM,CAACC,MAAM,CAAC;QACZC,GAAG,EAAE,CAAC;QACNC,IAAI,EAAE,CAAC;QACPC,QAAQ,EAAE;MACZ,CAAC,CAAC;IACJ;EACF,CAAC;EACDC,OAAOA,CAAA,EAAG;IACR;IACA,IAAI,CAACnB,MAAM,CAACW,MAAM,CAAC,2CAA2C,EAAE,IAAI,CAACS,KAAK,CAACC,SAAS,CAACC,WAAW,EAAE,IAAI,CAACF,KAAK,CAACC,SAAS,CAACE,YAAY;IACnI,IAAI,CAACvB,MAAM,CAACwB,QAAQ,CAAC,0BAA0B,EAAE,IAAI,CAAChC,YAAY,EAC7DiC,IAAI,CAACC,QAAO,IAAK;MAChB,IAAI,CAAC1B,MAAM,CAACwB,QAAQ,CAAC,gDAAgD;IACvE,CAAC;EACP,CAAC;EACDG,SAASA,CAAA,EAAG;IACV,IAAI,CAAC3B,MAAM,CAACW,MAAM,CAAC,2BAA2B;EAChD,CAAC;EACDiB,UAAU,EAAE;IACVvC,UAAU;IACVD,QAAQ;IAAEJ,KAAK;IAAEF,SAAS;IAAED,eAAe;IAAED,aAAa;IAAED,WAAW;IAAED,OAAO;IAAED;EACpF;AAEF"},"metadata":{},"sourceType":"module","externalDependencies":[]}