{"remainingRequest":"/Users/erwinkarim/Websites/Snapped/snapped-mobile-master/node_modules/babel-loader/lib/index.js!/Users/erwinkarim/Websites/Snapped/snapped-mobile-master/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/erwinkarim/Websites/Snapped/snapped-mobile-master/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/erwinkarim/Websites/Snapped/snapped-mobile-master/src/views/auth/Edit.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/erwinkarim/Websites/Snapped/snapped-mobile-master/src/views/auth/Edit.vue","mtime":1679379067243},{"path":"/Users/erwinkarim/Websites/Snapped/snapped-mobile-master/babel.config.js","mtime":1679379067182},{"path":"/Users/erwinkarim/Websites/Snapped/snapped-mobile-master/node_modules/cache-loader/dist/cjs.js","mtime":1680070113546},{"path":"/Users/erwinkarim/Websites/Snapped/snapped-mobile-master/node_modules/babel-loader/lib/index.js","mtime":1680059914906},{"path":"/Users/erwinkarim/Websites/Snapped/snapped-mobile-master/node_modules/cache-loader/dist/cjs.js","mtime":1680070113546},{"path":"/Users/erwinkarim/Websites/Snapped/snapped-mobile-master/node_modules/vue-loader/lib/index.js","mtime":1680070113705}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkucHVzaC5qcyI7CmltcG9ydCBEYXNoYm9hcmRMYXlvdXQgZnJvbSAiQC92aWV3cy9sYXlvdXQvRGFzaGJvYXJkTGF5b3V0IjsKaW1wb3J0IFBhZ2VUaXRsZSBmcm9tICJAL2NvbXBvbmVudHMvUGFnZVRpdGxlIjsKaW1wb3J0IFNlY3Rpb25UaXRsZSBmcm9tICJAL2NvbXBvbmVudHMvU2VjdGlvblRpdGxlIjsKaW1wb3J0IEF1dGhlbnRpY2F0aW9uUmVwb3NpdG9yeSBmcm9tICJAL3JlcG9zaXRvcmllcy9BdXRoZW50aWNhdGlvblJlcG9zaXRvcnkiOwppbXBvcnQgUGFnZUhlYWRlclRocmVlIGZyb20gIkAvY29tcG9uZW50cy9QYWdlSGVhZGVyVGhyZWUiOwppbXBvcnQgTmF2QmFjayBmcm9tICJAL2NvbXBvbmVudHMvTmF2QmFjayI7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiRWRpdCIsCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGZvcm06IHt9LAogICAgICBzdGF0ZXM6IHsKICAgICAgICBpc1N1Ym1pdHRpbmc6IGZhbHNlCiAgICAgIH0sCiAgICAgIGNoYW5nZVBhc3N3b3JkOiB7CiAgICAgICAgb2xkOiBudWxsLAogICAgICAgIG5ldzogbnVsbCwKICAgICAgICBuZXdfY29uZmlybWF0aW9uOiBudWxsCiAgICAgIH0sCiAgICAgIHN1Y2Nlc3M6IG51bGwsCiAgICAgIGVycm9yczogW10KICAgIH07CiAgfSwKICBjb21wdXRlZDogewogICAgdmFsaWRGb3JtKCkgewogICAgICByZXR1cm4gdGhpcy5lcnJvcnMubGVuZ3RoID09PSAwOwogICAgfSwKICAgIG5hdkJhY2tSb3V0ZSgpIHsKICAgICAgbGV0IHJvdXRlTmFtZSA9ICcnOwogICAgICBpZiAodGhpcy4kc3RvcmUuZ2V0dGVycy5nZXRBdXRoVXNlclJvbGUgPT09ICdUZWFjaGVyJykgewogICAgICAgIHJvdXRlTmFtZSA9ICd0ZWFjaGVyLnNldHRpbmdzJzsKICAgICAgfQogICAgICBpZiAodGhpcy4kc3RvcmUuZ2V0dGVycy5nZXRBdXRoVXNlclJvbGUgPT09ICdTdHVkZW50JykgewogICAgICAgIHJvdXRlTmFtZSA9ICdzdHVkZW50LnNldHRpbmdzJzsKICAgICAgfQogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgdmFsaWRhdGVGb3JtKCkgewogICAgICAvLyBkZXRlcm1pbmUgaWYgdXNlciBpcyB1cGRhdGluZyBwYXNzd29yZAogICAgICBsZXQgaXNVcGRhdGluZ1Bhc3N3b3JkID0gdGhpcy5jaGFuZ2VQYXNzd29yZC5vbGQgIT09IG51bGwgfHwgdGhpcy5jaGFuZ2VQYXNzd29yZC5uZXcgIT09ICcnIHx8IHRoaXMuY2hhbmdlUGFzc3dvcmQubmV3ICE9PSBudWxsIHx8IHRoaXMuY2hhbmdlUGFzc3dvcmQubmV3ICE9PSAnJyB8fCB0aGlzLmNoYW5nZVBhc3N3b3JkLm5ld19jb25maXJtYXRpb24gIT09IG51bGwgfHwgdGhpcy5jaGFuZ2VQYXNzd29yZC5uZXdfY29uZmlybWF0aW9uICE9PSAnJzsKCiAgICAgIC8vIElmIHVzZXIgaXMgdXBkYXRpbmcgcGFzc3dvcmQsIGNoZWNrIGlmIHVzZXIgbGVmdCBhbnkgcGFzc3dvcmQgaW5wdXRzIG51bGwgb3IgZW1wdHkgc3RyaW5nCiAgICAgIGlmIChpc1VwZGF0aW5nUGFzc3dvcmQpIHsKICAgICAgICBpZiAoIXRoaXMuY2hhbmdlUGFzc3dvcmQub2xkKSB0aGlzLmVycm9ycy5wdXNoKCdQbGVhc2UgZW50ZXIgY3VycmVudCBwYXNzd29yZC4nKTsKICAgICAgICBpZiAoIXRoaXMuY2hhbmdlUGFzc3dvcmQubmV3KSB0aGlzLmVycm9ycy5wdXNoKCdQbGVhc2UgZW50ZXIgbmV3IHBhc3N3b3JkLicpOwogICAgICAgIGlmICghdGhpcy5jaGFuZ2VQYXNzd29yZC5uZXdfY29uZmlybWF0aW9uKSB0aGlzLmVycm9ycy5wdXNoKCdQbGVhc2UgY29uZmlybSBuZXcgcGFzc3dvcmQuJyk7CiAgICAgIH0KICAgIH0sCiAgICBzdWJtaXQoKSB7CiAgICAgIHRoaXMucmVzZXRTdWNjZXNzRXJyb3JCYXIoKTsKICAgICAgdGhpcy52YWxpZGF0ZUZvcm0oKTsKICAgICAgbGV0IHBheWxvYWQgPSB7CiAgICAgICAgb2xkX3Bhc3N3b3JkOiB0aGlzLmNoYW5nZVBhc3N3b3JkLm9sZCwKICAgICAgICBwYXNzd29yZDogdGhpcy5jaGFuZ2VQYXNzd29yZC5uZXcsCiAgICAgICAgcGFzc3dvcmRfY29uZmlybWF0aW9uOiB0aGlzLmNoYW5nZVBhc3N3b3JkLm5ld19jb25maXJtYXRpb24KICAgICAgfTsKICAgICAgaWYgKHRoaXMudmFsaWRGb3JtICYmICF0aGlzLmlzU3VibWl0dGluZykgewogICAgICAgIHRoaXMuc3RhdGVzLmlzU3VibWl0dGluZyA9IHRydWU7CiAgICAgICAgQXV0aGVudGljYXRpb25SZXBvc2l0b3J5LnVwZGF0ZVVzZXJEZXRhaWxzKHBheWxvYWQpLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAgICAgdGhpcy5zdGF0ZXMuaXNTdWJtaXR0aW5nID0gZmFsc2U7CiAgICAgICAgICBpZiAocmVzcG9uc2UuZGF0YS5zdWNjZXNzKSB7CiAgICAgICAgICAgIHRoaXMuc3VjY2VzcyA9IHJlc3BvbnNlLmRhdGEubWVzc2FnZTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHRoaXMuZXJyb3JzLnB1c2gocmVzcG9uc2UuZGF0YS5kYXRhLmVycm9yKTsKICAgICAgICAgIH0KICAgICAgICB9KS5jYXRjaChlcnJvciA9PiB7CiAgICAgICAgICB0aGlzLnN0YXRlcy5pc1N1Ym1pdHRpbmcgPSBmYWxzZTsKICAgICAgICB9KTsKICAgICAgfQogICAgfSwKICAgIHJlc2V0U3VjY2Vzc0Vycm9yQmFyKCkgewogICAgICB0aGlzLnN1Y2Nlc3MgPSBudWxsOwogICAgICB0aGlzLmVycm9ycyA9IFtdOwogICAgfSwKICAgIHJlc2V0SW5wdXRzKCkgewogICAgICB0aGlzLmNoYW5nZVBhc3N3b3JkLm9sZCA9IG51bGw7CiAgICAgIHRoaXMuY2hhbmdlUGFzc3dvcmQubmV3ID0gbnVsbDsKICAgICAgdGhpcy5jaGFuZ2VQYXNzd29yZC5uZXdfY29uZmlybWF0aW9uID0gbnVsbDsKICAgIH0KICB9LAogIGNvbXBvbmVudHM6IHsKICAgIE5hdkJhY2ssCiAgICBQYWdlSGVhZGVyVGhyZWUsCiAgICBTZWN0aW9uVGl0bGUsCiAgICBQYWdlVGl0bGUsCiAgICBEYXNoYm9hcmRMYXlvdXQKICB9Cn07"},{"version":3,"names":["DashboardLayout","PageTitle","SectionTitle","AuthenticationRepository","PageHeaderThree","NavBack","name","data","form","states","isSubmitting","changePassword","old","new","new_confirmation","success","errors","computed","validForm","length","navBackRoute","routeName","$store","getters","getAuthUserRole","methods","validateForm","isUpdatingPassword","push","submit","resetSuccessErrorBar","payload","old_password","password","password_confirmation","updateUserDetails","then","response","message","error","catch","resetInputs","components"],"sources":["src/views/auth/Edit.vue"],"sourcesContent":["<template>\n  <dashboard-layout\n      :has-custom-bottom-bar=\"true\"\n  >\n\n    <template v-slot:pageHeader>\n\n      <page-header-three>\n        <template v-slot:leftAction>\n          <nav-back :to=\"navBackRoute\"\n                    stroke-color=\"bg-purple-primary\"\n                    class=\"w-2/7\"\n          />\n        </template>\n        <template v-slot:mini-title>\n          <div class=\"truncate\">\n            Edit Profile\n          </div>\n        </template>\n      </page-header-three>\n    </template>\n\n    <template v-slot:content>\n      <div class=\"absolute h-full w-full my-auto flex flex-col px-4 mt-20\">\n\n        <!-- FORM INPUTS -->\n        <div class=\"px-3 w-full md:max-w-xl lg:max-w-2xl mx-auto mt-5\">\n\n          <div v-if=\"success\"\n              class=\"bg-green-300 mb-4 py-3 mb-2 px-4 text-left text-purple-primary text-xs rounded-lg\"\n          >\n             {{success}}\n          </div>\n          <!-- ERROR BAR -->\n          <div v-if=\"errors.length\"\n               class=\"bg-red-500 mb-4 py-3 mb-2 px-4 text-left text-white text-xs rounded-lg\"\n          >\n            <ul>\n              <li v-for=\"error in errors\">{{ error }}</li>\n            </ul>\n          </div>\n\n          <div class=\"w-full mt-5\">\n            <section-title class=\"text-left my-4\" title=\"Change Password\"/>\n            <div class=\"mb-8\">\n              <input v-model=\"changePassword.old\"\n                     type=\"password\"\n                     @click=\"resetSuccessErrorBar\"\n                     placeholder=\"Current Password\"\n                     class=\"appearance-none border rounded border-none w-full py-2 pl-5 pr-2 md:h-20 md:text-xl mt-3 bg-gray-secondary text-gray-700 font-normal leading-tight focus:outline-none focus:shadow-outline placeholder-purple-secondary h-14\"\n              >\n              <input v-model=\"changePassword.new\"\n                     type=\"password\"\n                     @click=\"resetSuccessErrorBar\"\n                     placeholder=\"New Password\"\n                     class=\"appearance-none border rounded border-none w-full py-2 pl-5 pr-2 md:h-20 md:text-xl mt-3 bg-gray-secondary text-gray-700 font-normal leading-tight focus:outline-none focus:shadow-outline placeholder-purple-secondary h-14\"\n              >\n              <input v-model=\"changePassword.new_confirmation\"\n                     type=\"password\"\n                     @click=\"resetSuccessErrorBar\"\n                     placeholder=\"Confirm New Password\"\n                     class=\"appearance-none border rounded border-none w-full py-2 pl-5 pr-2 md:h-20 md:text-xl mt-3 bg-gray-secondary text-gray-700 font-normal leading-tight focus:outline-none focus:shadow-outline placeholder-purple-secondary h-14\"\n              >\n            </div>\n          </div>\n\n        </div>\n\n      </div>\n    </template>\n\n    <template v-slot:bottomBar>\n      <button @click=\"submit\"\n              class=\"w-full font-bold focus:outline-none rounded-full text-purple-primary text-sm bg-white border-2 border-purple-primary py-3 px-1 flex flex-row justify-center\">\n        Submit\n      </button>\n    </template>\n  </dashboard-layout>\n</template>\n\n<script>\nimport DashboardLayout from \"@/views/layout/DashboardLayout\";\nimport PageTitle from \"@/components/PageTitle\";\nimport SectionTitle from \"@/components/SectionTitle\";\nimport AuthenticationRepository from \"@/repositories/AuthenticationRepository\";\nimport PageHeaderThree from \"@/components/PageHeaderThree\";\nimport NavBack from \"@/components/NavBack\";\n\nexport default {\n  name: \"Edit\",\n  data() {\n    return {\n      form: {},\n\n      states: {\n        isSubmitting: false,\n      },\n\n      changePassword: {\n        old: null,\n        new: null,\n        new_confirmation: null\n      },\n      success: null,\n      errors: []\n    }\n  },\n\n  computed: {\n    validForm() {\n      return this.errors.length === 0;\n    },\n    navBackRoute() {\n      let routeName = '';\n\n      if(this.$store.getters.getAuthUserRole === 'Teacher'){\n        routeName = 'teacher.settings'\n      }\n\n      if(this.$store.getters.getAuthUserRole === 'Student'){\n        routeName = 'student.settings'\n      }\n    }\n  },\n\n  methods: {\n\n    validateForm() {\n\n      // determine if user is updating password\n      let isUpdatingPassword = (\n          this.changePassword.old !== null\n          || this.changePassword.new !== ''\n          || this.changePassword.new !== null\n          || this.changePassword.new !== ''\n          || this.changePassword.new_confirmation !== null\n          || this.changePassword.new_confirmation !== ''\n      );\n\n      // If user is updating password, check if user left any password inputs null or empty string\n      if (isUpdatingPassword) {\n        if (!this.changePassword.old) this.errors.push('Please enter current password.')\n        if (!this.changePassword.new) this.errors.push('Please enter new password.')\n        if (!this.changePassword.new_confirmation) this.errors.push('Please confirm new password.')\n      }\n    },\n\n    submit() {\n\n      this.resetSuccessErrorBar();\n      this.validateForm();\n\n      let payload = {\n        old_password: this.changePassword.old,\n        password: this.changePassword.new,\n        password_confirmation: this.changePassword.new_confirmation,\n      }\n\n      if (this.validForm && !this.isSubmitting) {\n\n        this.states.isSubmitting = true;\n\n        AuthenticationRepository.updateUserDetails(payload)\n            .then(response => {\n\n              this.states.isSubmitting = false;\n\n              if (response.data.success) {\n                this.success = response.data.message;\n              } else {\n                this.errors.push(response.data.data.error)\n              }\n            })\n            .catch(error => {\n              this.states.isSubmitting = false;\n            })\n      }\n\n    },\n    resetSuccessErrorBar() {\n      this.success = null;\n      this.errors = [];\n    },\n\n    resetInputs() {\n      this.changePassword.old = null;\n      this.changePassword.new = null;\n      this.changePassword.new_confirmation = null;\n    }\n\n  },\n  components: {NavBack, PageHeaderThree, SectionTitle, PageTitle, DashboardLayout}\n}\n</script>\n\n<style scoped>\n\n</style>\n"],"mappings":";AAiFA,OAAAA,eAAA;AACA,OAAAC,SAAA;AACA,OAAAC,YAAA;AACA,OAAAC,wBAAA;AACA,OAAAC,eAAA;AACA,OAAAC,OAAA;AAEA;EACAC,IAAA;EACAC,KAAA;IACA;MACAC,IAAA;MAEAC,MAAA;QACAC,YAAA;MACA;MAEAC,cAAA;QACAC,GAAA;QACAC,GAAA;QACAC,gBAAA;MACA;MACAC,OAAA;MACAC,MAAA;IACA;EACA;EAEAC,QAAA;IACAC,UAAA;MACA,YAAAF,MAAA,CAAAG,MAAA;IACA;IACAC,aAAA;MACA,IAAAC,SAAA;MAEA,SAAAC,MAAA,CAAAC,OAAA,CAAAC,eAAA;QACAH,SAAA;MACA;MAEA,SAAAC,MAAA,CAAAC,OAAA,CAAAC,eAAA;QACAH,SAAA;MACA;IACA;EACA;EAEAI,OAAA;IAEAC,aAAA;MAEA;MACA,IAAAC,kBAAA,GACA,KAAAhB,cAAA,CAAAC,GAAA,aACA,KAAAD,cAAA,CAAAE,GAAA,WACA,KAAAF,cAAA,CAAAE,GAAA,aACA,KAAAF,cAAA,CAAAE,GAAA,WACA,KAAAF,cAAA,CAAAG,gBAAA,aACA,KAAAH,cAAA,CAAAG,gBAAA,OACA;;MAEA;MACA,IAAAa,kBAAA;QACA,UAAAhB,cAAA,CAAAC,GAAA,OAAAI,MAAA,CAAAY,IAAA;QACA,UAAAjB,cAAA,CAAAE,GAAA,OAAAG,MAAA,CAAAY,IAAA;QACA,UAAAjB,cAAA,CAAAG,gBAAA,OAAAE,MAAA,CAAAY,IAAA;MACA;IACA;IAEAC,OAAA;MAEA,KAAAC,oBAAA;MACA,KAAAJ,YAAA;MAEA,IAAAK,OAAA;QACAC,YAAA,OAAArB,cAAA,CAAAC,GAAA;QACAqB,QAAA,OAAAtB,cAAA,CAAAE,GAAA;QACAqB,qBAAA,OAAAvB,cAAA,CAAAG;MACA;MAEA,SAAAI,SAAA,UAAAR,YAAA;QAEA,KAAAD,MAAA,CAAAC,YAAA;QAEAP,wBAAA,CAAAgC,iBAAA,CAAAJ,OAAA,EACAK,IAAA,CAAAC,QAAA;UAEA,KAAA5B,MAAA,CAAAC,YAAA;UAEA,IAAA2B,QAAA,CAAA9B,IAAA,CAAAQ,OAAA;YACA,KAAAA,OAAA,GAAAsB,QAAA,CAAA9B,IAAA,CAAA+B,OAAA;UACA;YACA,KAAAtB,MAAA,CAAAY,IAAA,CAAAS,QAAA,CAAA9B,IAAA,CAAAA,IAAA,CAAAgC,KAAA;UACA;QACA,GACAC,KAAA,CAAAD,KAAA;UACA,KAAA9B,MAAA,CAAAC,YAAA;QACA;MACA;IAEA;IACAoB,qBAAA;MACA,KAAAf,OAAA;MACA,KAAAC,MAAA;IACA;IAEAyB,YAAA;MACA,KAAA9B,cAAA,CAAAC,GAAA;MACA,KAAAD,cAAA,CAAAE,GAAA;MACA,KAAAF,cAAA,CAAAG,gBAAA;IACA;EAEA;EACA4B,UAAA;IAAArC,OAAA;IAAAD,eAAA;IAAAF,YAAA;IAAAD,SAAA;IAAAD;EAAA;AACA"}]}