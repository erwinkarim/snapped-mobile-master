{"ast":null,"code":"import AuthenticationRepository from \"@/repositories/AuthenticationRepository\";\nimport axios from \"axios\";\nexport default {\n  login({\n    commit\n  }, userCredentials) {\n    return new Promise((resolve, reject) => {\n      AuthenticationRepository.login(userCredentials).then(response => {\n        if (response.data.success) {\n          const token = response.data.token;\n          if (token) {\n            localStorage.setItem('token', token);\n            axios.defaults.headers.common['Authorization'] = token;\n            commit('auth_success', token);\n            resolve();\n          }\n        } else {\n          commit('auth_error');\n          localStorage.removeItem('token');\n          reject(response.data.data.error);\n        }\n      }).catch(error => {\n        commit('auth_error');\n        localStorage.removeItem('token');\n        reject(error.response.data);\n      });\n    });\n  },\n  logout({\n    commit\n  }) {\n    return new Promise((resolve, reject) => {\n      commit('logout');\n      localStorage.removeItem('token');\n      delete axios.defaults.headers.common['Authorization'];\n      resolve();\n    });\n  },\n  setAuthUser({\n    commit\n  }) {\n    return new Promise((resolve, reject) => {\n      AuthenticationRepository.getUserDetails().then(response => {\n        if (response.data.success) {\n          let userDetails = response.data.data[0];\n          commit('set_auth_user_details', userDetails);\n          resolve(userDetails.role);\n        } else {\n          commit('auth_error');\n          localStorage.removeItem('token');\n          delete axios.defaults.headers.common['Authorization'];\n          reject(response.data.data.error);\n        }\n      }).catch(err => {\n        commit('auth_error');\n        localStorage.removeItem('token');\n        delete axios.defaults.headers.common['Authorization'];\n        reject(err);\n      });\n    });\n  }\n};","map":{"version":3,"names":["AuthenticationRepository","axios","login","commit","userCredentials","Promise","resolve","reject","then","response","data","success","token","localStorage","setItem","defaults","headers","common","removeItem","error","catch","logout","setAuthUser","getUserDetails","userDetails","role","err"],"sources":["/Users/erwinkarim/Websites/Snapped/snapped-mobile-master/src/store/actions.js"],"sourcesContent":["import AuthenticationRepository from \"@/repositories/AuthenticationRepository\";\nimport axios from \"axios\";\n\nexport default {\n    login({commit}, userCredentials) {\n\n        return new Promise((resolve, reject) => {\n\n            AuthenticationRepository.login(userCredentials)\n                .then(response => {\n\n                    if (response.data.success) {\n\n                        const token = response.data.token\n\n                        if (token) {\n                            localStorage.setItem('token', token)\n                            axios.defaults.headers.common['Authorization'] = token\n                            commit('auth_success', token)\n                            resolve()\n                        }\n                    } else {\n                        commit('auth_error')\n                        localStorage.removeItem('token')\n                        reject(response.data.data.error)\n                    }\n\n                })\n                .catch(error => {\n                    commit('auth_error')\n                    localStorage.removeItem('token')\n                    reject(error.response.data)\n                })\n        })\n    },\n\n    logout({commit}) {\n        return new Promise((resolve, reject) => {\n            commit('logout')\n            localStorage.removeItem('token')\n            delete axios.defaults.headers.common['Authorization']\n            resolve()\n        })\n    },\n\n    setAuthUser({commit}) {\n\n        return new Promise((resolve, reject) => {\n\n            AuthenticationRepository.getUserDetails()\n                .then(response => {\n\n                    if (response.data.success) {\n                        let userDetails = response.data.data[0]\n\n                        commit('set_auth_user_details', userDetails)\n                        resolve(userDetails.role)\n                    } else {\n                        commit('auth_error')\n                        localStorage.removeItem('token')\n                        delete axios.defaults.headers.common['Authorization']\n                        reject(response.data.data.error)\n                    }\n\n                })\n                .catch(err => {\n                    commit('auth_error')\n                    localStorage.removeItem('token')\n                    delete axios.defaults.headers.common['Authorization']\n                    reject(err)\n                })\n        })\n    }\n}\n"],"mappings":"AAAA,OAAOA,wBAAwB,MAAM,yCAAyC;AAC9E,OAAOC,KAAK,MAAM,OAAO;AAEzB,eAAe;EACXC,KAAKA,CAAC;IAACC;EAAM,CAAC,EAAEC,eAAe,EAAE;IAE7B,OAAO,IAAIC,OAAO,CAAC,CAACC,OAAO,EAAEC,MAAM,KAAK;MAEpCP,wBAAwB,CAACE,KAAK,CAACE,eAAe,CAAC,CAC1CI,IAAI,CAACC,QAAQ,IAAI;QAEd,IAAIA,QAAQ,CAACC,IAAI,CAACC,OAAO,EAAE;UAEvB,MAAMC,KAAK,GAAGH,QAAQ,CAACC,IAAI,CAACE,KAAK;UAEjC,IAAIA,KAAK,EAAE;YACPC,YAAY,CAACC,OAAO,CAAC,OAAO,EAAEF,KAAK,CAAC;YACpCX,KAAK,CAACc,QAAQ,CAACC,OAAO,CAACC,MAAM,CAAC,eAAe,CAAC,GAAGL,KAAK;YACtDT,MAAM,CAAC,cAAc,EAAES,KAAK,CAAC;YAC7BN,OAAO,EAAE;UACb;QACJ,CAAC,MAAM;UACHH,MAAM,CAAC,YAAY,CAAC;UACpBU,YAAY,CAACK,UAAU,CAAC,OAAO,CAAC;UAChCX,MAAM,CAACE,QAAQ,CAACC,IAAI,CAACA,IAAI,CAACS,KAAK,CAAC;QACpC;MAEJ,CAAC,CAAC,CACDC,KAAK,CAACD,KAAK,IAAI;QACZhB,MAAM,CAAC,YAAY,CAAC;QACpBU,YAAY,CAACK,UAAU,CAAC,OAAO,CAAC;QAChCX,MAAM,CAACY,KAAK,CAACV,QAAQ,CAACC,IAAI,CAAC;MAC/B,CAAC,CAAC;IACV,CAAC,CAAC;EACN,CAAC;EAEDW,MAAMA,CAAC;IAAClB;EAAM,CAAC,EAAE;IACb,OAAO,IAAIE,OAAO,CAAC,CAACC,OAAO,EAAEC,MAAM,KAAK;MACpCJ,MAAM,CAAC,QAAQ,CAAC;MAChBU,YAAY,CAACK,UAAU,CAAC,OAAO,CAAC;MAChC,OAAOjB,KAAK,CAACc,QAAQ,CAACC,OAAO,CAACC,MAAM,CAAC,eAAe,CAAC;MACrDX,OAAO,EAAE;IACb,CAAC,CAAC;EACN,CAAC;EAEDgB,WAAWA,CAAC;IAACnB;EAAM,CAAC,EAAE;IAElB,OAAO,IAAIE,OAAO,CAAC,CAACC,OAAO,EAAEC,MAAM,KAAK;MAEpCP,wBAAwB,CAACuB,cAAc,EAAE,CACpCf,IAAI,CAACC,QAAQ,IAAI;QAEd,IAAIA,QAAQ,CAACC,IAAI,CAACC,OAAO,EAAE;UACvB,IAAIa,WAAW,GAAGf,QAAQ,CAACC,IAAI,CAACA,IAAI,CAAC,CAAC,CAAC;UAEvCP,MAAM,CAAC,uBAAuB,EAAEqB,WAAW,CAAC;UAC5ClB,OAAO,CAACkB,WAAW,CAACC,IAAI,CAAC;QAC7B,CAAC,MAAM;UACHtB,MAAM,CAAC,YAAY,CAAC;UACpBU,YAAY,CAACK,UAAU,CAAC,OAAO,CAAC;UAChC,OAAOjB,KAAK,CAACc,QAAQ,CAACC,OAAO,CAACC,MAAM,CAAC,eAAe,CAAC;UACrDV,MAAM,CAACE,QAAQ,CAACC,IAAI,CAACA,IAAI,CAACS,KAAK,CAAC;QACpC;MAEJ,CAAC,CAAC,CACDC,KAAK,CAACM,GAAG,IAAI;QACVvB,MAAM,CAAC,YAAY,CAAC;QACpBU,YAAY,CAACK,UAAU,CAAC,OAAO,CAAC;QAChC,OAAOjB,KAAK,CAACc,QAAQ,CAACC,OAAO,CAACC,MAAM,CAAC,eAAe,CAAC;QACrDV,MAAM,CAACmB,GAAG,CAAC;MACf,CAAC,CAAC;IACV,CAAC,CAAC;EACN;AACJ,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}