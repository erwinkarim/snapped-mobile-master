{"remainingRequest":"/Users/erwinkarim/Websites/Snapped/snapped-mobile-master/node_modules/babel-loader/lib/index.js!/Users/erwinkarim/Websites/Snapped/snapped-mobile-master/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/erwinkarim/Websites/Snapped/snapped-mobile-master/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/erwinkarim/Websites/Snapped/snapped-mobile-master/src/views/teachers/TeachersStudents/StudentsList.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/erwinkarim/Websites/Snapped/snapped-mobile-master/src/views/teachers/TeachersStudents/StudentsList.vue","mtime":1680008048383},{"path":"/Users/erwinkarim/Websites/Snapped/snapped-mobile-master/babel.config.js","mtime":1679379067182},{"path":"/Users/erwinkarim/Websites/Snapped/snapped-mobile-master/node_modules/cache-loader/dist/cjs.js","mtime":1680070113546},{"path":"/Users/erwinkarim/Websites/Snapped/snapped-mobile-master/node_modules/babel-loader/lib/index.js","mtime":1680059914906},{"path":"/Users/erwinkarim/Websites/Snapped/snapped-mobile-master/node_modules/cache-loader/dist/cjs.js","mtime":1680070113546},{"path":"/Users/erwinkarim/Websites/Snapped/snapped-mobile-master/node_modules/vue-loader/lib/index.js","mtime":1680070113705}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkucHVzaC5qcyI7CmltcG9ydCBUZWFjaGVyUmVwb3NpdG9yeSBmcm9tICJAL3JlcG9zaXRvcmllcy9UZWFjaGVyUmVwb3NpdG9yeSI7CmltcG9ydCBJY29uQmFzZSBmcm9tICJAL2NvbXBvbmVudHMvSWNvbkJhc2UiOwppbXBvcnQgUHJvZmlsZVBob3RvIGZyb20gIkAvY29tcG9uZW50cy9pY29ucy9Qcm9maWxlUGhvdG8iOwppbXBvcnQgcm91dGVyIGZyb20gIkAvcm91dGVyIjsKaW1wb3J0IFRhZ2dpbmdJY29uIGZyb20gIi4uLy4uLy4uL2NvbXBvbmVudHMvaWNvbnMvVGFnZ2luZ0ljb24iOwppbXBvcnQgSWNvbkJhc2VUd28gZnJvbSAiLi4vLi4vLi4vY29tcG9uZW50cy9JY29uQmFzZVR3byI7CmltcG9ydCBTdHVkZW50UmVwb3NpdG9yeSBmcm9tICJAL3JlcG9zaXRvcmllcy9TdHVkZW50UmVwb3NpdG9yeSI7CmltcG9ydCBJbmZpbml0ZUxvYWRpbmcgZnJvbSAidnVlLWluZmluaXRlLWxvYWRpbmciOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIlN0dWRlbnRzTGlzdCIsCiAgcHJvcHM6IHsKICAgIHNlYXJjaDogU3RyaW5nCiAgfSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgLy8gc3RhdGVzCiAgICAgIGVycm9yOiBudWxsLAogICAgICBsb2FkaW5nOiBmYWxzZSwKICAgICAgYXdhaXRpbmdTZWFyY2g6IGZhbHNlLAogICAgICBmaWx0ZXJDb3VudDogMCwKICAgICAgZmlsdGVyczogewogICAgICAgIHBhZ2VOdW06IDEsCiAgICAgICAgcGVyUGFnZTogMjAsCiAgICAgICAgc2VhcmNoOiAnJwogICAgICB9LAogICAgICBtZXRhOiBudWxsLAogICAgICAvLyBkYXRhCiAgICAgIHN0dWRlbnRzOiBbXSwKICAgICAgcGVyZm9ybWFuY2VzOiBudWxsCiAgICB9OwogIH0sCiAgd2F0Y2g6IHsKICAgICckcm91dGUnOiAnZmV0Y2hEYXRhJywKICAgICdzZWFyY2gnOiAnc2VhcmNoTmFtZScKICB9LAogIGNvbXB1dGVkOiB7CiAgICBoYXNMb2FkTW9yZSgpIHsKICAgICAgaWYgKHRoaXMubWV0YSkgewogICAgICAgIHJldHVybiB0aGlzLmZpbHRlcnMucGFnZU51bSA8PSB0aGlzLm1ldGEubGFzdF9wYWdlOwogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiB0cnVlOwogICAgICB9CiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICBoYW5kbGVJbmZpbml0ZVNjcm9sbCgkc3RhdGUpIHsKICAgICAgaWYgKHRoaXMuaGFzTG9hZE1vcmUpIHsKICAgICAgICBUZWFjaGVyUmVwb3NpdG9yeS5nZXRUZWFjaGVyU3R1ZGVudHModGhpcy5maWx0ZXJzKS50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICAgIGxldCBkYXRhID0gcmVzcG9uc2UuZGF0YS5kYXRhOwogICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBkYXRhLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgIHRoaXMuc3R1ZGVudHMucHVzaChkYXRhW2ldKTsKICAgICAgICAgIH0KCiAgICAgICAgICAvLyBVcGRhdGUgbWV0YSBkZXRhaWxzIGFuZCBwYWdlTnVtIGZvciBmaWx0ZXJzCiAgICAgICAgICB0aGlzLm1ldGEgPSByZXNwb25zZS5kYXRhLm1ldGE7CiAgICAgICAgICB0aGlzLmZpbHRlcnMucGFnZU51bSA9IHRoaXMubWV0YS5jdXJyZW50X3BhZ2UgKyAxOwogICAgICAgICAgJHN0YXRlLmxvYWRlZCgpOwogICAgICAgIH0pOwogICAgICB9IGVsc2UgewogICAgICAgICRzdGF0ZS5jb21wbGV0ZSgpOwogICAgICB9CiAgICB9LAogICAgZ2V0U3R1ZGVudFBlcmZvcm1hbmNlKCkgewogICAgICBUZWFjaGVyUmVwb3NpdG9yeS5nZXRTdHVkZW50UGVyZm9ybWFuY2UoKS50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICBsZXQgZGF0YSA9IHJlc3BvbnNlLmRhdGE7CiAgICAgICAgdGhpcy5wZXJmb3JtYW5jZXMgPSBkYXRhLmRhdGE7CiAgICAgIH0pOwogICAgfSwKICAgIHNlYXJjaE5hbWUoKSB7CiAgICAgIHRoaXMuZmlsdGVycy5zZWFyY2ggPSB0aGlzLnNlYXJjaDsKICAgICAgaWYgKCF0aGlzLmF3YWl0aW5nU2VhcmNoKSB7CiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgICB0aGlzLmF3YWl0aW5nU2VhcmNoID0gZmFsc2U7CiAgICAgICAgICB0aGlzLnVwZGF0ZUZpbHRlcigpOwogICAgICAgIH0sIDEwMDApOyAvLyAxIHNlYyBkZWxheQogICAgICB9CgogICAgICB0aGlzLmF3YWl0aW5nU2VhcmNoID0gdHJ1ZTsKICAgIH0sCiAgICB1cGRhdGVGaWx0ZXIoKSB7CiAgICAgIHRoaXMuZmlsdGVycy5wYWdlTnVtID0gMTsKICAgICAgdGhpcy5maWx0ZXJzLnBlclBhZ2UgPSAyMDsKICAgICAgdGhpcy5zdHVkZW50cyA9IFtdOwogICAgICB0aGlzLmZpbHRlckNvdW50Kys7CiAgICB9LAogICAgZ29Ub1N0dWRlbnRTaG93KHN0dWRlbnRJRCkgewogICAgICByb3V0ZXIucHVzaCh7CiAgICAgICAgbmFtZTogJ3N0dWRlbnQucHJvZmlsZS5zaG93JywKICAgICAgICBwYXJhbXM6IHsKICAgICAgICAgIHN0dWRlbnRJRDogc3R1ZGVudElECiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICB0YWdnaW5nQ2xhc3Moc3RhdHVzQ29sb3IpIHsKICAgICAgc3dpdGNoIChzdGF0dXNDb2xvcikgewogICAgICAgIGNhc2UgJ25ldXRyYWwnOgogICAgICAgICAgcmV0dXJuICcnOwogICAgICAgIGNhc2UgJ3JlZCc6CiAgICAgICAgICByZXR1cm4gJ3RleHQtcmVkLXByaW1hcnknOwogICAgICAgIGNhc2UgJ3llbGxvdyc6CiAgICAgICAgICByZXR1cm4gInRleHQteWVsbG93LXByaW1hcnkiOwogICAgICAgIGNhc2UgJ2dyZWVuJzoKICAgICAgICAgIHJldHVybiAidGV4dC1ncmVlbi1wcmltYXJ5IjsKICAgICAgfQogICAgfQogIH0sCiAgY3JlYXRlZCgpIHsKICAgIC8vIHRoaXMuZmV0Y2hEYXRhKCkKICB9LAogIG1vdW50ZWQoKSB7CiAgICB0aGlzLmdldFN0dWRlbnRQZXJmb3JtYW5jZSgpOwogIH0sCiAgY29tcG9uZW50czogewogICAgSWNvbkJhc2VUd28sCiAgICBUYWdnaW5nSWNvbiwKICAgIFByb2ZpbGVQaG90bywKICAgIEljb25CYXNlLAogICAgSW5maW5pdGVMb2FkaW5nCiAgfQp9Ow=="},{"version":3,"names":["TeacherRepository","IconBase","ProfilePhoto","router","TaggingIcon","IconBaseTwo","StudentRepository","InfiniteLoading","name","props","search","String","data","error","loading","awaitingSearch","filterCount","filters","pageNum","perPage","meta","students","performances","watch","computed","hasLoadMore","last_page","methods","handleInfiniteScroll","$state","getTeacherStudents","then","response","i","length","push","current_page","loaded","complete","getStudentPerformance","searchName","setTimeout","updateFilter","goToStudentShow","studentID","params","taggingClass","statusColor","created","mounted","components"],"sources":["src/views/teachers/TeachersStudents/StudentsList.vue"],"sourcesContent":["<template>\n  <div>\n    <div v-for=\"student in students\"\n         :key=\"student.id\"\n         @click=\"goToStudentShow(student.id)\"\n         class=\"text-left px-5 py-2 h-20 flex flex-row w-full border-b-1 items-center bg-white\"\n    >\n      <div class=\"flex flex-row items-center w-11/12\">\n        <icon-base-two class=\" w-1/6\" icon-name=\"profile-photo-icon\" icon-color=\"white\" view-box=\"0 0 60 55\">\n          <profile-photo :gender=\"student.gender\"/>\n        </icon-base-two>\n        <div class=\"w-5/6 ml-5 text-purple-primary  truncate pr-4\"> {{ student.name }}</div>\n      </div>\n      <div v-for=\"performance in performances\"\n           v-if=\"performance.student_id === student.id \"\n           class=\" w-1/12\"\n      >\n        <icon-base-two :class=\"taggingClass(performance.status_color)\" class=\"w-5/6\">\n          <tagging-icon/>\n        </icon-base-two>\n      </div>\n    </div>\n\n    <infinite-loading :identifier=\"filterCount\"\n                      @infinite=\"handleInfiniteScroll\"\n                      spinner=\"bubbles\"\n                      force-use-infinite-wrapper\n    >\n      <div slot=\"spinner\" class=\"mt-10\">Loading...</div>\n      <div slot=\"no-more\"></div>\n      <div slot=\"no-results\">No results message</div>\n    </infinite-loading>\n\n  </div>\n</template>\n\n<script>\nimport TeacherRepository from \"@/repositories/TeacherRepository\";\nimport IconBase from \"@/components/IconBase\";\nimport ProfilePhoto from \"@/components/icons/ProfilePhoto\";\nimport router from \"@/router\";\nimport TaggingIcon from \"../../../components/icons/TaggingIcon\";\nimport IconBaseTwo from \"../../../components/IconBaseTwo\";\nimport StudentRepository from \"@/repositories/StudentRepository\";\nimport InfiniteLoading from \"vue-infinite-loading\";\n\n\nexport default {\n  name: \"StudentsList\",\n  props: {\n    search: String\n  },\n  data() {\n    return {\n\n      // states\n      error: null,\n      loading: false,\n      awaitingSearch: false,\n\n      filterCount: 0,\n      filters: {\n        pageNum: 1,\n        perPage: 20,\n        search: ''\n      },\n      meta: null,\n\n      // data\n      students: [],\n      performances: null\n    }\n  },\n  watch: {\n    '$route': 'fetchData',\n    'search': 'searchName'\n  },\n  computed: {\n    hasLoadMore() {\n      if (this.meta) {\n        return this.filters.pageNum <= this.meta.last_page\n      } else {\n        return true;\n      }\n    },\n  },\n  methods: {\n\n    handleInfiniteScroll($state) {\n\n      if (this.hasLoadMore) {\n\n        TeacherRepository.getTeacherStudents(this.filters)\n            .then(response => {\n\n              let data = response.data.data\n\n              for (let i = 0; i < data.length; i++) {\n                this.students.push(data[i]);\n              }\n\n              // Update meta details and pageNum for filters\n              this.meta = response.data.meta;\n              this.filters.pageNum = this.meta.current_page + 1;\n\n              $state.loaded();\n\n            })\n\n      } else {\n        $state.complete();\n      }\n    },\n\n    getStudentPerformance() {\n      TeacherRepository.getStudentPerformance()\n          .then(response => {\n            let data = response.data;\n\n            this.performances = data.data;\n          })\n    },\n\n    searchName() {\n\n      this.filters.search = this.search;\n\n      if (!this.awaitingSearch) {\n        setTimeout(() => {\n          this.awaitingSearch = false;\n          this.updateFilter();\n        }, 1000); // 1 sec delay\n      }\n      this.awaitingSearch = true;\n    },\n\n    updateFilter() {\n      this.filters.pageNum = 1\n      this.filters.perPage = 20\n\n      this.students = [];\n      this.filterCount++;\n    },\n\n    goToStudentShow(studentID) {\n      router.push({name: 'student.profile.show', params: {studentID: studentID}})\n    },\n\n    taggingClass(statusColor) {\n\n      switch (statusColor) {\n        case 'neutral' :\n          return '';\n        case 'red':\n          return 'text-red-primary';\n        case 'yellow':\n          return \"text-yellow-primary\";\n        case 'green':\n          return \"text-green-primary\";\n      }\n    }\n  },\n  created() {\n    // this.fetchData()\n  },\n  mounted() {\n    this.getStudentPerformance()\n  },\n  components: {IconBaseTwo, TaggingIcon, ProfilePhoto, IconBase, InfiniteLoading},\n\n}\n</script>\n\n<style scoped>\n\n</style>\n"],"mappings":";AAqCA,OAAAA,iBAAA;AACA,OAAAC,QAAA;AACA,OAAAC,YAAA;AACA,OAAAC,MAAA;AACA,OAAAC,WAAA;AACA,OAAAC,WAAA;AACA,OAAAC,iBAAA;AACA,OAAAC,eAAA;AAGA;EACAC,IAAA;EACAC,KAAA;IACAC,MAAA,EAAAC;EACA;EACAC,KAAA;IACA;MAEA;MACAC,KAAA;MACAC,OAAA;MACAC,cAAA;MAEAC,WAAA;MACAC,OAAA;QACAC,OAAA;QACAC,OAAA;QACAT,MAAA;MACA;MACAU,IAAA;MAEA;MACAC,QAAA;MACAC,YAAA;IACA;EACA;EACAC,KAAA;IACA;IACA;EACA;EACAC,QAAA;IACAC,YAAA;MACA,SAAAL,IAAA;QACA,YAAAH,OAAA,CAAAC,OAAA,SAAAE,IAAA,CAAAM,SAAA;MACA;QACA;MACA;IACA;EACA;EACAC,OAAA;IAEAC,qBAAAC,MAAA;MAEA,SAAAJ,WAAA;QAEAzB,iBAAA,CAAA8B,kBAAA,MAAAb,OAAA,EACAc,IAAA,CAAAC,QAAA;UAEA,IAAApB,IAAA,GAAAoB,QAAA,CAAApB,IAAA,CAAAA,IAAA;UAEA,SAAAqB,CAAA,MAAAA,CAAA,GAAArB,IAAA,CAAAsB,MAAA,EAAAD,CAAA;YACA,KAAAZ,QAAA,CAAAc,IAAA,CAAAvB,IAAA,CAAAqB,CAAA;UACA;;UAEA;UACA,KAAAb,IAAA,GAAAY,QAAA,CAAApB,IAAA,CAAAQ,IAAA;UACA,KAAAH,OAAA,CAAAC,OAAA,QAAAE,IAAA,CAAAgB,YAAA;UAEAP,MAAA,CAAAQ,MAAA;QAEA;MAEA;QACAR,MAAA,CAAAS,QAAA;MACA;IACA;IAEAC,sBAAA;MACAvC,iBAAA,CAAAuC,qBAAA,GACAR,IAAA,CAAAC,QAAA;QACA,IAAApB,IAAA,GAAAoB,QAAA,CAAApB,IAAA;QAEA,KAAAU,YAAA,GAAAV,IAAA,CAAAA,IAAA;MACA;IACA;IAEA4B,WAAA;MAEA,KAAAvB,OAAA,CAAAP,MAAA,QAAAA,MAAA;MAEA,UAAAK,cAAA;QACA0B,UAAA;UACA,KAAA1B,cAAA;UACA,KAAA2B,YAAA;QACA;MACA;;MACA,KAAA3B,cAAA;IACA;IAEA2B,aAAA;MACA,KAAAzB,OAAA,CAAAC,OAAA;MACA,KAAAD,OAAA,CAAAE,OAAA;MAEA,KAAAE,QAAA;MACA,KAAAL,WAAA;IACA;IAEA2B,gBAAAC,SAAA;MACAzC,MAAA,CAAAgC,IAAA;QAAA3B,IAAA;QAAAqC,MAAA;UAAAD,SAAA,EAAAA;QAAA;MAAA;IACA;IAEAE,aAAAC,WAAA;MAEA,QAAAA,WAAA;QACA;UACA;QACA;UACA;QACA;UACA;QACA;UACA;MAAA;IAEA;EACA;EACAC,QAAA;IACA;EAAA,CACA;EACAC,QAAA;IACA,KAAAV,qBAAA;EACA;EACAW,UAAA;IAAA7C,WAAA;IAAAD,WAAA;IAAAF,YAAA;IAAAD,QAAA;IAAAM;EAAA;AAEA"}]}