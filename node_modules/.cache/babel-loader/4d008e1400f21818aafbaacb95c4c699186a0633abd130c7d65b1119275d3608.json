{"ast":null,"code":"import { createCommentVNode as _createCommentVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createBlock as _createBlock, toDisplayString as _toDisplayString, createVNode as _createVNode, createElementVNode as _createElementVNode, normalizeClass as _normalizeClass } from \"vue\";\nconst _hoisted_1 = {\n  key: 2,\n  class: \"fixed left-0 w-full items-center flex flex-col items-center justify-center top-1/4 z-70\"\n};\nconst _hoisted_2 = {\n  class: \"relative\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_modal = _resolveComponent(\"modal\");\n  const _component_page_header = _resolveComponent(\"page-header\");\n  const _component_router_view = _resolveComponent(\"router-view\");\n  const _component_bottom_bar = _resolveComponent(\"bottom-bar\");\n  return _openBlock(), _createElementBlock(\"div\", {\n    class: _normalizeClass([$options.containerClass, \"h-full md:max-w-xl mx-auto\"]),\n    ref: \"container\"\n  }, [_createCommentVNode(\"-------------------\\n            OVERLAYS\\n     -------------------\"), _ctx.$store.state.teacherMarking.states.isShowingModal ? (_openBlock(), _createElementBlock(\"div\", {\n    key: 0,\n    onClick: _cache[0] || (_cache[0] = $event => $options.toggleModalMode()),\n    class: \"fixed w-full bg-black-primary bg-opacity-25 h-screen z-70 flex flex-col justify-center items-center inset-x-0 block top-0\"\n  })) : _createCommentVNode(\"v-if\", true), _ctx.$store.state.teacherMarking.states.isSelectingSticker ? (_openBlock(), _createElementBlock(\"div\", {\n    key: 1,\n    onClick: _cache[1] || (_cache[1] = (...args) => $options.toggleStickerBar && $options.toggleStickerBar(...args)),\n    class: \"fixed w-full h-screen z-70 flex flex-col justify-center items-center inset-x-0 block top-0\"\n  })) : _createCommentVNode(\"v-if\", true), _createCommentVNode(\"-------------------\\n            MODAL\\n     -------------------\"), _ctx.$store.state.teacherMarking.states.isShowingModal ? (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createCommentVNode(\" ERROR: Missing mark. Prompt user to add mark before submitting  \"), _ctx.$store.state.teacherMarking.nowShowingModal === 'error_missing_mark' ? (_openBlock(), _createBlock(_component_modal, {\n    key: 0,\n    \"modal-type\": \"error\",\n    onToggleModal: _cache[2] || (_cache[2] = $event => $options.toggleModalMode()),\n    class: \"w-4/5\"\n  }, {\n    default: _withCtx(() => [_createTextVNode(\" You must add mark for this assignment. \" + \" \" + \" Okay \")], undefined, true),\n    _: 1 /* STABLE */\n  })) : _createCommentVNode(\"v-if\", true), _createCommentVNode(\" ERROR: Invalid image type. Some photos not converted to dataURL yet.  \"), _ctx.$store.state.teacherMarking.nowShowingModal === 'error_invalid_image_type' ? (_openBlock(), _createBlock(_component_modal, {\n    key: 1,\n    \"modal-type\": \"error\",\n    onToggleModal: _cache[3] || (_cache[3] = $event => $options.toggleModalMode()),\n    class: \"w-4/5\"\n  }, {\n    default: _withCtx(() => [_createTextVNode(\" Please retry. \" + \" \" + \" Okay \")], undefined, true),\n    _: 1 /* STABLE */\n  })) : _createCommentVNode(\"v-if\", true), _createCommentVNode(\" ERROR: Submissions failed  \"), _ctx.$store.state.teacherMarking.nowShowingModal === 'error_submit_markings' ? (_openBlock(), _createBlock(_component_modal, {\n    key: 2,\n    \"modal-type\": \"error\",\n    onToggleModal: _cache[4] || (_cache[4] = $event => $options.toggleModalMode()),\n    class: \"w-4/5\"\n  }, {\n    default: _withCtx(() => [_createTextVNode(_toDisplayString(_ctx.$store.state.teacherMarking.states.errorMessages || 'Oops! There seems to be an error in your submission.') + \" \" + \" Okay \", 1 /* TEXT */)], undefined, true),\n    _: 1 /* STABLE */\n  })) : _createCommentVNode(\"v-if\", true), _ctx.$store.state.teacherMarking.nowShowingModal === 'is_checking' ? (_openBlock(), _createBlock(_component_modal, {\n    key: 3,\n    onToggleModal: _cache[5] || (_cache[5] = $event => $options.toggleModalMode()),\n    \"modal-type\": \"no-icon\",\n    \"has-button\": false,\n    class: \"w-4/5\"\n  }, {\n    default: _withCtx(() => [_createTextVNode(\" Checking... \")], undefined, true),\n    _: 1 /* STABLE */\n  })) : _createCommentVNode(\"v-if\", true), _ctx.$store.state.teacherMarking.nowShowingModal === 'is_submitting' ? (_openBlock(), _createBlock(_component_modal, {\n    key: 4,\n    onToggleModal: _cache[6] || (_cache[6] = $event => $options.toggleModalMode()),\n    \"has-button\": false,\n    class: \"w-4/5\"\n  }, {\n    default: _withCtx(() => [_createTextVNode(\" Submitting marking... \")], undefined, true),\n    _: 1 /* STABLE */\n  })) : _createCommentVNode(\"v-if\", true)])) : _createCommentVNode(\"v-if\", true), _createCommentVNode(\" HEADER \"), _createVNode(_component_page_header), _createCommentVNode(\" CONTENT \"), _createElementVNode(\"div\", _hoisted_2, [_createVNode(_component_router_view)]), _createCommentVNode(\" BOTTOM \"), _createVNode(_component_bottom_bar)], 2 /* CLASS */);\n}","map":{"version":3,"names":["class","_createElementBlock","_normalizeClass","$options","containerClass","ref","_createCommentVNode","_ctx","$store","state","teacherMarking","states","isShowingModal","onClick","_cache","$event","toggleModalMode","isSelectingSticker","args","toggleStickerBar","_hoisted_1","nowShowingModal","_createBlock","_component_modal","onToggleModal","errorMessages","_createVNode","_component_page_header","_createElementVNode","_hoisted_2","_component_router_view","_component_bottom_bar"],"sources":["/Users/erwinkarim/Websites/Snapped/snapped-mobile-master/src/views/teachers/TeacherAssignments/Mark/Index.vue"],"sourcesContent":["<template>\n  <div :class=\"containerClass\" ref=\"container\"\n       class=\"h-full md:max-w-xl mx-auto\"\n  >\n\n    <!---------------------\n            OVERLAYS\n     --------------------->\n    <div v-if=\"$store.state.teacherMarking.states.isShowingModal\" @click=\"toggleModalMode()\"\n         class=\"fixed w-full bg-black-primary bg-opacity-25 h-screen z-70 flex flex-col justify-center items-center inset-x-0 block top-0 \">\n    </div>\n    <div v-if=\"$store.state.teacherMarking.states.isSelectingSticker\" @click=\"toggleStickerBar\"\n         class=\"fixed w-full h-screen z-70 flex flex-col justify-center items-center inset-x-0 block top-0 \">\n    </div>\n\n\n    <!---------------------\n            MODAL\n     --------------------->\n    <div v-if=\"$store.state.teacherMarking.states.isShowingModal\"\n         class=\"fixed left-0 w-full items-center flex flex-col items-center justify-center top-1/4 z-70\">\n\n      <!-- ERROR: Missing mark. Prompt user to add mark before submitting  -->\n      <modal v-if=\"$store.state.teacherMarking.nowShowingModal === 'error_missing_mark'\"\n             modal-type=\"error\"\n             @toggleModal=\"toggleModalMode()\"\n             class=\"w-4/5 \"\n      >\n        <template slot=\"message\">\n          You must add mark for this assignment.\n        </template>\n        <template slot=\"button\">\n          Okay\n        </template>\n      </modal>\n\n      <!-- ERROR: Invalid image type. Some photos not converted to dataURL yet.  -->\n      <modal v-if=\"$store.state.teacherMarking.nowShowingModal === 'error_invalid_image_type'\"\n             modal-type=\"error\"\n             @toggleModal=\"toggleModalMode()\"\n             class=\"w-4/5 \"\n      >\n        <template slot=\"message\">\n          Please retry.\n        </template>\n        <template slot=\"button\">\n          Okay\n        </template>\n      </modal>\n\n      <!-- ERROR: Submissions failed  -->\n      <modal v-if=\"$store.state.teacherMarking.nowShowingModal === 'error_submit_markings'\"\n             modal-type=\"error\"\n             @toggleModal=\"toggleModalMode()\"\n             class=\"w-4/5 \"\n      >\n        <template slot=\"message\">\n          {{ $store.state.teacherMarking.states.errorMessages || 'Oops! There seems to be an error in your submission.'}}\n        </template>\n        <template slot=\"button\">\n          Okay\n        </template>\n      </modal>\n\n      <modal v-if=\"$store.state.teacherMarking.nowShowingModal === 'is_checking'\"\n          @toggleModal=\"toggleModalMode()\"\n             modal-type=\"no-icon\"\n             :has-button=\"false\"\n             class=\"w-4/5 \"\n      >\n        <template slot=\"message\">\n          Checking...\n        </template>\n      </modal>\n\n      <modal v-if=\"$store.state.teacherMarking.nowShowingModal === 'is_submitting'\"\n          @toggleModal=\"toggleModalMode()\"\n             :has-button=\"false\"\n             class=\"w-4/5 \"\n      >\n        <template slot=\"message\">\n          Submitting marking...\n        </template>\n      </modal>\n\n    </div>\n\n    <!-- HEADER -->\n    <page-header/>\n\n    <!-- CONTENT -->\n    <div class=\"relative\">\n      <router-view/>\n    </div>\n\n    <!-- BOTTOM -->\n    <bottom-bar/>\n\n  </div>\n</template>\n\n<script>\nimport PageHeaderThree from \"@/components/PageHeaderThree\";\nimport NavBack from \"@/components/NavBack\";\nimport IconBaseTwo from \"@/components/IconBaseTwo\";\nimport ArrowBackIcon from \"@/components/icons/ArrowBackIcon\";\nimport ExpandImageIcon from \"@/components/icons/ExpandImageIcon\";\nimport BottomBar from \"@/views/teachers/TeacherAssignments/Mark/Components/BottomBar\";\nimport SubmissionRepository from \"@/repositories/SubmissionRepository\";\nimport Modal from \"@/components/Modal\";\nimport MarksRepository from \"@/repositories/teachers/MarksRepository\";\nimport router from \"@/router\";\nimport moment from \"moment\";\nimport UndoIcon from \"@/components/icons/UndoIcon\";\nimport PageHeader from \"@/views/teachers/TeacherAssignments/Mark/Components/PageHeader\";\n\nexport default {\n  name: \"Index\",\n  props: {\n    submissionID: [String, Number],\n    markID: [String, Number],\n  },\n\n  watch: {\n    '$route': 'handleRouteChange',\n  },\n  computed: {\n\n    containerClass: function () {\n      let value = 'bg-white mb-40 ';\n\n      if (this.$store.state.teacherMarking.states.isMarking) {\n        value = 'bg-black-primary';\n      }\n\n      return value;\n    },\n\n\n  },\n  methods: {\n    handleRouteChange() {\n\n      this.scrollToTop();\n\n\n      let path = this.$route.name;\n\n      if (path === 'teacher.assignments.marking.details' && !this.$store.state.teacherMarking.states.isPreviewing) {\n        this.$store.commit('teacherMarking/setMainMode')\n      }\n\n      if (path === 'teacher.assignments.marking.feedback') {\n        this.$store.commit('teacherMarking/setWritingFeedbackMode')\n      }\n    },\n\n    toggleStickerBar() {\n      this.$store.commit(\"teacherMarking/toggleStickerBar\")\n    },\n\n    toggleModalMode() {\n      this.$store.commit('teacherMarking/toggleModalMode')\n    },\n\n    scrollToTop() {\n      window.scroll({\n        top: 0,\n        left: 0,\n        behavior: 'smooth'\n      });\n    },\n  },\n  mounted() {\n    // this.$store.commit('teacherMarking/setInitialCanvasDimensions')\n    this.$store.commit('teacherMarking/setInitialCanvasDimensions', this.$refs.container.clientWidth, this.$refs.container.clientHeight)\n    this.$store.dispatch('teacherMarking/fetchData', this.submissionID)\n        .then(response => {\n          this.$store.dispatch(\"teacherMarking/bulkConvertSubmissionsToDataURL\")\n        })\n  },\n  destroyed() {\n    this.$store.commit('teacherMarking/resetState')\n  },\n  components: {\n    PageHeader,\n    UndoIcon, Modal, BottomBar, ExpandImageIcon, ArrowBackIcon, IconBaseTwo, NavBack, PageHeaderThree\n  },\n\n}\n</script>\n\n<style scoped>\n\n</style>\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}