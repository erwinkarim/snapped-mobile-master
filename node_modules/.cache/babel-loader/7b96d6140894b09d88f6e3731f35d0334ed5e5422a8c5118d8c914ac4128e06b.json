{"ast":null,"code":"import { resolveComponent as _resolveComponent, createVNode as _createVNode, withCtx as _withCtx, createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, openBlock as _openBlock, createElementBlock as _createElementBlock, createBlock as _createBlock } from \"vue\";\nconst _hoisted_1 = {\n  class: \"fixed top-20 md:top-24 px-5 pt-4 z-40 bg-white w-full md:max-w-xl border-b-1/4 border-opacity-10 border-gray-100 shadow-md-soft md:shadow-none pb-4\"\n};\nconst _hoisted_2 = {\n  key: 0,\n  class: \"flex flex-row items-center items-center px-2\"\n};\nconst _hoisted_3 = {\n  class: \"w-3/12 mr-2\"\n};\nconst _hoisted_4 = {\n  class: \"flex flex-col w-full text-left w-3/5 truncate\"\n};\nconst _hoisted_5 = {\n  class: \"text-purple-primary font-bold\"\n};\nconst _hoisted_6 = {\n  class: \"flex flex-row text-purple-secondary text-px-13 mt-1\"\n};\nconst _hoisted_7 = {\n  class: \"pr-6\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_nav_back = _resolveComponent(\"nav-back\");\n  const _component_page_header_three = _resolveComponent(\"page-header-three\");\n  const _component_profile_photo = _resolveComponent(\"profile-photo\");\n  const _component_icon_base_two = _resolveComponent(\"icon-base-two\");\n  const _component_ranking_panel = _resolveComponent(\"ranking-panel\");\n  const _component_tab_bar = _resolveComponent(\"tab-bar\");\n  const _component_router_view = _resolveComponent(\"router-view\");\n  const _component_dashboard_layout = _resolveComponent(\"dashboard-layout\");\n  return _openBlock(), _createBlock(_component_dashboard_layout, null, {\n    pageHeader: _withCtx(() => [_createVNode(_component_page_header_three, null, {\n      leftAction: _withCtx(() => [_createVNode(_component_nav_back, {\n        to: $options.handleNavBackRoute,\n        class: \"w-2/7\",\n        \"stroke-color\": \"red-primary\"\n      }, null, 8 /* PROPS */, [\"to\"])]),\n      _: 1 /* STABLE */\n    })]),\n\n    content: _withCtx(() => [_createElementVNode(\"div\", _hoisted_1, [_createCommentVNode(\" SECTION: STUDENT DETAILS \"), $data.isLoading ? (_openBlock(), _createElementBlock(\"div\", _hoisted_2, [_createElementVNode(\"div\", _hoisted_3, [_createVNode(_component_icon_base_two, null, {\n      default: _withCtx(() => [_createVNode(_component_profile_photo, {\n        gender: $data.studentDetails.gender\n      }, null, 8 /* PROPS */, [\"gender\"])], undefined, true),\n      _: 1 /* STABLE */\n    })]), _createElementVNode(\"div\", _hoisted_4, [_createElementVNode(\"h1\", _hoisted_5, _toDisplayString($data.studentDetails.studentName), 1 /* TEXT */), _createElementVNode(\"div\", _hoisted_6, [_createElementVNode(\"span\", _hoisted_7, _toDisplayString($data.studentDetails.className || ''), 1 /* TEXT */), _createElementVNode(\"span\", null, _toDisplayString($options.nowDate || ''), 1 /* TEXT */)])])])) : _createCommentVNode(\"v-if\", true), _createVNode(_component_ranking_panel, {\n      class: \"mt-5\"\n    }), _createCommentVNode(\" SECTION: TABS \"), _createVNode(_component_tab_bar, {\n      \"user-role\": $data.authUser.role,\n      \"is-auth-student\": $options.isAuthStudent\n    }, null, 8 /* PROPS */, [\"user-role\", \"is-auth-student\"])]), _createVNode(_component_router_view, {\n      class: \"top-98 relative mb-24\",\n      \"user-role\": $data.authUser.role,\n      \"is-auth-student\": $options.isAuthStudent\n    }, null, 8 /* PROPS */, [\"user-role\", \"is-auth-student\"])]),\n    _: 1 /* STABLE */\n  });\n}","map":{"version":3,"names":["class","_createBlock","_component_dashboard_layout","pageHeader","_withCtx","_createVNode","_component_page_header_three","leftAction","_component_nav_back","to","$options","handleNavBackRoute","content","_createElementVNode","_hoisted_1","_createCommentVNode","$data","isLoading","_createElementBlock","_hoisted_2","_hoisted_3","_component_icon_base_two","_component_profile_photo","gender","studentDetails","_hoisted_4","_hoisted_5","_toDisplayString","studentName","_hoisted_6","_hoisted_7","className","nowDate","_component_ranking_panel","_component_tab_bar","authUser","role","isAuthStudent","_component_router_view"],"sources":["/Users/erwinkarim/Websites/Snapped/snapped-mobile-master/src/views/students/StudentDetails/StudentDetails.vue"],"sourcesContent":["<template>\n  <dashboard-layout>\n\n    <template v-slot:pageHeader>\n      <page-header-three>\n        <template v-slot:leftAction>\n          <nav-back :to=\"handleNavBackRoute\" class=\"w-2/7\" stroke-color=\"red-primary\"/>\n        </template>\n      </page-header-three>\n    </template>\n\n    <template v-slot:content>\n      <div\n          class=\"fixed top-20 md:top-24 px-5 pt-4 z-40 bg-white w-full md:max-w-xl border-b-1/4 border-opacity-10 border-gray-100 shadow-md-soft md:shadow-none pb-4\">\n\n        <!-- SECTION: STUDENT DETAILS -->\n        <div v-if=\"isLoading\" class=\"flex flex-row items-center items-center px-2\">\n\n          <div class=\"w-3/12 mr-2\">\n            <icon-base-two>\n              <profile-photo :gender=\"studentDetails.gender\"/>\n            </icon-base-two>\n          </div>\n\n          <div class=\"flex flex-col w-full text-left w-3/5  truncate\">\n            <h1 class=\"text-purple-primary font-bold \">\n              {{ studentDetails.studentName }}\n            </h1>\n\n            <div class=\"flex flex-row text-purple-secondary text-px-13 mt-1\">\n              <span class=\"pr-6\">{{ studentDetails.className || '' }}</span>\n              <span>{{ nowDate || '' }}</span>\n            </div>\n          </div>\n        </div>\n\n        <ranking-panel class=\"mt-5\"/>\n\n        <!-- SECTION: TABS -->\n        <tab-bar\n            :user-role=\"authUser.role\"\n            :is-auth-student=\"isAuthStudent\"\n        />\n\n      </div>\n\n      <router-view class=\"top-98 relative mb-24\"\n                   :user-role=\"authUser.role\"\n                   :is-auth-student=\"isAuthStudent\"\n      />\n\n    </template>\n\n\n  </dashboard-layout>\n</template>\n\n<script>\nimport DashboardLayout from \"@/views/layout/DashboardLayout\";\nimport NavBack from \"@/components/NavBack\";\nimport IconBase from \"@/components/IconBase\";\nimport ProfilePhoto from \"@/components/icons/ProfilePhoto\";\nimport moment from \"moment\";\nimport StudentRepository from \"@/repositories/StudentRepository\";\nimport CircleProgressBar from \"@/components/CircleProgressBar\";\nimport RankingPanel from \"@/views/students/StudentDetails/components/RankingPanel\";\nimport router from \"@/router\";\nimport PageTitleTwo from \"@/components/PageTitleTwo\";\nimport PageHeaderThree from \"@/components/PageHeaderThree\";\nimport TabBar from \"@/views/students/StudentDetails/components/TabBar\";\nimport IconBaseTwo from \"@/components/IconBaseTwo\";\n\nexport default {\n  name: \"StudentDetails\",\n  props: {\n    studentID: [String, Number]\n  },\n  data() {\n    return {\n\n      // Status\n      isLoading: false,\n\n      authUser: null,\n      studentDetails: '',\n      studentOverview: '',\n      path: '',\n      navBackRoute: 'home'\n    }\n  },\n  watch: {\n    '$route': 'handleRouteChange',\n  },\n  computed: {\n    handleNavBackRoute() {\n      if (this.navBackRoute === 'home') {\n        if (this.userRole === 'Student') {\n          return {name: 'student.home'}\n        }\n        if (this.userRole === 'Teacher') {\n          return {name: 'teacher.home'}\n        }\n      } else {\n        return {name: this.navBackRoute.name, params: this.navBackRoute.params}\n      }\n    },\n    userRole() {\n      return this.authUser.role;\n    },\n    isAuthStudent() {\n      if (this.authUser.role === 'Student') {\n        return parseInt(this.authUser.id) === parseInt(this.studentID)\n      } else {\n        return null\n      }\n    },\n\n    nowDate() {\n      const date = moment(this.nowDatetime, \"YYYY-MM-DD hh:mm:ss\").format('YYYY-MM-DD')\n      return date === 'Invalid date' ? moment().format('DD MMMM YYYY') : date\n    },\n    nowTime() {\n      const time = moment(this.nowDatetime, \"YYYY-MM-DD hh:mm:ss\").format('hh:mm A')\n      return time === 'Invalid date' ? moment().format('hh:mm A') : time\n    },\n  },\n\n  methods: {\n\n    handleRouteChange() {\n      if (this.userRole !== 'Teacher' && !this.isAuthStudent) {\n        if (this.$route.name !== 'student.profile.show') {\n          router.push({name: 'student.profile.show'})\n        }\n      }\n    },\n    fetchData() {\n\n      StudentRepository.getOverview(this.studentID)\n          .then(response => {\n\n            if (response.data.success) {\n\n              let data = response.data.data;\n\n              this.studentDetails = {\n                studentName: data.student_details.student_name,\n                gender: data.student_details.gender,\n                className: data.student_details.student_class,\n                contactNum: data.personal_details.contact_number,\n                email: data.personal_details.email\n              }\n\n              this.isLoading = true;\n            }\n          })\n    },\n\n    getRouteParams() {\n      this.path = this.$route.path\n    },\n\n\n    getAuthUser() {\n      let user = this.$store.getters.getAuthUser\n\n      this.authUser = {\n        id: user.id,\n        role: user.role\n      }\n    }\n\n  },\n\n  beforeRouteEnter(to, from, next) {\n    return next(vm => {\n      vm.prevRoute = from\n    })\n  },\n\n  created() {\n    if (this.$route.name !== 'student.profile.show') {\n      router.push({name: 'student.profile.show'})\n    }\n    this.fetchData()\n    this.getAuthUser()\n  },\n  mounted() {\n    if (this.prevRoute.name) {\n      this.navBackRoute = {\n        name: this.prevRoute.name,\n        params: this.prevRoute.params\n      };\n    } else {\n      this.navBackRoute = 'home'\n    }\n  },\n  components: {\n    IconBaseTwo,\n    TabBar,\n    PageHeaderThree,\n    PageTitleTwo, RankingPanel, CircleProgressBar, ProfilePhoto, IconBase, NavBack, DashboardLayout\n  }\n}\n</script>\n\n<style scoped>\n\n</style>\n"],"mappings":";;EAaUA,KAAK,EAAC;AAAqJ;;;EAGvIA,KAAK,EAAC;;;EAErBA,KAAK,EAAC;AAAa;;EAMnBA,KAAK,EAAC;AAAgD;;EACrDA,KAAK,EAAC;AAAgC;;EAIrCA,KAAK,EAAC;AAAqD;;EACxDA,KAAK,EAAC;AAAM;;;;;;;;;;uBA7B9BC,YAAA,CAqDmBC,2BAAA;IAnDAC,UAAU,EAAAC,QAAA,CACzB,MAIoB,CAJpBC,YAAA,CAIoBC,4BAAA;MAHDC,UAAU,EAAAH,QAAA,CACzB,MAA6E,CAA7EC,YAAA,CAA6EG,mBAAA;QAAlEC,EAAE,EAAEC,QAAA,CAAAC,kBAAkB;QAAEX,KAAK,EAAC,OAAO;QAAC,cAAY,EAAC;;;;;IAKnDY,OAAO,EAAAR,QAAA,CACtB,MAgCM,CAhCNS,mBAAA,CAgCM,OAhCNC,UAgCM,GA7BJC,mBAAA,8BAAiC,EACtBC,KAAA,CAAAC,SAAS,I,cAApBC,mBAAA,CAkBM,OAlBNC,UAkBM,GAhBJN,mBAAA,CAIM,OAJNO,UAIM,GAHJf,YAAA,CAEgBgB,wBAAA;wBADd,MAAgD,CAAhDhB,YAAA,CAAgDiB,wBAAA;QAAhCC,MAAM,EAAEP,KAAA,CAAAQ,cAAc,CAACD;;;UAI3CV,mBAAA,CASM,OATNY,UASM,GARJZ,mBAAA,CAEK,MAFLa,UAEK,EAAAC,gBAAA,CADAX,KAAA,CAAAQ,cAAc,CAACI,WAAW,kBAG/Bf,mBAAA,CAGM,OAHNgB,UAGM,GAFJhB,mBAAA,CAA8D,QAA9DiB,UAA8D,EAAAH,gBAAA,CAAxCX,KAAA,CAAAQ,cAAc,CAACO,SAAS,wBAC9ClB,mBAAA,CAAgC,cAAAc,gBAAA,CAAvBjB,QAAA,CAAAsB,OAAO,uB,4CAKtB3B,YAAA,CAA6B4B,wBAAA;MAAdjC,KAAK,EAAC;IAAM,IAE3Be,mBAAA,mBAAsB,EACtBV,YAAA,CAGE6B,kBAAA;MAFG,WAAS,EAAElB,KAAA,CAAAmB,QAAQ,CAACC,IAAI;MACxB,iBAAe,EAAE1B,QAAA,CAAA2B;iEAKxBhC,YAAA,CAGEiC,sBAAA;MAHWtC,KAAK,EAAC,uBAAuB;MAC5B,WAAS,EAAEgB,KAAA,CAAAmB,QAAQ,CAACC,IAAI;MACxB,iBAAe,EAAE1B,QAAA,CAAA2B"},"metadata":{},"sourceType":"module","externalDependencies":[]}