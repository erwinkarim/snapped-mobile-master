{"remainingRequest":"/Users/erwinkarim/Websites/Snapped/snapped-mobile-master/node_modules/thread-loader/dist/cjs.js!/Users/erwinkarim/Websites/Snapped/snapped-mobile-master/node_modules/babel-loader/lib/index.js!/Users/erwinkarim/Websites/Snapped/snapped-mobile-master/src/store/modules/teacherCreateAssignment.js","dependencies":[{"path":"/Users/erwinkarim/Websites/Snapped/snapped-mobile-master/src/store/modules/teacherCreateAssignment.js","mtime":1680008048382},{"path":"/Users/erwinkarim/Websites/Snapped/snapped-mobile-master/babel.config.js","mtime":1679379067182},{"path":"/Users/erwinkarim/Websites/Snapped/snapped-mobile-master/node_modules/cache-loader/dist/cjs.js","mtime":1680070113546},{"path":"/Users/erwinkarim/Websites/Snapped/snapped-mobile-master/node_modules/thread-loader/dist/cjs.js","mtime":1680070298752},{"path":"/Users/erwinkarim/Websites/Snapped/snapped-mobile-master/node_modules/babel-loader/lib/index.js","mtime":1680059914906}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkucHVzaC5qcyI7CmltcG9ydCBUZWFjaGVyUmVwb3NpdG9yeSBmcm9tICJAL3JlcG9zaXRvcmllcy9UZWFjaGVyUmVwb3NpdG9yeSI7CmltcG9ydCBtb21lbnQgZnJvbSAibW9tZW50IjsKaW1wb3J0IFJlcG9zaXRvcnkgZnJvbSAiQC9yZXBvc2l0b3JpZXMvUmVwb3NpdG9yeSI7CmltcG9ydCBnZXR0ZXJzIGZyb20gIkAvc3RvcmUvZ2V0dGVycyI7CmltcG9ydCB7IGdldCB9IGZyb20gInYtY2FsZW5kYXIvc3JjL3V0aWxzL18iOwoKLyoKCXN0YXRlIHRvIGhhbmRsZSBhc3NpZ25tZW50IGNyZWF0aW9ucwoJMS4gcXVlc3Rpb24gY3JlYXRpb24KCXRoZSBnaXN0IGlzIDstCgljcmVhdGlvbiBxdWVzdGlvbiA9PiBjcmVhdGluZ1F1ZXN0aW9uRGV0YWlscwoKCXdoZW4gcHJlc3MgJ3NhdmUnIChpbiBDcmVhdGVRdWVzdGlvbkZvcm0udnVlKQoJKiBzYXZlPFhYWD5Ub0RyYWYKCQkqIGNyZWF0aW5nUXVlc3Rpb25EZXRhaWxzID0+IHF1ZXN0aW9uRHJhZnQKCgl3aGVuIHByZXNzICdzYXZlJyBhZ2FpbiAoaW4gVGVhY2hlckFzc2lnbm1lbnRzL0NyZWF0ZS9JbmRleC52dWUpCgkqIGNhbGxzIHNhdmVRdWVzdGlvbgoJCSogcXVlc3Rpb25EcmFmdCA9PiBhc3NpZ25tZW50RGV0YWlscy5xdWVzdGlvbgoJCSogcXVlc3Rpb25EcmFmdCBpcyBjbGVhcmVkCgkJKiBjaGFuZ2UgdGhlIHN0YXRlIGZyb20gaXNDcmVhdGluZ1F1ZXN0aW9uIHRvIGlzV3JpdGluZ1F1ZXN0aW9uCgoJd2hlbiBwcmVzcyBwdWJsaXNoCgkqIHNlbmREYXRhIGlzIGNhbGxlZCB0byBwdXNoIHRoZSBxdWVzdGlvbiB0byB0aGUgc2VydmVyL2RiCiovCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lc3BhY2VkOiB0cnVlLAogIHN0YXRlOiAoKSA9PiAoewogICAgLy8gU1RBVEVTCiAgICBzdGF0ZXM6IHsKICAgICAgaXNNYWluOiB0cnVlLAogICAgICBpc0NyZWF0aW5nUXVlc3Rpb246IGZhbHNlLAogICAgICBpc0NyZWF0aW5nWm9vbVF1ZXN0aW9uOiBmYWxzZSwKICAgICAgaXNTZWxlY3RpbmdEdXJhdGlvbjogZmFsc2UsCiAgICAgIGlzU2VsZWN0aW5nUXVlc3Rpb25UeXBlOiBmYWxzZSwKICAgICAgaXNXcml0aW5nUXVlc3Rpb246IGZhbHNlLAogICAgICBpc1NuYXBwaW5nUXVlc3Rpb246IGZhbHNlLAogICAgICBpc1pvb21RdWVzdGlvbjogZmFsc2UsCiAgICAgIGlzQ3JvcHBpbmdTbmFwcGVkUXVlc3Rpb246IGZhbHNlLAogICAgICBpc1Jlc2V0dGluZ1F1ZXN0aW9uOiBmYWxzZSwKICAgICAgaXNTaG93aW5nU2NoZWR1bGVyOiBmYWxzZSwKICAgICAgaXNQdWJsaXNoaW5nOiBmYWxzZSwKICAgICAgaXNQdWJsaXNoZWQ6IGZhbHNlLAogICAgICBpc1Nob3dpbmdFcnJvcjogZmFsc2UsCiAgICAgIGlzSW5ab29tTWVldGluZzogZmFsc2UsCiAgICAgIGlzVmlkZW9PbjogZmFsc2UsCiAgICAgIGlzTWljT246IGZhbHNlLAogICAgICBpc1JlY29yZGluZzogZmFsc2UsCiAgICAgIGlzU2NyZWVuU2hhcmU6IGZhbHNlLAogICAgICBtZWV0aW5nX2lkOiBudWxsCiAgICB9LAogICAgLy8gTWFpbiBkZXRhaWxzIHRvIGJlIHN1Ym1pdHRlZAogICAgYXNzaWdubWVudERldGFpbHM6IHsKICAgICAgdGl0bGU6IG51bGwsCiAgICAgIHNjaG9vbF9pZDogIiIsCiAgICAgIHN1YmplY3RfaWQ6ICIiLAogICAgICBjbGFzc3Jvb21faWQ6IG51bGwsCiAgICAgIGR1ZV9kYXRldGltZTogbnVsbCwKICAgICAgcXVlc3Rpb246IHsKICAgICAgICB0eXBlOiBudWxsLAogICAgICAgIHRpdGxlOiBudWxsLAogICAgICAgIHdyaXR0ZW5RdWVzdGlvbjogbnVsbCwKICAgICAgICBzbmFwcGVkUXVlc3Rpb25zOiBbXSwKICAgICAgICBzbmFwcGVkUHJldmlld3M6IFtdLAogICAgICAgIHpvb21NZWV0aW5nczogbnVsbAogICAgICB9LAogICAgICBwdWJsaXNoZWRfYXQ6IG1vbWVudCgpCiAgICB9LAogICAgLy8gUXVlc3Rpb25zJyBkcmFmdCwgc2VydmUgYXMgdGVtcG9yYXJ5IHNhdmUgcG9pbnQgd2hpbGUgY3JlYXRpbmcgcXVlc3Rpb24uCiAgICAvLyBXaGVuIGRyYWZ0IGlzIHNhdmVkLCBsb2FkIGludG8gYXNzaWdubWVudCBkZXRhaWxzCiAgICBxdWVzdGlvbkRyYWZ0OiB7CiAgICAgIHR5cGU6IG51bGwsCiAgICAgIHRpdGxlOiBudWxsLAogICAgICB3cml0dGVuUXVlc3Rpb246IG51bGwsCiAgICAgIHNuYXBwZWRRdWVzdGlvbnM6IFtdLAogICAgICBzbmFwcGVkUHJldmlld3M6IFtdLAogICAgICB6b29tTWVldGluZ3M6IG51bGwKICAgIH0sCiAgICAvLyBDdXJyZW50bHkgY3JlYXRpbmcgcXVlc3Rpb24gZGV0YWlscy4gVG8gYmUgdXNlZCBpbnN0YW50YW5lb3VzLgogICAgLy8gV2hlbiBzYXZlZCwgbG9hZCBpbnRvIHF1ZXN0aW9uIGRyYWZ0CiAgICBjcmVhdGluZ1F1ZXN0aW9uRGV0YWlsczogewogICAgICB0eXBlOiBudWxsLAogICAgICB0aXRsZTogbnVsbCwKICAgICAgd3JpdHRlblF1ZXN0aW9uOiBudWxsLAogICAgICBzbmFwcGVkUXVlc3Rpb25zOiBbXSwKICAgICAgc25hcHBlZFByZXZpZXdzOiBbXSwKICAgICAgem9vbU1lZXRpbmdzOiBudWxsCiAgICB9LAogICAgc2VsZWN0YWJsZXM6IHsKICAgICAgc2Nob29sczogW10sCiAgICAgIHN1YmplY3RzOiBbXSwKICAgICAgY2xhc3Nyb29tczogW10KICAgIH0sCiAgICBlcnJvcnM6IFtdCiAgfSksCiAgbXV0YXRpb25zOiB7CiAgICB0b2dnbGVDcmVhdGluZ1F1ZXN0aW9uTW9kZShzdGF0ZSkgewogICAgICBzdGF0ZS5zdGF0ZXMuaXNNYWluID0gIXN0YXRlLnN0YXRlcy5pc01haW47CiAgICAgIHN0YXRlLnN0YXRlcy5pc0NyZWF0aW5nUXVlc3Rpb24gPSAhc3RhdGUuc3RhdGVzLmlzQ3JlYXRpbmdRdWVzdGlvbjsKICAgICAgc3RhdGUuc3RhdGVzLmlzU2VsZWN0aW5nUXVlc3Rpb25UeXBlID0gIXN0YXRlLnN0YXRlcy5pc1NlbGVjdGluZ1F1ZXN0aW9uVHlwZTsKICAgIH0sCiAgICBjYW5jZWxDcmVhdGluZ1F1ZXN0aW9uTW9kZShzdGF0ZSkgewogICAgICBzdGF0ZS5zdGF0ZXMuaXNNYWluID0gdHJ1ZTsKICAgICAgc3RhdGUuc3RhdGVzLmlzQ3JlYXRpbmdRdWVzdGlvbiA9IGZhbHNlOwogICAgICBzdGF0ZS5zdGF0ZXMuaXNDcmVhdGluZ1pvb21RdWVzdGlvbiA9IGZhbHNlOwogICAgICBzdGF0ZS5zdGF0ZXMuaXNTZWxlY3RpbmdRdWVzdGlvblR5cGUgPSBmYWxzZTsKICAgICAgc3RhdGUuc3RhdGVzLmlzV3JpdGluZ1F1ZXN0aW9uID0gZmFsc2U7CiAgICAgIHN0YXRlLnN0YXRlcy5pc1NuYXBwaW5nUXVlc3Rpb24gPSBmYWxzZTsKICAgICAgc3RhdGUuc3RhdGVzLmlzWm9vbVF1ZXN0aW9uID0gZmFsc2U7CiAgICB9LAogICAgYmVnaW5FZGl0aW5nUXVlc3Rpb25Nb2RlKHN0YXRlLCBzYXZlZFF1ZXN0aW9uVHlwZSkgewogICAgICBzdGF0ZS5zdGF0ZXMuaXNNYWluID0gZmFsc2U7CiAgICAgIHN0YXRlLnN0YXRlcy5pc0NyZWF0aW5nUXVlc3Rpb24gPSB0cnVlOwogICAgICBzdGF0ZS5zdGF0ZXMuaXNTZWxlY3RpbmdRdWVzdGlvblR5cGUgPSBmYWxzZTsKICAgICAgc3RhdGUuc3RhdGVzLmlzRWRpdGluZ1F1ZXN0aW9uID0gdHJ1ZTsKICAgICAgc3RhdGUuc3RhdGVzLmlzU25hcHBpbmdRdWVzdGlvbiA9IHNhdmVkUXVlc3Rpb25UeXBlID09PSAnc25hcHBlZCc7CiAgICAgIHN0YXRlLnN0YXRlcy5pc1pvb21RdWVzdGlvbiA9IHNhdmVkUXVlc3Rpb25UeXBlID09PSAnem9vbSc7CiAgICB9LAogICAgYmVnaW5FZGl0aW5nV3JpdHRlblF1ZXN0aW9uTW9kZShzdGF0ZSkgewogICAgICBzdGF0ZS5zdGF0ZXMuaXNTZWxlY3RpbmdRdWVzdGlvblR5cGUgPSBmYWxzZTsKICAgICAgc3RhdGUuc3RhdGVzLmlzV3JpdGluZ1F1ZXN0aW9uID0gdHJ1ZTsKICAgIH0sCiAgICB0b2dnbGVTZWxlY3RpbmdEdXJhdGlvbk1vZGUoc3RhdGUpIHsKICAgICAgc3RhdGUuc3RhdGVzLmlzU2VsZWN0aW5nRHVyYXRpb24gPSAhc3RhdGUuc3RhdGVzLmlzU2VsZWN0aW5nRHVyYXRpb247CiAgICB9LAogICAgdG9nZ2xlV3JpdGluZ1F1ZXN0aW9uTW9kZShzdGF0ZSkgewogICAgICBzdGF0ZS5zdGF0ZXMuaXNTZWxlY3RpbmdRdWVzdGlvblR5cGUgPSAhc3RhdGUuc3RhdGVzLmlzU2VsZWN0aW5nUXVlc3Rpb25UeXBlOwogICAgICBzdGF0ZS5zdGF0ZXMuaXNXcml0aW5nUXVlc3Rpb24gPSAhc3RhdGUuc3RhdGVzLmlzV3JpdGluZ1F1ZXN0aW9uOwogICAgfSwKICAgIHRvb2dsZVpvb21RdWVzdGlvbk1vZGUoc3RhdGUpIHsKICAgICAgc3RhdGUuc3RhdGVzLmlzU2VsZWN0aW5nUXVlc3Rpb25UeXBlID0gIXN0YXRlLnN0YXRlcy5pc1NlbGVjdGluZ1F1ZXN0aW9uVHlwZTsKICAgICAgc3RhdGUuc3RhdGVzLmlzQ3JlYXRpbmdab29tUXVlc3Rpb24gPSAhc3RhdGUuc3RhdGVzLmlzQ3JlYXRpbmdab29tUXVlc3Rpb247CiAgICB9LAogICAgdG9nZ2xlU25hcHBpbmdRdWVzdGlvbk1vZGUoc3RhdGUpIHsKICAgICAgc3RhdGUuc3RhdGVzLmlzU2VsZWN0aW5nUXVlc3Rpb25UeXBlID0gIXN0YXRlLnN0YXRlcy5pc1NlbGVjdGluZ1F1ZXN0aW9uVHlwZTsKICAgICAgc3RhdGUuc3RhdGVzLmlzU25hcHBpbmdRdWVzdGlvbiA9ICFzdGF0ZS5zdGF0ZXMuaXNTbmFwcGluZ1F1ZXN0aW9uOwogICAgfSwKICAgIHRvZ2dsZVNob3dpbmdFcnJvck1vZGUoc3RhdGUpIHsKICAgICAgc3RhdGUuc3RhdGVzLmlzU2hvd2luZ0Vycm9yID0gIXN0YXRlLnN0YXRlcy5pc1Nob3dpbmdFcnJvcjsKICAgIH0sCiAgICB0b2dnbGVTaG93aW5nU2NoZWR1bGVyTW9kZShzdGF0ZSkgewogICAgICBzdGF0ZS5zdGF0ZXMuaXNTaG93aW5nU2NoZWR1bGVyID0gIXN0YXRlLnN0YXRlcy5pc1Nob3dpbmdTY2hlZHVsZXI7CiAgICB9LAogICAgdG9nZ2xlUHVibGlzaGluZ01vZGUoc3RhdGUpIHsKICAgICAgc3RhdGUuc3RhdGVzLmlzUHVibGlzaGluZyA9ICFzdGF0ZS5zdGF0ZXMuaXNQdWJsaXNoaW5nOwogICAgfSwKICAgIHRvZ2dsZVB1Ymxpc2hlZE1vZGUoc3RhdGUpIHsKICAgICAgc3RhdGUuc3RhdGVzLmlzUHVibGlzaGVkID0gIXN0YXRlLnN0YXRlcy5pc1B1Ymxpc2hlZDsKICAgIH0sCiAgICB0b2dnbGVJc1NlbGVjdGluZ0R1cmF0aW9uKHN0YXRlKSB7CiAgICAgIHN0YXRlLnN0YXRlcy5pc1NlbGVjdGluZ0R1cmF0aW9uID0gIXN0YXRlLnN0YXRlcy5pc1NlbGVjdGluZ0R1cmF0aW9uOwogICAgfSwKICAgIHRvZ2dsZUlzSW5ab29tTWVldGluZyhzdGF0ZSkgewogICAgICBzdGF0ZS5zdGF0ZXMuaXNJblpvb21NZWV0aW5nID0gIXN0YXRlLnN0YXRlcy5pc0luWm9vbU1lZXRpbmc7CiAgICB9LAogICAgdG9nZ2xlU25hcHBlZFF1ZXN0aW9uUHJldmlld1N0YXR1cyhzdGF0ZSwga2V5KSB7CiAgICAgIHN0YXRlLmNyZWF0aW5nUXVlc3Rpb25EZXRhaWxzLnNuYXBwZWRQcmV2aWV3c1trZXldLnByZXZpZXcgPSAhc3RhdGUuY3JlYXRpbmdRdWVzdGlvbkRldGFpbHMuc25hcHBlZFByZXZpZXdzW2tleV0ucHJldmlldzsKICAgICAgc3RhdGUuY3JlYXRpbmdRdWVzdGlvbkRldGFpbHMuc25hcHBlZFByZXZpZXdzW2tleV0uY3JvcHBpbmcgPSBmYWxzZTsKICAgIH0sCiAgICB0b2dnbGVDcm9wcGluZ1NuYXBwZWRRdWVzdGlvbk1vZGUoc3RhdGUsIGtleSkgewogICAgICBzdGF0ZS5jcmVhdGluZ1F1ZXN0aW9uRGV0YWlscy5zbmFwcGVkUHJldmlld3Nba2V5XS5wcmV2aWV3ID0gIXN0YXRlLmNyZWF0aW5nUXVlc3Rpb25EZXRhaWxzLnNuYXBwZWRQcmV2aWV3c1trZXldLnByZXZpZXc7CiAgICAgIHN0YXRlLmNyZWF0aW5nUXVlc3Rpb25EZXRhaWxzLnNuYXBwZWRQcmV2aWV3c1trZXldLmNyb3BwaW5nID0gIXN0YXRlLmNyZWF0aW5nUXVlc3Rpb25EZXRhaWxzLnNuYXBwZWRQcmV2aWV3c1trZXldLmNyb3BwaW5nOwogICAgfSwKICAgIHRvZ2dsZVZpZGVvKHN0YXRlKSB7CiAgICAgIHN0YXRlLnN0YXRlcy5pc1ZpZGVvT24gPSAhc3RhdGUuc3RhdGVzLmlzVmlkZW9PbjsKICAgICAgY29uc29sZS5sb2coJ2luc2lkZSB0b2dnbGVWaWRlbyBmbicsIHN0YXRlLnN0YXRlcy5pc1ZpZGVvT24pOwogICAgfSwKICAgIHRvZ2dsZU1pYyhzdGF0ZSkgewogICAgICBzdGF0ZS5zdGF0ZXMuaXNNaWNPbiA9ICFzdGF0ZS5zdGF0ZXMuaXNNaWNPbjsKICAgICAgY29uc29sZS5sb2coJ3Rvb2dsZSBtaWMgYnV0dG9uJyk7CiAgICB9LAogICAgdG9nZ2xlU2hhcmVTY3JlZW4oc3RhdGUpIHsKICAgICAgc3RhdGUuc3RhdGVzLmlzU2NyZWVuU2hhcmUgPSAhc3RhdGUuc3RhdGVzLmlzU2NyZWVuU2hhcmU7CiAgICAgIGNvbnNvbGUubG9nKCdpbnNpZGUgdG9nZ2xlU2hhcmVTY3JlZW4gZm4nLCBzdGF0ZS5zdGF0ZXMuaXNTY3JlZW5TaGFyZSk7CiAgICB9LAogICAgdG9nZ2xlUmVjb3JkaW5nKHN0YXRlKSB7CiAgICAgIHN0YXRlLnN0YXRlcy5pc1JlY29yZGluZyA9ICFzdGF0ZS5zdGF0ZXMuaXNSZWNvcmRpbmc7CiAgICB9LAogICAgLy8gcHVzaCBjcmVhdGluZ1F1ZXN0aW9uc0RldGFpbHMgLT4gcXVlc3Rpb25EcmFmdAogICAgc2F2ZVF1ZXN0aW9uVG9EcmFmdChzdGF0ZSkgewogICAgICBjb25zb2xlLmxvZygnY3JlYXRpbmdRdWVzdGlvbkRldGFpbHMuem9vbU1lZXRpbmdzJywgc3RhdGUuY3JlYXRpbmdRdWVzdGlvbkRldGFpbHMuem9vbU1lZXRpbmdzKTsKICAgICAgc3RhdGUucXVlc3Rpb25EcmFmdCA9IHsKICAgICAgICB0eXBlOiBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHN0YXRlLmNyZWF0aW5nUXVlc3Rpb25EZXRhaWxzLnR5cGUpKSwKICAgICAgICB0aXRsZTogSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShzdGF0ZS5jcmVhdGluZ1F1ZXN0aW9uRGV0YWlscy50aXRsZSkpLAogICAgICAgIHdyaXR0ZW5RdWVzdGlvbjogSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShzdGF0ZS5jcmVhdGluZ1F1ZXN0aW9uRGV0YWlscy53cml0dGVuUXVlc3Rpb24pKSwKICAgICAgICBzbmFwcGVkUXVlc3Rpb25zOiBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHN0YXRlLmNyZWF0aW5nUXVlc3Rpb25EZXRhaWxzLnNuYXBwZWRRdWVzdGlvbnMpKSwKICAgICAgICBzbmFwcGVkUHJldmlld3M6IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoc3RhdGUuY3JlYXRpbmdRdWVzdGlvbkRldGFpbHMuc25hcHBlZFByZXZpZXdzKSksCiAgICAgICAgem9vbU1lZXRpbmdzOiBzdGF0ZS5jcmVhdGluZ1F1ZXN0aW9uRGV0YWlscy56b29tTWVldGluZ3MKICAgICAgfTsKICAgIH0sCiAgICAvLyBwdXNoIHF1ZXN0aW9uRHJhZnQgLT4gYXNzaWdubWVudERldGFpbHMucXVlc3Rpb24KICAgIHNhdmVRdWVzdGlvblRvQXNzaWdubWVudERldGFpbHMoc3RhdGUpIHsKICAgICAgc3RhdGUuYXNzaWdubWVudERldGFpbHMucXVlc3Rpb24gPSB7CiAgICAgICAgdHlwZTogSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShzdGF0ZS5xdWVzdGlvbkRyYWZ0LnR5cGUpKSwKICAgICAgICB0aXRsZTogSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShzdGF0ZS5xdWVzdGlvbkRyYWZ0LnRpdGxlKSksCiAgICAgICAgd3JpdHRlblF1ZXN0aW9uOiBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHN0YXRlLnF1ZXN0aW9uRHJhZnQud3JpdHRlblF1ZXN0aW9uKSksCiAgICAgICAgc25hcHBlZFF1ZXN0aW9uczogSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShzdGF0ZS5xdWVzdGlvbkRyYWZ0LnNuYXBwZWRRdWVzdGlvbnMpKSwKICAgICAgICBzbmFwcGVkUHJldmlld3M6IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoc3RhdGUucXVlc3Rpb25EcmFmdC5zbmFwcGVkUHJldmlld3MpKSwKICAgICAgICB6b29tTWVldGluZ3M6IHN0YXRlLnF1ZXN0aW9uRHJhZnQuem9vbU1lZXRpbmdzCiAgICAgIH07CiAgICB9LAogICAgLy8gc2V0IHF1ZXN0aW9uRHJhZnQgYW5kIGNyZWF0aW5nUXVlc3Rpb25EZXRhaWxzIHRvIG51bGwKICAgIHJlc2V0Q3JlYXRpbmdRdWVzdGlvbihzdGF0ZSkgewogICAgICBzdGF0ZS5xdWVzdGlvbkRyYWZ0ID0gewogICAgICAgIHR5cGU6IG51bGwsCiAgICAgICAgdGl0bGU6IG51bGwsCiAgICAgICAgd3JpdHRlblF1ZXN0aW9uOiBudWxsLAogICAgICAgIHNuYXBwZWRRdWVzdGlvbnM6IFtdLAogICAgICAgIHNuYXBwZWRQcmV2aWV3czogW10sCiAgICAgICAgem9vbU1lZXRpbmdzOiBudWxsCiAgICAgIH07CiAgICAgIHN0YXRlLmNyZWF0aW5nUXVlc3Rpb25EZXRhaWxzID0gewogICAgICAgIHR5cGU6IG51bGwsCiAgICAgICAgdGl0bGU6IG51bGwsCiAgICAgICAgd3JpdHRlblF1ZXN0aW9uOiBudWxsLAogICAgICAgIHNuYXBwZWRRdWVzdGlvbnM6IFtdLAogICAgICAgIHNuYXBwZWRQcmV2aWV3czogW10sCiAgICAgICAgem9vbU1lZXRpbmdzOiBudWxsCiAgICAgIH07CiAgICB9LAogICAgLyogcHVzaDoKICAgIAkqIGFzc2lnbm1lbnREZXRhaWxzLnF1ZXN0aW9uIC0+IHF1ZXN0aW9uRHJhZnQKICAgIAlhKiBzc2lnbm1lbnREZXRhaWxzLnF1ZXN0aW9uIC0+IGNyZWF0aW5nUXVlc3Rpb25EZXRhaWxzCiAgICAqLwogICAgbG9hZFNhdmVkUXVlc3Rpb25Gb3JFZGl0KHN0YXRlLCB0eXBlKSB7CiAgICAgIHN0YXRlLnF1ZXN0aW9uRHJhZnQgPSB7CiAgICAgICAgdHlwZTogdHlwZSwKICAgICAgICB0aXRsZTogSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShzdGF0ZS5hc3NpZ25tZW50RGV0YWlscy5xdWVzdGlvbi50aXRsZSkpLAogICAgICAgIHdyaXR0ZW5RdWVzdGlvbjogSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShzdGF0ZS5hc3NpZ25tZW50RGV0YWlscy5xdWVzdGlvbi53cml0dGVuUXVlc3Rpb24pKSwKICAgICAgICBzbmFwcGVkUXVlc3Rpb25zOiBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHN0YXRlLmFzc2lnbm1lbnREZXRhaWxzLnF1ZXN0aW9uLnNuYXBwZWRRdWVzdGlvbnMpKSwKICAgICAgICBzbmFwcGVkUHJldmlld3M6IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoc3RhdGUuYXNzaWdubWVudERldGFpbHMucXVlc3Rpb24uc25hcHBlZFByZXZpZXdzKSksCiAgICAgICAgem9vbU1lZXRpbmdzOiBzdGF0ZS5hc3NpZ25tZW50RGV0YWlscy5xdWVzdGlvbi56b29tTWVldGluZ3MKICAgICAgfTsKICAgICAgc3RhdGUuY3JlYXRpbmdRdWVzdGlvbkRldGFpbHMgPSB7CiAgICAgICAgdHlwZTogdHlwZSwKICAgICAgICB0aXRsZTogSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShzdGF0ZS5hc3NpZ25tZW50RGV0YWlscy5xdWVzdGlvbi50aXRsZSkpLAogICAgICAgIHdyaXR0ZW5RdWVzdGlvbjogSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShzdGF0ZS5hc3NpZ25tZW50RGV0YWlscy5xdWVzdGlvbi53cml0dGVuUXVlc3Rpb24pKSwKICAgICAgICBzbmFwcGVkUXVlc3Rpb25zOiBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHN0YXRlLmFzc2lnbm1lbnREZXRhaWxzLnF1ZXN0aW9uLnNuYXBwZWRRdWVzdGlvbnMpKSwKICAgICAgICBzbmFwcGVkUHJldmlld3M6IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoc3RhdGUuYXNzaWdubWVudERldGFpbHMucXVlc3Rpb24uc25hcHBlZFByZXZpZXdzKSksCiAgICAgICAgem9vbU1lZXRpbmdzOiBzdGF0ZS5hc3NpZ25tZW50RGV0YWlscy5xdWVzdGlvbi56b29tTWVldGluZ3MKICAgICAgfTsKICAgIH0sCiAgICBzZXRNZWV0aW5nSWQoc3RhdGUsIGtleSkgewogICAgICBzdGF0ZS5zdGF0ZXMubWVldGluZ19pZCA9IGtleTsKICAgIH0sCiAgICAvLyBpbml0LCBiYXNpY2FsbHkgZXZlcnl0aGluZyB0byBudWxsLgogICAgaW5pdGlhbGlzZShzdGF0ZSkgewogICAgICAvLyBTVEFURVMKICAgICAgc3RhdGUuc3RhdGVzID0gewogICAgICAgIGlzTWFpbjogdHJ1ZSwKICAgICAgICBpc0NyZWF0aW5nUXVlc3Rpb246IGZhbHNlLAogICAgICAgIGlzQ3JlYXRpbmdab29tUXVlc3Rpb246IGZhbHNlLAogICAgICAgIGlzSW5ab29tTWVldGluZzogZmFsc2UsCiAgICAgICAgaXNTZWxlY3RpbmdEdXJhdGlvbjogZmFsc2UsCiAgICAgICAgaXNTZWxlY3RpbmdRdWVzdGlvblR5cGU6IGZhbHNlLAogICAgICAgIGlzV3JpdGluZ1F1ZXN0aW9uOiBmYWxzZSwKICAgICAgICBpc1NuYXBwaW5nUXVlc3Rpb246IGZhbHNlLAogICAgICAgIGlzQ3JvcHBpbmdTbmFwcGVkUXVlc3Rpb246IGZhbHNlLAogICAgICAgIGlzUmVzZXR0aW5nUXVlc3Rpb246IGZhbHNlLAogICAgICAgIGlzU2hvd2luZ1NjaGVkdWxlcjogZmFsc2UsCiAgICAgICAgaXNQdWJsaXNoaW5nOiBmYWxzZSwKICAgICAgICBpc1B1Ymxpc2hlZDogZmFsc2UsCiAgICAgICAgaXNTaG93aW5nRXJyb3I6IGZhbHNlLAogICAgICAgIGlzSW5ab29tTWVldGluZzogZmFsc2UsCiAgICAgICAgaXNWaWRlb09uOiBmYWxzZSwKICAgICAgICBpc01pY09uOiBmYWxzZSwKICAgICAgICBpc1NjcmVlblNoYXJlOiBmYWxzZSwKICAgICAgICBpc1JlY29yZGluZzogZmFsc2UsCiAgICAgICAgbWVldGluZ19pZDogbnVsbAogICAgICB9OwoKICAgICAgLy8gTWFpbiBkZXRhaWxzIHRvIGJlIHN1Ym1pdHRlZAogICAgICBzdGF0ZS5hc3NpZ25tZW50RGV0YWlscyA9IHsKICAgICAgICB0aXRsZTogbnVsbCwKICAgICAgICBzY2hvb2xfaWQ6ICIiLAogICAgICAgIHN1YmplY3RfaWQ6ICIiLAogICAgICAgIGNsYXNzcm9vbV9pZDogbnVsbCwKICAgICAgICBkdWVfZGF0ZXRpbWU6IG51bGwsCiAgICAgICAgcXVlc3Rpb246IHsKICAgICAgICAgIHR5cGU6IG51bGwsCiAgICAgICAgICB0aXRsZTogbnVsbCwKICAgICAgICAgIHdyaXR0ZW5RdWVzdGlvbjogbnVsbCwKICAgICAgICAgIHNuYXBwZWRRdWVzdGlvbnM6IFtdLAogICAgICAgICAgem9vbWVNZWV0aW5nczogbnVsbAogICAgICAgIH0sCiAgICAgICAgcHVibGlzaGVkX2F0OiBtb21lbnQoKQogICAgICB9OwoKICAgICAgLy8gUXVlc3Rpb25zJyBkcmFmdCwgc2VydmUgYXMgdGVtcG9yYXJ5IHNhdmUgcG9pbnQgd2hpbGUgY3JlYXRpbmcgcXVlc3Rpb24uCiAgICAgIC8vIFdoZW4gZHJhZnQgaXMgc2F2ZWQsIGxvYWQgaW50byBhc3NpZ25tZW50IGRldGFpbHMKICAgICAgc3RhdGUucXVlc3Rpb25EcmFmdCA9IHsKICAgICAgICB0eXBlOiBudWxsLAogICAgICAgIHRpdGxlOiBudWxsLAogICAgICAgIHdyaXR0ZW5RdWVzdGlvbjogbnVsbCwKICAgICAgICBzbmFwcGVkUXVlc3Rpb25zOiBbXSwKICAgICAgICBzbmFwcGVkUHJldmlld3M6IFtdLAogICAgICAgIHpvb21NZWV0aW5nczogbnVsbAogICAgICB9OwoKICAgICAgLy8gQ3VycmVudGx5IGNyZWF0aW5nIHF1ZXN0aW9uIGRldGFpbHMuIFRvIGJlIHVzZWQgaW5zdGFudGFuZW91cy4KICAgICAgLy8gV2hlbiBzYXZlZCwgbG9hZCBpbnRvIHF1ZXN0aW9uIGRyYWZ0CiAgICAgIHN0YXRlLmNyZWF0aW5nUXVlc3Rpb25EZXRhaWxzID0gewogICAgICAgIHR5cGU6IG51bGwsCiAgICAgICAgdGl0bGU6IG51bGwsCiAgICAgICAgd3JpdHRlblF1ZXN0aW9uOiBudWxsLAogICAgICAgIHNuYXBwZWRRdWVzdGlvbnM6IFtdLAogICAgICAgIHNuYXBwZWRQcmV2aWV3czogW10sCiAgICAgICAgem9vbU1lZXRpbmdzOiBudWxsCiAgICAgIH07CiAgICAgIHN0YXRlLnNlbGVjdGFibGVzID0gewogICAgICAgIHNjaG9vbHM6IFtdLAogICAgICAgIHN1YmplY3RzOiBbXSwKICAgICAgICBjbGFzc3Jvb21zOiBbXQogICAgICB9OwogICAgfQogIH0sCiAgYWN0aW9uczogewogICAgc2VsZWN0UXVlc3Rpb25UeXBlKHR5cGUpIHsKICAgICAgaWYgKHR5cGUgPT09ICdzbmFwcGVkJykgewogICAgICAgIHRoaXMuaXNTbmFwcGluZ1F1ZXN0aW9uID0gdHJ1ZTsKICAgICAgICB0aGlzLmlzU2VsZWN0aW5nUXVlc3Rpb25UeXBlID0gZmFsc2U7CiAgICAgICAgdGhpcy5xdWVzdGlvbkRldGFpbHMudHlwZSA9ICdzbmFwcGVkJzsKICAgICAgfQogICAgfSwKICAgIGJlZ2luV3JpdGluZ1F1ZXN0aW9uKHsKICAgICAgc3RhdGUsCiAgICAgIGNvbW1pdCwKICAgICAgZ2V0dGVycwogICAgfSkgewogICAgICBjb21taXQoJ3RvZ2dsZVdyaXRpbmdRdWVzdGlvbk1vZGUnKTsKICAgICAgc3RhdGUuY3JlYXRpbmdRdWVzdGlvbkRldGFpbHMudHlwZSA9ICd3cml0dGVuJzsKICAgIH0sCiAgICBiZWdpbldyaXRpbmdab29tUXVlc3Rpb24oewogICAgICBzdGF0ZSwKICAgICAgY29tbWl0LAogICAgICBnZXR0ZXJzCiAgICB9KSB7CiAgICAgIC8vIHRyaWdnZXJlZCB3aGVuIHVzZXIgc2VsZWN0IHpvb20gbWVldGluZyBxdWVzdGlvbgogICAgICBjb21taXQoJ3Rvb2dsZVpvb21RdWVzdGlvbk1vZGUnKTsKICAgICAgc3RhdGUuY3JlYXRpbmdRdWVzdGlvbkRldGFpbHMudHlwZSA9ICd6b29tJzsKICAgIH0sCiAgICBzYXZlV3JpdHRlblF1ZXN0aW9uVG9EcmFmdCh7CiAgICAgIHN0YXRlLAogICAgICBjb21taXQsCiAgICAgIGdldHRlcnMKICAgIH0pIHsKICAgICAgaWYgKHN0YXRlLmNyZWF0aW5nUXVlc3Rpb25EZXRhaWxzLndyaXR0ZW5RdWVzdGlvbikgewogICAgICAgIGNvbW1pdCgndG9nZ2xlV3JpdGluZ1F1ZXN0aW9uTW9kZScpOwogICAgICAgIGNvbW1pdCgnc2F2ZVF1ZXN0aW9uVG9EcmFmdCcpOwogICAgICB9IGVsc2UgewogICAgICAgIGNvbW1pdCgndG9nZ2xlU2hvd2luZ0Vycm9yTW9kZScpOwogICAgICB9CiAgICB9LAogICAgZW5kV3JpdGluZ1F1ZXN0aW9uKHsKICAgICAgc3RhdGUsCiAgICAgIGdldHRlcnMsCiAgICAgIGNvbW1pdAogICAgfSkgewogICAgICAvLyBFeGl0cyB3cml0aW5nIHF1ZXN0aW9uIG1vZGUgYW5kIHJldHVybiB0byBDcmVhdGUvRWRpdCBxdWVzdGlvbgogICAgICAvLyBJZiB3cml0dGVuIGRyYWZ0IGV4aXN0LCByZWxvYWQgaXQgaW50byBjcmVhdGluZ1F1ZXN0aW9uRGV0YWlscwogICAgICAvLyBFbHNlLCBlbXB0eSB0aGUgY3JlYXRpbmdRdWVzdGlvbkRldGFpbHMgYW5kIHRyaWdnZXIgU2VsZWN0IFF1ZXN0aW9uIG1vZGUKICAgICAgY29tbWl0KCd0b2dnbGVXcml0aW5nUXVlc3Rpb25Nb2RlJyk7CiAgICAgIGlmIChzdGF0ZS5zdGF0ZXMuaXNTZWxlY3RpbmdRdWVzdGlvblR5cGUgJiYgZ2V0dGVycy5oYXNXcml0dGVuUXVlc3Rpb25EcmFmdCkgewogICAgICAgIHN0YXRlLmNyZWF0aW5nUXVlc3Rpb25EZXRhaWxzLnR5cGUgPSAnd3JpdHRlbic7CiAgICAgICAgc3RhdGUuY3JlYXRpbmdRdWVzdGlvbkRldGFpbHMud3JpdHRlblF1ZXN0aW9uID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShzdGF0ZS5xdWVzdGlvbkRyYWZ0LndyaXR0ZW5RdWVzdGlvbikpOwogICAgICB9IGVsc2UgewogICAgICAgIHN0YXRlLmNyZWF0aW5nUXVlc3Rpb25EZXRhaWxzLndyaXR0ZW5RdWVzdGlvbiA9ICcnOwogICAgICAgIHN0YXRlLmNyZWF0aW5nUXVlc3Rpb25EZXRhaWxzLnR5cGUgPSBudWxsOwogICAgICB9CiAgICB9LAogICAgcmVtb3ZlV3JpdHRlblF1ZXN0aW9uRHJhZnQoewogICAgICBzdGF0ZSwKICAgICAgZ2V0dGVycywKICAgICAgY29tbWl0CiAgICB9KSB7CiAgICAgIGNvbW1pdCgncmVzZXRDcmVhdGluZ1F1ZXN0aW9uJyk7CiAgICB9LAogICAgYmVnaW5TbmFwcGluZ1F1ZXN0aW9uKHsKICAgICAgc3RhdGUsCiAgICAgIGdldHRlcnMsCiAgICAgIGNvbW1pdAogICAgfSkgewogICAgICBpZiAoIXN0YXRlLnN0YXRlcy5pc1NuYXBwaW5nUXVlc3Rpb24pIHsKICAgICAgICBjb21taXQoJ3RvZ2dsZVNuYXBwaW5nUXVlc3Rpb25Nb2RlJyk7CiAgICAgICAgc3RhdGUuY3JlYXRpbmdRdWVzdGlvbkRldGFpbHMudHlwZSA9ICdzbmFwcGVkJzsKICAgICAgfQogICAgfSwKICAgIGhhbmRsZVNuYXBRdWVzdGlvbih7CiAgICAgIHN0YXRlLAogICAgICBnZXR0ZXJzLAogICAgICBjb21taXQsCiAgICAgIGRpc3BhdGNoCiAgICB9LCBlKSB7CiAgICAgIGxldCBmaWxlcyA9IGUudGFyZ2V0LmZpbGVzIHx8IGUuZGF0YVRyYW5zZmVyLmZpbGVzOwogICAgICBpZiAoIWZpbGVzLmxlbmd0aCkgewogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICBsZXQgZmlsZUxpc3QgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChlLnRhcmdldC5maWxlcyk7CiAgICAgIGZpbGVMaXN0LmZvckVhY2goZiA9PiB7CiAgICAgICAgaWYgKCFmLnR5cGUubWF0Y2goImltYWdlLioiKSkgewogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgICBsZXQgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTsKICAgICAgICByZWFkZXIub25sb2FkID0gZSA9PiB7CiAgICAgICAgICBzdGF0ZS5jcmVhdGluZ1F1ZXN0aW9uRGV0YWlscy5zbmFwcGVkUXVlc3Rpb25zLnB1c2goZS50YXJnZXQucmVzdWx0KTsKICAgICAgICAgIHN0YXRlLmNyZWF0aW5nUXVlc3Rpb25EZXRhaWxzLnNuYXBwZWRQcmV2aWV3cy5wdXNoKHsKICAgICAgICAgICAgc291cmNlOiBlLnRhcmdldC5yZXN1bHQsCiAgICAgICAgICAgIHByZXZpZXc6IGZhbHNlLAogICAgICAgICAgICBjcm9wcGluZzogZmFsc2UKICAgICAgICAgIH0pOwogICAgICAgIH07CiAgICAgICAgcmVhZGVyLnJlYWRBc0RhdGFVUkwoZik7CiAgICAgIH0pOwogICAgfSwKICAgIHNhdmVDcm9wcGVkU25hcHBlZFF1ZXN0aW9uKHsKICAgICAgc3RhdGUsCiAgICAgIGNvbW1pdAogICAgfSwgcGF5bG9hZCkgewogICAgICBzdGF0ZS5jcmVhdGluZ1F1ZXN0aW9uRGV0YWlscy5zbmFwcGVkUHJldmlld3NbcGF5bG9hZC5rZXldLnNvdXJjZSA9IHBheWxvYWQuZGF0YVVSTDsKICAgICAgc3RhdGUuY3JlYXRpbmdRdWVzdGlvbkRldGFpbHMuc25hcHBlZFF1ZXN0aW9uc1twYXlsb2FkLmtleV0gPSBwYXlsb2FkLmRhdGFVUkw7CiAgICAgIGNvbW1pdCgndG9nZ2xlQ3JvcHBpbmdTbmFwcGVkUXVlc3Rpb25Nb2RlJywgcGF5bG9hZC5rZXkpOwogICAgfSwKICAgIHJlbW92ZVNuYXBwZWRRdWVzdGlvbih7CiAgICAgIHN0YXRlLAogICAgICBjb21taXQKICAgIH0sIGtleSkgewogICAgICBzdGF0ZS5jcmVhdGluZ1F1ZXN0aW9uRGV0YWlscy5zbmFwcGVkUXVlc3Rpb25zLnNwbGljZShrZXksIDEpOwogICAgICBzdGF0ZS5jcmVhdGluZ1F1ZXN0aW9uRGV0YWlscy5zbmFwcGVkUHJldmlld3Muc3BsaWNlKGtleSwgMSk7CiAgICAgIGlmICghc3RhdGUuY3JlYXRpbmdRdWVzdGlvbkRldGFpbHMuc25hcHBlZFF1ZXN0aW9ucy5sZW5ndGgpIHsKICAgICAgICBjb21taXQoJ3Jlc2V0Q3JlYXRpbmdRdWVzdGlvbicpOwogICAgICAgIGNvbW1pdCgndG9nZ2xlU25hcHBpbmdRdWVzdGlvbk1vZGUnKTsKICAgICAgfQogICAgfSwKICAgIGhhbmRsZVpvb21RdWVzdGlvbih7CiAgICAgIHN0YXRlLAogICAgICBjb21taXQKICAgIH0sIHBheWxvYWQpIHsKICAgICAgLy8gaGFuZGxlZCB3aGVuIHJlY29yZGluZyBzdG9wcwogICAgICAvLyBwYXlsb2FkIHNob3VsZCBiZSB0aGUgem9vbSByZWNvcmRpbmcgZmlsZSBpbiBibG9iCiAgICAgIGNvbnNvbGUubG9nKCd0cmlnZ2VyIHdoZW4gbmV3IHZpZGVvIHN0b3JlZCcpOwogICAgICBzdGF0ZS5jcmVhdGluZ1F1ZXN0aW9uRGV0YWlscy56b29tTWVldGluZ3MgPSBwYXlsb2FkOwogICAgICBjb25zb2xlLmxvZygncGF5bG9hZCcsIHBheWxvYWQpOwogICAgfSwKICAgIHNhdmVab29tUXVlc3Rpb25Ub0RyYWYoewogICAgICBzdGF0ZSwKICAgICAgY29tbWl0CiAgICB9KSB7CiAgICAgIC8vcHVzaGluZyBxdWVzdGlvbkRldGFpbHMuem9vbU1lZXRpbmdzIHRvIGFzc2lnbm1lbnREZXRhaWxzLnF1ZXN0aW9uCiAgICAgIGNvbnNvbGUubG9nKCdzYXZpbmcgem9vbSBxdWVzdGlvbiBkcmFmJyk7CiAgICAgIGNvbW1pdCgnc2F2ZVF1ZXN0aW9uVG9EcmFmdCcpOwogICAgICBpZiAoc3RhdGUuY3JlYXRpbmdRdWVzdGlvbkRldGFpbHMuem9vbU1lZXRpbmdzKSB7CiAgICAgICAgY29tbWl0KCd0b29nbGVab29tUXVlc3Rpb25Nb2RlJyk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgY29tbWl0KCd0b2dnbGVTaG93aW5nRXJyb3JNb2RlJyk7CiAgICAgIH0KICAgIH0sCiAgICBjbG9zZVRvZ2dsZUR1cmF0aW9uKCkgewogICAgICAvLyBNT0RFOiBNT0RBTAogICAgICBpZiAodGhpcy5kdXJhdGlvbkRheSA9PT0gJycpIHsKICAgICAgICB0aGlzLmR1cmF0aW9uRGF5ID0gMDsKICAgICAgfQogICAgICBpZiAodGhpcy5kdXJhdGlvbkhvdXIgPT09ICcnKSB7CiAgICAgICAgdGhpcy5kdXJhdGlvbkhvdXIgPSAwOwogICAgICB9CiAgICAgIGlmICh0aGlzLmR1cmF0aW9uTWludXRlID09PSAnJykgewogICAgICAgIHRoaXMuZHVyYXRpb25NaW51dGUgPSAwOwogICAgICB9CiAgICAgIHRoaXMudG9nZ2xlRHVyYXRpb24gPSAhdGhpcy50b2dnbGVEdXJhdGlvbjsKICAgIH0sCiAgICBnZXRTY2hvb2xzKHsKICAgICAgc3RhdGUKICAgIH0pIHsKICAgICAgVGVhY2hlclJlcG9zaXRvcnkuZ2V0VGVhY2hlclNjaG9vbHMoKS50aGVuKHJlcyA9PiB7CiAgICAgICAgY29uc29sZS5sb2coJ3JlcycsIHJlcy5kYXRhKTsKICAgICAgICByZXMuZGF0YS5mb3JFYWNoKGl0ZW0gPT4gewogICAgICAgICAgc3RhdGUuc2VsZWN0YWJsZXMuc2Nob29scy5wdXNoKHsKICAgICAgICAgICAgaWQ6IGl0ZW0uaWQsCiAgICAgICAgICAgIG5hbWU6IGl0ZW0ubmFtZQogICAgICAgICAgfSk7CiAgICAgICAgfSk7CiAgICAgICAgLy8gdXBkYXRlIHN0YXRlLnNlbGVjdGFibGVzLnNjaG9vbHMKICAgICAgfSk7CiAgICB9LAoKICAgIGdldFN1YmplY3RzKHsKICAgICAgc3RhdGUKICAgIH0pIHsKICAgICAgVGVhY2hlclJlcG9zaXRvcnkuZ2V0VGVhY2hlclN1YmplY3RzKCkudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEuc3VjY2VzcykgewogICAgICAgICAgY29uc3QgZGF0YSA9IHJlc3BvbnNlLmRhdGEuZGF0YTsKICAgICAgICAgIGNvbnN0IG51bU9mU3ViamVjdHMgPSBkYXRhLmxlbmd0aDsKICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbnVtT2ZTdWJqZWN0czsgaSsrKSB7CiAgICAgICAgICAgIGxldCBpdGVtID0gZGF0YVtpXTsKICAgICAgICAgICAgbGV0IHN1YmplY3REZXRhaWwgPSB7CiAgICAgICAgICAgICAgaWQ6IGl0ZW0uc3ViamVjdF9pZCwKICAgICAgICAgICAgICBuYW1lOiBpdGVtLnN1YmplY3RfbmFtZQogICAgICAgICAgICB9OwogICAgICAgICAgICBzdGF0ZS5zZWxlY3RhYmxlcy5zdWJqZWN0cy5wdXNoKHN1YmplY3REZXRhaWwpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgZ2V0Q2xhc3Nlcyh7CiAgICAgIHN0YXRlLAogICAgICBjb21taXQKICAgIH0pIHsKICAgICAgVGVhY2hlclJlcG9zaXRvcnkuZ2V0VGVhY2hlckNsYXNzZXMoKS50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICBpZiAocmVzcG9uc2UuZGF0YS5zdWNjZXNzKSB7CiAgICAgICAgICBjb25zdCBkYXRhID0gcmVzcG9uc2UuZGF0YS5kYXRhOwogICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBkYXRhLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgIGxldCBpdGVtID0gZGF0YVtpXTsKICAgICAgICAgICAgbGV0IGNsYXNzRGV0YWlsID0gewogICAgICAgICAgICAgIGlkOiBpdGVtLmNsYXNzX2lkLAogICAgICAgICAgICAgIG5hbWU6IGl0ZW0uY2xhc3NfbmFtZSwKICAgICAgICAgICAgICBudW1PZlN0dWRlbnRzOiBpdGVtLm51bV9vZl9zdHVkZW50cywKICAgICAgICAgICAgICBpc0hvbWVyb29tOiBpdGVtLmhvbWVyb29tCiAgICAgICAgICAgIH07CiAgICAgICAgICAgIHN0YXRlLnNlbGVjdGFibGVzLmNsYXNzcm9vbXMucHVzaChjbGFzc0RldGFpbCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICAvLyB1cGRhdGVTaG93TWFudWFsRGVzY3JpcHRpb24oKSB7CiAgICAvLyAgIHRoaXMuc2hvd0Rlc2NyaXB0aW9uID0gIXRoaXMuc2hvd0Rlc2NyaXB0aW9uCiAgICAvLyAgIHRoaXMuaXNDcmVhdGluZ1F1ZXN0aW9uID0gIXRoaXMuaXNDcmVhdGluZ1F1ZXN0aW9uOwogICAgLy8gfSwKICAgIGhhbmRsZVF1ZXN0aW9uRGV0YWlscyhkZXRhaWxzKSB7CiAgICAgIHRoaXMucXVlc3Rpb25EZXRhaWxzID0gZGV0YWlsczsKICAgIH0sCiAgICBzYXZlUXVlc3Rpb24oewogICAgICBzdGF0ZSwKICAgICAgZ2V0dGVycywKICAgICAgY29tbWl0CiAgICB9KSB7CiAgICAgIC8vIENoZWNrIGlmIHVzZXIgc2VsZWN0ZWQgYSB0eXBlIG9mIHF1ZXN0aW9uCiAgICAgIGlmIChzdGF0ZS5jcmVhdGluZ1F1ZXN0aW9uRGV0YWlscy50eXBlKSB7CiAgICAgICAgLy8gQ2hlY2sgaWYgdXNlciBoYXMgaW5zZXJ0ZWQgYSBxdWVzdGlvbiB0aXRsZQogICAgICAgIGlmIChzdGF0ZS5jcmVhdGluZ1F1ZXN0aW9uRGV0YWlscy50aXRsZSkgewogICAgICAgICAgLy8gSWYgdXNlciBvcHQgdG8gV3JpdGUgUXVlc3Rpb24KICAgICAgICAgIGlmIChnZXR0ZXJzLmNyZWF0aW5nUXVlc3Rpb25UeXBlID09PSAnd3JpdHRlbicpIHsKICAgICAgICAgICAgaWYgKGdldHRlcnMuaGFzV3JpdHRlblF1ZXN0aW9uRHJhZnQpIHsKICAgICAgICAgICAgICBjb21taXQoJ3NhdmVRdWVzdGlvblRvQXNzaWdubWVudERldGFpbHMnKTsKICAgICAgICAgICAgICBjb21taXQoJ3Jlc2V0Q3JlYXRpbmdRdWVzdGlvbicpOwogICAgICAgICAgICAgIGNvbW1pdCgndG9nZ2xlQ3JlYXRpbmdRdWVzdGlvbk1vZGUnKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICBjb25zb2xlLmxvZygncGxlYXNlIHdyaXRlIHNvbWV0aGluZycpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CgogICAgICAgICAgLy8gSWYgdXNlciBvcHQgdG8gU25hcCBRdWVzdGlvbgogICAgICAgICAgaWYgKGdldHRlcnMuY3JlYXRpbmdRdWVzdGlvblR5cGUgPT09ICdzbmFwcGVkJykgewogICAgICAgICAgICBjb21taXQoJ3NhdmVRdWVzdGlvblRvRHJhZnQnKTsKICAgICAgICAgICAgaWYgKGdldHRlcnMuaGFzU25hcHBlZFF1ZXN0aW9uRHJhZnQpIHsKICAgICAgICAgICAgICBjb21taXQoJ3NhdmVRdWVzdGlvblRvQXNzaWdubWVudERldGFpbHMnKTsKICAgICAgICAgICAgICBjb21taXQoJ3Jlc2V0Q3JlYXRpbmdRdWVzdGlvbicpOwogICAgICAgICAgICAgIGNvbW1pdCgndG9nZ2xlQ3JlYXRpbmdRdWVzdGlvbk1vZGUnKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICBjb25zb2xlLmxvZygncGxlYXNlIHNuYXAgc29tZXRoaW5nJyk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KCiAgICAgICAgICAvLyBpZiB1c2VyIG9wdCB0byB6b29tIHF1ZXN0aW9uCiAgICAgICAgICBpZiAoZ2V0dGVycy5jcmVhdGluZ1F1ZXN0aW9uVHlwZSA9PT0gJ3pvb20nKSB7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdzYXZpbmcgem9vbSBxdWVzdGlvbicpOwogICAgICAgICAgICBjb21taXQoJ3NhdmVRdWVzdGlvblRvRHJhZnQnKTsKICAgICAgICAgICAgaWYgKGdldHRlcnMuaGFzWm9vbVF1ZXN0aW9uRHJhZikgewogICAgICAgICAgICAgIGNvbW1pdCgnc2F2ZVF1ZXN0aW9uVG9Bc3NpZ25tZW50RGV0YWlscycpOwogICAgICAgICAgICAgIGNvbW1pdCgncmVzZXRDcmVhdGluZ1F1ZXN0aW9uJyk7CiAgICAgICAgICAgICAgY29tbWl0KCd0b2dnbGVDcmVhdGluZ1F1ZXN0aW9uTW9kZScpOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdwbGVhc2UgcmVjb3JkIHNvbWV0aGluZycpOwogICAgICAgICAgICB9CgogICAgICAgICAgICAvLyBwbGFuLiBzYW5pdGl6ZSBhbmQgcHVzaCB0byBzZXJ2ZXIKICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgewogICAgICAgICAgY29uc29sZS5sb2coJ3BsZWFzZSBmaWxsIGluIHRpdGxlJyk7CiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIGNvbnNvbGUubG9nKCdQbGVhc2Ugc2VsZWN0IGEgdHlwZSBvZiBxdWVzdGlvbi4nKTsKICAgICAgfQogICAgfSwKICAgIGVkaXRTYXZlZFF1ZXN0aW9uKHsKICAgICAgc3RhdGUsCiAgICAgIGNvbW1pdCwKICAgICAgZ2V0dGVycwogICAgfSkgewogICAgICBsZXQgdHlwZSA9IGdldHRlcnMuc2F2ZWRRdWVzdGlvblR5cGU7CiAgICAgIGNvbW1pdCgnYmVnaW5FZGl0aW5nUXVlc3Rpb25Nb2RlJywgdHlwZSk7CiAgICAgIGNvbW1pdCgnbG9hZFNhdmVkUXVlc3Rpb25Gb3JFZGl0JywgdHlwZSk7CiAgICB9LAogICAgY2FuY2VsQ3JlYXRpbmdRdWVzdGlvbih7CiAgICAgIHN0YXRlLAogICAgICBjb21taXQsCiAgICAgIHR5cGUKICAgIH0pIHsKICAgICAgaWYgKCFnZXR0ZXJzLmhhc1NhdmVkUXVlc3Rpb24pIHsKICAgICAgICBjb21taXQoJ3Jlc2V0Q3JlYXRpbmdRdWVzdGlvbicpOwogICAgICB9CiAgICAgIGNvbW1pdCgnY2FuY2VsQ3JlYXRpbmdRdWVzdGlvbk1vZGUnKTsKICAgIH0sCiAgICBjaGVja0Zvcm0oewogICAgICBzdGF0ZSwKICAgICAgY29tbWl0LAogICAgICBnZXR0ZXJzCiAgICB9KSB7CiAgICAgIC8vIFJlc2V0IGVycm9yCiAgICAgIHN0YXRlLmVycm9ycyA9IFtdOwogICAgICBpZiAoIXN0YXRlLmFzc2lnbm1lbnREZXRhaWxzLnRpdGxlKSB7CiAgICAgICAgc3RhdGUuZXJyb3JzLnB1c2goJ1RpdGxlIHJlcXVpcmVkLicpOwogICAgICB9CiAgICAgIGlmICghc3RhdGUuYXNzaWdubWVudERldGFpbHMuc3ViamVjdF9pZCkgewogICAgICAgIHN0YXRlLmVycm9ycy5wdXNoKCdTdWJqZWN0IHJlcXVpcmVkLicpOwogICAgICB9CiAgICAgIGlmICghc3RhdGUuYXNzaWdubWVudERldGFpbHMuY2xhc3Nyb29tX2lkKSB7CiAgICAgICAgc3RhdGUuZXJyb3JzLnB1c2goJ0NsYXNzcm9vbSByZXF1aXJlZC4nKTsKICAgICAgfQogICAgICBpZiAoIWdldHRlcnMuaGFzU2F2ZWRRdWVzdGlvbikgewogICAgICAgIHN0YXRlLmVycm9ycy5wdXNoKCdRdWVzdGlvbiByZXF1aXJlZC4nKTsKICAgICAgfQogICAgICBpZiAoIXN0YXRlLmFzc2lnbm1lbnREZXRhaWxzLmR1ZV9kYXRldGltZSkgewogICAgICAgIHN0YXRlLmVycm9ycy5wdXNoKCdEdWUgZGF0ZSByZXF1aXJlZCcpOwogICAgICB9CiAgICAgIGlmIChzdGF0ZS5lcnJvcnMubGVuZ3RoKSB7CiAgICAgICAgY29tbWl0KCd0b2dnbGVTaG93aW5nRXJyb3JNb2RlJyk7CiAgICAgIH0KICAgIH0sCiAgICBhc3luYyBzZW5kRGF0YSh7CiAgICAgIHN0YXRlLAogICAgICBjb21taXQsCiAgICAgIGdldHRlcnMsCiAgICAgIGRpc3BhdGNoCiAgICB9KSB7CiAgICAgIC8vIHNlbmQgZGF0YSB0byB0aGUgc2VydmVyCgogICAgICBkaXNwYXRjaCgnY2hlY2tGb3JtJyk7CiAgICAgIGlmICghZ2V0dGVycy5oYXNFcnJvcnMpIHsKICAgICAgICBsZXQgY291bnRlciA9IDA7CiAgICAgICAgbGV0IHpvb21fbWVldGluZyA9IG51bGw7CiAgICAgICAgaWYgKHN0YXRlLnN0YXRlcy5pc1Nob3dpbmdTY2hlZHVsZXIpIHsKICAgICAgICAgIGNvbW1pdCgndG9nZ2xlU2hvd2luZ1NjaGVkdWxlck1vZGUnKTsKICAgICAgICB9CiAgICAgICAgY29tbWl0KCd0b2dnbGVQdWJsaXNoaW5nTW9kZScpOwogICAgICAgIGNvbW1pdCgndG9nZ2xlU2hvd2luZ1NjaGVkdWxlck1vZGUnKTsKCiAgICAgICAgLy8gZnJvbSBsYXZhcmVsIGNvZGUsIGl0IHNlZW1zIHB1c2ggdGhlIHZpZGVvIHRvIHRoZSBzZXJ2ZXIgZmlyc3QgYW5kIHRvIGdldCBtZWV0aW5nCiAgICAgICAgLy8gYW5kIHRoZW4gcHVzaCB0aGUgYXNzaWdubWVudCAgZGV0YWlscwoKICAgICAgICAvLyBwcmUtZmxpZ2h0IGNoZWNrOiBzZWUgaWYgaXQncyBhIHpvb20gbWVldGluZyB2aWRlby4KICAgICAgICAvLyBpZiBpdCdzIGEgem9vbSBtZWV0aW5nLCB1cGxvYWQgdGhlIHZpZGVvIGZpcnN0IGFuZCB1cGRhdGUgYXNzaWdubWVudCBkZXRhaWxzCiAgICAgICAgY29uc29sZS5sb2coJ2NoZWNrIGlmIGdvdCB6b29tIHZpZGVvJyk7CiAgICAgICAgaWYgKHN0YXRlLmFzc2lnbm1lbnREZXRhaWxzLnF1ZXN0aW9uLnR5cGUgPT09ICd6b29tJykgewogICAgICAgICAgbGV0IGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKCk7CiAgICAgICAgICBjb25zdCBwYXRoID0gJy96b29tLW1lZXRpbmcvcHVzaF9zMyc7CiAgICAgICAgICBsZXQgcmVjVXJsID0gc3RhdGUuYXNzaWdubWVudERldGFpbHMucXVlc3Rpb24uem9vbU1lZXRpbmdzOwogICAgICAgICAgY29uc29sZS5sb2coJ3JlY292ZXJpbmcgdmlkZW8gZnJvbSAnLCByZWNVcmwpOwogICAgICAgICAgY29uc29sZS5sb2coJ2dldHRpbmcgdGhlIHZpZGVvIGZpbGUnKTsKICAgICAgICAgIGxldCByZWNCbG9iID0gYXdhaXQgZmV0Y2gocmVjVXJsKS50aGVuKHIgPT4gci5ibG9iKCkpLnRoZW4oYmxvYkZpbGUgPT4gbmV3IEZpbGUoW2Jsb2JGaWxlXSwgInRlc3Qud2VibSIsIHsKICAgICAgICAgICAgdHlwZTogInZpZGVvL3dlYm0iCiAgICAgICAgICB9KSk7CiAgICAgICAgICBmb3JtRGF0YS5hcHBlbmQoJ3pvb21NZWV0aW5ncycsIHJlY0Jsb2IpOwogICAgICAgICAgYXdhaXQgUmVwb3NpdG9yeS5wb3N0KHBhdGgsIGZvcm1EYXRhLCB7CiAgICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ211bHRpcGFydC9mb3JtLWRhdGEnCiAgICAgICAgICAgIH0KICAgICAgICAgIH0pLnRoZW4ocmVzID0+IHsKICAgICAgICAgICAgem9vbV9tZWV0aW5nID0gcmVzLmRhdGEuem9vbV9tZWV0aW5nOwogICAgICAgICAgICBjb25zb2xlLmxvZygncmVzJywgcmVzKTsKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgICBjb25zb2xlLmxvZygnZG9uZSBzZW5kaW5nIGEgem9vbSB2aWRlbycsIHpvb21fbWVldGluZyk7CiAgICAgICAgY29uc29sZS5sb2coJ3B1c2hpbmcgdGhlIGFzc2lnbm1lbnQgZGV0YWlsJyk7CiAgICAgICAgLy8gcHVzaCB0aGUgYXNzaWdubWVudCBkZXRhaWxzIGZvciBlYWNoIGNsYXNzLgogICAgICAgIHN0YXRlLmFzc2lnbm1lbnREZXRhaWxzLmNsYXNzcm9vbV9pZC5mb3JFYWNoKChjbGFzc3Jvb20sIGluZGV4KSA9PiB7CiAgICAgICAgICB2YXIgX3N0YXRlJGFzc2lnbm1lbnREZXRhLCBfc3RhdGUkYXNzaWdubWVudERldGEyOwogICAgICAgICAgbGV0IGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKCk7CiAgICAgICAgICBmb3JtRGF0YS5hcHBlbmQoJ3N1YmplY3RfaWQnLCBzdGF0ZS5hc3NpZ25tZW50RGV0YWlscy5zdWJqZWN0X2lkKTsKICAgICAgICAgIGZvcm1EYXRhLmFwcGVuZCgnc2Nob29sX2lkJywgc3RhdGUuYXNzaWdubWVudERldGFpbHMuc2Nob29sX2lkKTsKICAgICAgICAgIGZvcm1EYXRhLmFwcGVuZCgnY2xhc3NfaWQnLCBjbGFzc3Jvb20uaWQpOwogICAgICAgICAgZm9ybURhdGEuYXBwZW5kKCd0aXRsZScsIHN0YXRlLmFzc2lnbm1lbnREZXRhaWxzLnRpdGxlKTsKICAgICAgICAgIGZvcm1EYXRhLmFwcGVuZCgnd3JpdHRlbl9xdWVzdGlvbl90aXRsZScsIHN0YXRlLmFzc2lnbm1lbnREZXRhaWxzLnF1ZXN0aW9uLnRpdGxlKTsKICAgICAgICAgIGZvcm1EYXRhLmFwcGVuZCgnd3JpdHRlbl9kZXNjcmlwdGlvbicsIChfc3RhdGUkYXNzaWdubWVudERldGEgPSBzdGF0ZS5hc3NpZ25tZW50RGV0YWlscy5xdWVzdGlvbi53cml0dGVuUXVlc3Rpb24pICE9PSBudWxsICYmIF9zdGF0ZSRhc3NpZ25tZW50RGV0YSAhPT0gdm9pZCAwID8gX3N0YXRlJGFzc2lnbm1lbnREZXRhIDogJycpOwogICAgICAgICAgZm9ybURhdGEuYXBwZW5kKCdkdWVfZGF0ZXRpbWUnLCBtb21lbnQoc3RhdGUuYXNzaWdubWVudERldGFpbHMuZHVlX2RhdGV0aW1lKS5mb3JtYXQoJ1lZWVktTU0tREQgSEg6bW06c3MnKSk7CiAgICAgICAgICBmb3JtRGF0YS5hcHBlbmQoJ3B1Ymxpc2hlZF9hdCcsIG1vbWVudChzdGF0ZS5hc3NpZ25tZW50RGV0YWlscy5wdWJsaXNoZWRfYXQpLmZvcm1hdCgnWVlZWS1NTS1ERCBISDptbTpzcycpKTsKICAgICAgICAgIGZvcm1EYXRhLmFwcGVuZCgncmVtYXJrcycsIChfc3RhdGUkYXNzaWdubWVudERldGEyID0gc3RhdGUuYXNzaWdubWVudERldGFpbHMucmVtYXJrcykgIT09IG51bGwgJiYgX3N0YXRlJGFzc2lnbm1lbnREZXRhMiAhPT0gdm9pZCAwID8gX3N0YXRlJGFzc2lnbm1lbnREZXRhMiA6ICcnKTsKICAgICAgICAgIGZvcm1EYXRhLmFwcGVuZCgncmVjb3JkaW5nX21lZXRpbmdfaWQnLCB6b29tX21lZXRpbmcgPyB6b29tX21lZXRpbmcubWVldGluZ19pZCA6ICcnKTsKICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc3RhdGUuYXNzaWdubWVudERldGFpbHMucXVlc3Rpb24uc25hcHBlZFF1ZXN0aW9ucy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICBsZXQgZmlsZSA9IHN0YXRlLmFzc2lnbm1lbnREZXRhaWxzLnF1ZXN0aW9uLnNuYXBwZWRRdWVzdGlvbnNbaV07CiAgICAgICAgICAgIGZvcm1EYXRhLmFwcGVuZCgnc25hcF9xdWVzdGlvblsnICsgaSArICddJywgZmlsZSk7CiAgICAgICAgICB9CgogICAgICAgICAgLy8gdGhlIHBhcnQgd2hlcmUgYWN0dWFsbHkgc2F2ZSB0aGUgYXNzaWdubWVudAogICAgICAgICAgUmVwb3NpdG9yeS5wb3N0KCcvYXNzaWdubWVudHMvc3RvcmUnLCBmb3JtRGF0YSwgewogICAgICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdtdWx0aXBhcnQvZm9ybS1kYXRhJwogICAgICAgICAgICB9CiAgICAgICAgICB9KS50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEuc3VjY2VzcykgewogICAgICAgICAgICAgIGNvdW50ZXIrKzsKICAgICAgICAgICAgICBpZiAoY291bnRlciA9PT0gc3RhdGUuYXNzaWdubWVudERldGFpbHMuY2xhc3Nyb29tX2lkLmxlbmd0aCkgewogICAgICAgICAgICAgICAgY29tbWl0KCd0b2dnbGVQdWJsaXNoaW5nTW9kZScpOwogICAgICAgICAgICAgICAgY29tbWl0KCd0b2dnbGVQdWJsaXNoZWRNb2RlJyk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIGNvdW50ZXIrKzsKICAgICAgICAgICAgICBpZiAoY291bnRlciA9PT0gc3RhdGUuYXNzaWdubWVudERldGFpbHMuY2xhc3Nyb29tX2lkLmxlbmd0aCkgewogICAgICAgICAgICAgICAgY29tbWl0KCd0b2dnbGVTaG93aW5nRXJyb3JNb2RlJyk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9KS5jYXRjaChlcnJvciA9PiB7CiAgICAgICAgICAgIGNvbW1pdCgndG9nZ2xlUHVibGlzaGluZ01vZGUnKTsKICAgICAgICAgICAgY29tbWl0KCd0b2dnbGVTaG93aW5nRXJyb3JNb2RlJyk7CiAgICAgICAgICB9KTsKICAgICAgICB9KTsKICAgICAgICBjb25zb2xlLmxvZygnZG9uZSBzZW5kaW5nIHRoZSBhc3NpZ25tZW50IHRvIGRiJyk7CiAgICAgIH0KICAgIH0sCiAgICB0ZXN0UmVjb3JkTWVldGluZyh7CiAgICAgIHN0YXRlLAogICAgICBjb21taXQKICAgIH0pIHsKICAgICAgLy8gdGVzdCB0aGUgcGFzdCB3aGVyZSBwb3N0aW5nIHRvICcvem9vbS1tZWV0aW5nL3N0b3JlJwogICAgICAvL2NvbnN0IGhvc3QgPSAnaHR0cHM6Ly9hZG1pbi5nb3RzbmFwcGVkLnRlY2gvYXBpJzsKICAgICAgY29uc3QgaG9zdCA9ICdodHRwOi8vbG9jYWxob3N0OjgwMDAvYXBpJzsKICAgICAgY29uc3QgcGF0aCA9ICcvem9vbS1tZWV0aW5nL3N0b3JlJzsKICAgICAgY29uc3QgdG9waWMgPSAidGVzdCBtZWV0aW5nIjsKICAgICAgbGV0IGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKCk7CiAgICAgIGZvcm1EYXRhLmFwcGVuZCgndG9waWMnLCB0b3BpYyk7CiAgICAgIGZvcm1EYXRhLmFwcGVuZCgnYWdlbmRhJywgdG9waWMpOwogICAgICBmb3JtRGF0YS5hcHBlbmQoJ2R1cmF0aW9uJywgJzUnKTsKICAgICAgZm9ybURhdGEuYXBwZW5kKCdob3N0X3ZpZGVvJywgJzEnKTsKICAgICAgZm9ybURhdGEuYXBwZW5kKCdwYXJ0aWNpcGFudF92aWRlbycsICcxJyk7CiAgICAgIFJlcG9zaXRvcnkucG9zdChwYXRoLCBmb3JtRGF0YSkudGhlbihyZXMgPT4gewogICAgICAgIGNvbnNvbGUubG9nKCdyZXNwb25zZScsIHJlcyk7CiAgICAgICAgY29uc29sZS5sb2coJ2RhdGEnLCByZXMuZGF0YS5kYXRhKTsKICAgICAgICBjb25zb2xlLmxvZygnbWVldGluZF9pZCcsIHJlcy5kYXRhLmRhdGEuaWQpOwogICAgICAgIGNvbW1pdCgnc2V0TWVldGluZ0lkJywgcmVzLmRhdGEuZGF0YS5pZCk7CiAgICAgICAgY29uc29sZS5sb2coJ21lZXRpbmdfdXJsJywgcmVzLmRhdGEuZGF0YS5qb2luX3VybCk7CiAgICAgIH0pOwogICAgfSwKICAgIHRlc3RHZXRNZWV0aW5nUmVjb3JkaW5ncyh7CiAgICAgIHN0YXRlCiAgICB9KSB7CiAgICAgIC8vIHJldHJpdmUgbWVldGluZyByZWNvcmRpbmdzIGZyb20gc3RhdGUuc3RhdGVzLm1lZXRpbmdfaWQKICAgICAgY29uc29sZS5sb2coJ21lZXRpbmdfaWQgaXMgJywgc3RhdGUuc3RhdGVzLm1lZXRpbmdfaWQpOwogICAgICBpZiAoc3RhdGUuc3RhdGVzLm1lZXRpbmdfaWQpIHsKICAgICAgICBjb25zdCBwYXRoID0gJy96b29tLW1lZXRpbmcvJyArIHN0YXRlLnN0YXRlcy5tZWV0aW5nX2lkICsgJy9yZWNvcmRpbmdzJzsKICAgICAgICBjb25zb2xlLmxvZygnZ2V0dGluZyByZWNvcmRpbmdzIGZyb20gJywgcGF0aCk7CiAgICAgICAgUmVwb3NpdG9yeS5nZXQocGF0aCkudGhlbihyZXMgPT4gewogICAgICAgICAgY29uc29sZS5sb2coJ3JlcycsIHJlcyk7CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0sCiAgICBhc3luYyB0ZXN0U2VuZFJlY29yZGluZ3MoewogICAgICBzdGF0ZQogICAgfSkgewogICAgICBjb25zb2xlLmxvZygnaW4gdGVzdFNlbmRSZWNvcmRpbmdzJyk7CiAgICAgIGNvbnN0IHBhdGggPSAnL3pvb20tbWVldGluZy9wdXNoX3MzJzsKCiAgICAgIC8qCiAgICAgIAlwbGFuOi0KICAgICAgCWZvciB0ZXN0aW5nLCBzZWUgaWYgaSBjYW4gcHVzaCB0aGUgZmlsZSBjb250ZW50cyBmcm9tCiAgICAgIAkJcXVlc3Rpb25EZXRhaWxzLnpvb21NZWV0aW5ncyB0byB0aGUgc2VydmVyIGFuZCBldmVudHVhbGx5IHRvIHMzLgogICAgICAqLwoKICAgICAgLy92YWxpZGF0aW9uLCBlbnN1cmUgdGhlIHpvb21NZWV0aW5ncyBpcyBwb3B1bGF0ZWQKICAgICAgLyoKICAgICAgaWYoIXN0YXRlLmFzc2lnbm1lbnREZXRhaWxzLnpvb21NZWV0aW5ncyl7CiAgICAgIAljb25zb2xlLmxvZygncGxlc2UgcmVjb3JkIGEgdmlkZW8nKTsKICAgICAgfQogICAgICAqLwoKICAgICAgLy8gYnVpbGQgdXAgZm9ybURhdGEKICAgICAgbGV0IGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKCk7CiAgICAgIGxldCByZWNVcmwgPSBzdGF0ZS5jcmVhdGluZ1F1ZXN0aW9uRGV0YWlscy56b29tTWVldGluZ3M7CiAgICAgIGxldCByZWNCbG9iID0gYXdhaXQgZmV0Y2gocmVjVXJsKS50aGVuKHIgPT4gci5ibG9iKCkpLnRoZW4oYmxvYkZpbGUgPT4gbmV3IEZpbGUoW2Jsb2JGaWxlXSwgInRlc3Qud2VibSIsIHsKICAgICAgICB0eXBlOiAidmlkZW8vd2VibSIKICAgICAgfSkpOwogICAgICBmb3JtRGF0YS5hcHBlbmQoJ3pvb21NZWV0aW5ncycsIHJlY0Jsb2IpOwogICAgICBSZXBvc2l0b3J5LnBvc3QocGF0aCwgZm9ybURhdGEsIHsKICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ211bHRpcGFydC9mb3JtLWRhdGEnCiAgICAgICAgfQogICAgICB9KS50aGVuKHJlcyA9PiB7CiAgICAgICAgY29uc29sZS5sb2coJ3JlcycsIHJlcyk7CiAgICAgIH0pOwogICAgfSwKICAgIGdldERldGFpbHM6IGZ1bmN0aW9uICgpIHsKICAgICAgVGVhY2hlclJlcG9zaXRvcnkuZ2V0VGVhY2hlckRldGFpbHMoKS50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICBpZiAocmVzcG9uc2UuZGF0YS5zdWNjZXNzKSB7CiAgICAgICAgICBjb25zdCBkYXRhID0gcmVzcG9uc2UuZGF0YS5kYXRhWzBdOwogICAgICAgICAgbGV0IHRlYWNoZXJEZXRhaWwgPSB7CiAgICAgICAgICAgIGlkOiBkYXRhLmlkCiAgICAgICAgICB9OwogICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3RlYWNoZXJJRCcsIHRlYWNoZXJEZXRhaWwuaWQpOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgc2V0QXNzaWdubWVudFRpdGxlKHsKICAgICAgc3RhdGUKICAgIH0sIG1heGVkVGl0bGUpIHsKICAgICAgc3RhdGUuYXNzaWdubWVudERldGFpbHMudGl0bGUgPSBtYXhlZFRpdGxlOwogICAgfQogIH0sCiAgZ2V0dGVyczogewogICAgY3JlYXRpbmdRdWVzdGlvblR5cGU6IHN0YXRlID0+IHsKICAgICAgcmV0dXJuIHN0YXRlLmNyZWF0aW5nUXVlc3Rpb25EZXRhaWxzLnR5cGU7CiAgICB9LAogICAgc2F2ZWRRdWVzdGlvblR5cGU6IHN0YXRlID0+IHsKICAgICAgcmV0dXJuIHN0YXRlLmFzc2lnbm1lbnREZXRhaWxzLnF1ZXN0aW9uLnR5cGU7CiAgICB9LAogICAgZHVlRGF0ZVRpbWUoc3RhdGUpIHsKICAgICAgcmV0dXJuIG1vbWVudChzdGF0ZS5hc3NpZ25tZW50RGV0YWlscy5kdWVfZGF0ZXRpbWUpLmZvcm1hdCgnREQvTU0vWVlZWScpOwogICAgfSwKICAgIHNuYXBwZWRQcmV2aWV3cyhzdGF0ZSkgewogICAgICByZXR1cm4gc3RhdGUuYXNzaWdubWVudERldGFpbHMucXVlc3Rpb24uc25hcHBlZFF1ZXN0aW9uczsKICAgIH0sCiAgICBoYXNTYXZlZFF1ZXN0aW9uOiBzdGF0ZSA9PiB7CiAgICAgIHJldHVybiBzdGF0ZS5hc3NpZ25tZW50RGV0YWlscy5xdWVzdGlvbi50eXBlICYmIChzdGF0ZS5hc3NpZ25tZW50RGV0YWlscy5xdWVzdGlvbi53cml0dGVuUXVlc3Rpb24gfHwgc3RhdGUuYXNzaWdubWVudERldGFpbHMucXVlc3Rpb24uc25hcHBlZFF1ZXN0aW9ucy5sZW5ndGggfHwgc3RhdGUuYXNzaWdubWVudERldGFpbHMucXVlc3Rpb24uem9vbU1lZXRpbmdzICE9PSBudWxsKTsKICAgIH0sCiAgICBoYXNTYXZlZER1ZURhdGV0aW1lOiBzdGF0ZSA9PiB7CiAgICAgIHJldHVybiBzdGF0ZS5hc3NpZ25tZW50RGV0YWlscy5kdWVfZGF0ZXRpbWUgIT09IG51bGw7CiAgICB9LAogICAgaGFzRWRpdGFibGVRdWVzdGlvbihzdGF0ZSwgZ2V0dGVycykgewogICAgICByZXR1cm4gc3RhdGUuc3RhdGVzLmlzQ3JlYXRpbmdRdWVzdGlvbiAmJiAhc3RhdGUuc3RhdGVzLmlzV3JpdGluZ1F1ZXN0aW9uICYmIChnZXR0ZXJzLmhhc1dyaXR0ZW5RdWVzdGlvbkRyYWZ0IHx8IGdldHRlcnMuaGFzU25hcHBlZFF1ZXN0aW9uRHJhZnQpOwogICAgfSwKICAgIGhhc1dyaXR0ZW5RdWVzdGlvbkRyYWZ0OiBzdGF0ZSA9PiB7CiAgICAgIHJldHVybiBzdGF0ZS5xdWVzdGlvbkRyYWZ0LnR5cGUgPyBzdGF0ZS5xdWVzdGlvbkRyYWZ0LnR5cGUgPT09ICd3cml0dGVuJyAmJiBzdGF0ZS5xdWVzdGlvbkRyYWZ0LndyaXR0ZW5RdWVzdGlvbiA6IGZhbHNlOwogICAgfSwKICAgIGhhc1NuYXBwZWRRdWVzdGlvbkRyYWZ0KHN0YXRlKSB7CiAgICAgIHJldHVybiBzdGF0ZS5xdWVzdGlvbkRyYWZ0LnR5cGUgPyBzdGF0ZS5xdWVzdGlvbkRyYWZ0LnR5cGUgPT09ICdzbmFwcGVkJyAmJiBzdGF0ZS5xdWVzdGlvbkRyYWZ0LnNuYXBwZWRRdWVzdGlvbnMubGVuZ3RoID4gMCA6IGZhbHNlOwogICAgfSwKICAgIGhhc1pvb21RdWVzdGlvbkRyYWYoc3RhdGUpIHsKICAgICAgcmV0dXJuIHN0YXRlLnF1ZXN0aW9uRHJhZnQudHlwZSA/IHN0YXRlLnF1ZXN0aW9uRHJhZnQudHlwZSA9PT0gJ3pvb20nICYmIHN0YXRlLnF1ZXN0aW9uRHJhZnQuem9vbU1lZXRpbmdzICE9PSBudWxsIDogZmFsc2U7CiAgICB9LAogICAgaGFzRXJyb3JzKHN0YXRlKSB7CiAgICAgIHJldHVybiBzdGF0ZS5lcnJvcnMubGVuZ3RoIHx8IHN0YXRlLnN0YXRlcy5pc1Nob3dpbmdFcnJvcjsKICAgIH0sCiAgICBoYXNab29tTWVldGluZyhzdGF0ZSkgewogICAgICByZXR1cm4gc3RhdGUuc3RhdGVzLmlzSW5ab29tTWVldGluZzsKICAgIH0sCiAgICBoYXNab29tVmlkZW8oc3RhdGUpIHsKICAgICAgcmV0dXJuIHN0YXRlLnN0YXRlcy5pc1ZpZGVvT247CiAgICB9LAogICAgaGFzWm9vbU1pYyhzdGF0ZSkgewogICAgICByZXR1cm4gc3RhdGUuc3RhdGVzLmlzTWljT247CiAgICB9LAogICAgaGFzWm9vbVNjcmVlblNoYXJlKHN0YXRlKSB7CiAgICAgIHJldHVybiBzdGF0ZS5zdGF0ZXMuaXNTY3JlZW5TaGFyZTsKICAgIH0sCiAgICBoYXNab29tUmVjb3JkaW5nKHN0YXRlKSB7CiAgICAgIHJldHVybiBzdGF0ZS5zdGF0ZXMuaXNSZWNvcmRpbmc7CiAgICB9CiAgfQp9Ow=="},{"version":3,"names":["TeacherRepository","moment","Repository","getters","get","namespaced","state","states","isMain","isCreatingQuestion","isCreatingZoomQuestion","isSelectingDuration","isSelectingQuestionType","isWritingQuestion","isSnappingQuestion","isZoomQuestion","isCroppingSnappedQuestion","isResettingQuestion","isShowingScheduler","isPublishing","isPublished","isShowingError","isInZoomMeeting","isVideoOn","isMicOn","isRecording","isScreenShare","meeting_id","assignmentDetails","title","school_id","subject_id","classroom_id","due_datetime","question","type","writtenQuestion","snappedQuestions","snappedPreviews","zoomMeetings","published_at","questionDraft","creatingQuestionDetails","selectables","schools","subjects","classrooms","errors","mutations","toggleCreatingQuestionMode","cancelCreatingQuestionMode","beginEditingQuestionMode","savedQuestionType","isEditingQuestion","beginEditingWrittenQuestionMode","toggleSelectingDurationMode","toggleWritingQuestionMode","toogleZoomQuestionMode","toggleSnappingQuestionMode","toggleShowingErrorMode","toggleShowingSchedulerMode","togglePublishingMode","togglePublishedMode","toggleIsSelectingDuration","toggleIsInZoomMeeting","toggleSnappedQuestionPreviewStatus","key","preview","cropping","toggleCroppingSnappedQuestionMode","toggleVideo","console","log","toggleMic","toggleShareScreen","toggleRecording","saveQuestionToDraft","JSON","parse","stringify","saveQuestionToAssignmentDetails","resetCreatingQuestion","loadSavedQuestionForEdit","setMeetingId","initialise","zoomeMeetings","actions","selectQuestionType","questionDetails","beginWritingQuestion","commit","beginWritingZoomQuestion","saveWrittenQuestionToDraft","endWritingQuestion","hasWrittenQuestionDraft","removeWrittenQuestionDraft","beginSnappingQuestion","handleSnapQuestion","dispatch","e","files","target","dataTransfer","length","fileList","Array","prototype","slice","call","forEach","f","match","reader","FileReader","onload","push","result","source","readAsDataURL","saveCroppedSnappedQuestion","payload","dataURL","removeSnappedQuestion","splice","handleZoomQuestion","saveZoomQuestionToDraf","closeToggleDuration","durationDay","durationHour","durationMinute","toggleDuration","getSchools","getTeacherSchools","then","res","data","item","id","name","getSubjects","getTeacherSubjects","response","success","numOfSubjects","i","subjectDetail","subject_name","getClasses","getTeacherClasses","classDetail","class_id","class_name","numOfStudents","num_of_students","isHomeroom","homeroom","handleQuestionDetails","details","saveQuestion","creatingQuestionType","hasSnappedQuestionDraft","hasZoomQuestionDraf","editSavedQuestion","cancelCreatingQuestion","hasSavedQuestion","checkForm","sendData","hasErrors","counter","zoom_meeting","formData","FormData","path","recUrl","recBlob","fetch","r","blob","blobFile","File","append","post","headers","classroom","index","_state$assignmentDeta","_state$assignmentDeta2","format","remarks","file","catch","error","testRecordMeeting","host","topic","join_url","testGetMeetingRecordings","testSendRecordings","getDetails","getTeacherDetails","teacherDetail","localStorage","setItem","setAssignmentTitle","maxedTitle","dueDateTime","hasSavedDueDatetime","hasEditableQuestion","hasZoomMeeting","hasZoomVideo","hasZoomMic","hasZoomScreenShare","hasZoomRecording"],"sources":["/Users/erwinkarim/Websites/Snapped/snapped-mobile-master/src/store/modules/teacherCreateAssignment.js"],"sourcesContent":["import TeacherRepository from \"@/repositories/TeacherRepository\";\nimport moment from \"moment\";\nimport Repository from \"@/repositories/Repository\";\nimport getters from \"@/store/getters\";\nimport {get} from \"v-calendar/src/utils/_\";\n\n/*\n\tstate to handle assignment creations\n\t1. question creation\n\tthe gist is ;-\n\tcreation question => creatingQuestionDetails\n\n\twhen press 'save' (in CreateQuestionForm.vue)\n\t* save<XXX>ToDraf\n\t\t* creatingQuestionDetails => questionDraft\n\n\twhen press 'save' again (in TeacherAssignments/Create/Index.vue)\n\t* calls saveQuestion\n\t\t* questionDraft => assignmentDetails.question\n\t\t* questionDraft is cleared\n\t\t* change the state from isCreatingQuestion to isWritingQuestion\n\n\twhen press publish\n\t* sendData is called to push the question to the server/db\n*/\nexport default {\n\tnamespaced: true,\n\tstate: () => ({\n\t\t// STATES\n\t\tstates: {\n\t\t\tisMain: true,\n\t\t\tisCreatingQuestion: false,\n\t\t\tisCreatingZoomQuestion: false,\n\t\t\tisSelectingDuration: false,\n\t\t\tisSelectingQuestionType: false,\n\t\t\tisWritingQuestion: false,\n\t\t\tisSnappingQuestion: false,\n\t\t\tisZoomQuestion: false,\n\t\t\tisCroppingSnappedQuestion: false,\n\t\t\tisResettingQuestion: false,\n\t\t\tisShowingScheduler: false,\n\t\t\tisPublishing: false,\n\t\t\tisPublished: false,\n\t\t\tisShowingError: false,\n\t\t\tisInZoomMeeting: false,\n\t\t\tisVideoOn: false,\n\t\t\tisMicOn: false,\n\t\t\tisRecording: false,\n\t\t\tisScreenShare: false,\n\t\t\tmeeting_id: null,\n\t\t},\n\n\t\t// Main details to be submitted\n\t\tassignmentDetails: {\n\t\t\ttitle: null,\n\t\t\tschool_id: \"\",\n\t\t\tsubject_id: \"\",\n\t\t\tclassroom_id: null,\n\t\t\tdue_datetime: null,\n\t\t\tquestion: {\n\t\t\t\ttype: null,\n\t\t\t\ttitle: null,\n\t\t\t\twrittenQuestion: null,\n\t\t\t\tsnappedQuestions: [],\n\t\t\t\tsnappedPreviews: [],\n\t\t\t\tzoomMeetings: null\n\t\t\t},\n\t\t\tpublished_at: moment(),\n\t\t},\n\n\t\t// Questions' draft, serve as temporary save point while creating question.\n\t\t// When draft is saved, load into assignment details\n\t\tquestionDraft: {\n\t\t\ttype: null,\n\t\t\ttitle: null,\n\t\t\twrittenQuestion: null,\n\t\t\tsnappedQuestions: [],\n\t\t\tsnappedPreviews: [],\n\t\t\tzoomMeetings: null,\n\t\t},\n\n\t\t// Currently creating question details. To be used instantaneous.\n\t\t// When saved, load into question draft\n\t\tcreatingQuestionDetails: {\n\t\t\ttype: null,\n\t\t\ttitle: null,\n\t\t\twrittenQuestion: null,\n\t\t\tsnappedQuestions: [],\n\t\t\tsnappedPreviews: [],\n\t\t\tzoomMeetings: null,\n\t\t},\n\n\t\tselectables: {\n\t\t\tschools: [],\n\t\t\tsubjects: [],\n\t\t\tclassrooms: []\n\t\t},\n\n\t\terrors: []\n\t}),\n\tmutations: {\n\t\t\ttoggleCreatingQuestionMode(state) {\n\n\t\t\t\t\tstate.states.isMain = !state.states.isMain;\n\t\t\t\t\tstate.states.isCreatingQuestion = !state.states.isCreatingQuestion;\n\t\t\t\t\tstate.states.isSelectingQuestionType = !state.states.isSelectingQuestionType;\n\t\t\t},\n\n\t\t\tcancelCreatingQuestionMode(state) {\n\t\t\t\t\tstate.states.isMain = true;\n\t\t\t\t\tstate.states.isCreatingQuestion = false;\n\t\t\t\t\tstate.states.isCreatingZoomQuestion = false;\n\t\t\t\t\tstate.states.isSelectingQuestionType = false;\n\t\t\t\t\tstate.states.isWritingQuestion = false;\n\t\t\t\t\tstate.states.isSnappingQuestion = false;\n\t\t\t\t\tstate.states.isZoomQuestion = false;\n\t\t\t},\n\n\t\t\tbeginEditingQuestionMode(state, savedQuestionType) {\n\t\t\t\t\tstate.states.isMain = false;\n\t\t\t\t\tstate.states.isCreatingQuestion = true;\n\t\t\t\t\tstate.states.isSelectingQuestionType = false;\n\t\t\t\t\tstate.states.isEditingQuestion = true;\n\n\t\t\t\t\tstate.states.isSnappingQuestion = savedQuestionType === 'snapped';\n\t\t\t\t\tstate.states.isZoomQuestion = savedQuestionType === 'zoom';\n\t\t\t},\n\n\t\t\tbeginEditingWrittenQuestionMode(state){\n\t\t\t\t\tstate.states.isSelectingQuestionType = false;\n\t\t\t\t\tstate.states.isWritingQuestion = true;\n\t\t\t},\n\n\t\t\ttoggleSelectingDurationMode(state) {\n\t\t\t\t\tstate.states.isSelectingDuration = !state.states.isSelectingDuration\n\t\t\t},\n\n\t\t\ttoggleWritingQuestionMode(state) {\n\t\t\t\t\tstate.states.isSelectingQuestionType = !state.states.isSelectingQuestionType;\n\t\t\t\t\tstate.states.isWritingQuestion = !state.states.isWritingQuestion;\n\t\t\t},\n\n\t\t\ttoogleZoomQuestionMode(state) {\n\t\t\t\tstate.states.isSelectingQuestionType = !state.states.isSelectingQuestionType;\n\t\t\t\tstate.states.isCreatingZoomQuestion = !state.states.isCreatingZoomQuestion;\n\t\t\t},\n\n\t\t\ttoggleSnappingQuestionMode(state) {\n\t\t\t\t\tstate.states.isSelectingQuestionType = !state.states.isSelectingQuestionType;\n\t\t\t\t\tstate.states.isSnappingQuestion = !state.states.isSnappingQuestion;\n\t\t\t},\n\n\t\t\ttoggleShowingErrorMode(state) {\n\t\t\t\t\tstate.states.isShowingError = !state.states.isShowingError;\n\t\t\t},\n\n\t\t\ttoggleShowingSchedulerMode(state) {\n\t\t\t\t\tstate.states.isShowingScheduler = !state.states.isShowingScheduler\n\t\t\t},\n\n\t\t\ttogglePublishingMode(state) {\n\t\t\t\t\tstate.states.isPublishing = !state.states.isPublishing\n\t\t\t},\n\n\t\t\ttogglePublishedMode(state) {\n\t\t\t\t\tstate.states.isPublished = !state.states.isPublished\n\t\t\t},\n\n\t\t\ttoggleIsSelectingDuration(state) {\n\t\t\t\t\tstate.states.isSelectingDuration = !state.states.isSelectingDuration;\n\t\t\t},\n\n\t\t\ttoggleIsInZoomMeeting(state) {\n\t\t\t\tstate.states.isInZoomMeeting = !state.states.isInZoomMeeting;\n\n\t\t\t},\n\n\t\t\ttoggleSnappedQuestionPreviewStatus(state, key) {\n\t\t\t\t\tstate.creatingQuestionDetails.snappedPreviews[key].preview = !state.creatingQuestionDetails.snappedPreviews[key].preview;\n\t\t\t\t\tstate.creatingQuestionDetails.snappedPreviews[key].cropping = false;\n\t\t\t},\n\n\t\t\ttoggleCroppingSnappedQuestionMode(state, key) {\n\t\t\t\t\tstate.creatingQuestionDetails.snappedPreviews[key].preview = !state.creatingQuestionDetails.snappedPreviews[key].preview;\n\t\t\t\t\tstate.creatingQuestionDetails.snappedPreviews[key].cropping = !state.creatingQuestionDetails.snappedPreviews[key].cropping;\n\t\t\t},\n\n\t\t\ttoggleVideo(state) {\n\t\t\t\tstate.states.isVideoOn = !state.states.isVideoOn;\n\t\t\t\tconsole.log('inside toggleVideo fn', state.states.isVideoOn);\n\t\t\t},\n\n\t\t\ttoggleMic(state) {\n\t\t\t\tstate.states.isMicOn = !state.states.isMicOn;\n\t\t\t\tconsole.log('toogle mic button');\n\t\t\t},\n\n\t\t\ttoggleShareScreen(state) {\n\t\t\t\tstate.states.isScreenShare = !state.states.isScreenShare;\n\t\t\t\tconsole.log('inside toggleShareScreen fn', state.states.isScreenShare);\n\t\t\t},\n\n\t\t\ttoggleRecording(state) {\n\t\t\t\t\tstate.states.isRecording = !state.states.isRecording;\n\t\t\t},\n\n\t\t\t// push creatingQuestionsDetails -> questionDraft\n\t\t\tsaveQuestionToDraft(state) {\n\t\t\t\tconsole.log('creatingQuestionDetails.zoomMeetings', state.creatingQuestionDetails.zoomMeetings);\n\t\t\t\t\tstate.questionDraft = {\n\t\t\t\t\t\t\ttype: JSON.parse(JSON.stringify(state.creatingQuestionDetails.type)),\n\t\t\t\t\t\t\ttitle: JSON.parse(JSON.stringify(state.creatingQuestionDetails.title)),\n\t\t\t\t\t\t\twrittenQuestion: JSON.parse(JSON.stringify(state.creatingQuestionDetails.writtenQuestion)),\n\t\t\t\t\t\t\tsnappedQuestions: JSON.parse(JSON.stringify(state.creatingQuestionDetails.snappedQuestions)),\n\t\t\t\t\t\t\tsnappedPreviews: JSON.parse(JSON.stringify(state.creatingQuestionDetails.snappedPreviews)),\n\t\t\t\t\t\t\tzoomMeetings: state.creatingQuestionDetails.zoomMeetings,\n\t\t\t\t\t}\n\t\t\t},\n\n\t\t\t// push questionDraft -> assignmentDetails.question\n\t\t\tsaveQuestionToAssignmentDetails(state) {\n\t\t\t\t\tstate.assignmentDetails.question = {\n\t\t\t\t\t\t\ttype: JSON.parse(JSON.stringify(state.questionDraft.type)),\n\t\t\t\t\t\t\ttitle: JSON.parse(JSON.stringify(state.questionDraft.title)),\n\t\t\t\t\t\t\twrittenQuestion: JSON.parse(JSON.stringify(state.questionDraft.writtenQuestion)),\n\t\t\t\t\t\t\tsnappedQuestions: JSON.parse(JSON.stringify(state.questionDraft.snappedQuestions)),\n\t\t\t\t\t\t\tsnappedPreviews: JSON.parse(JSON.stringify(state.questionDraft.snappedPreviews)),\n\t\t\t\t\t\t\tzoomMeetings: state.questionDraft.zoomMeetings,\n\t\t\t\t\t}\n\t\t\t},\n\n\t\t\t// set questionDraft and creatingQuestionDetails to null\n\t\t\tresetCreatingQuestion(state) {\n\n\t\t\t\t\tstate.questionDraft = {\n\t\t\t\t\t\t\ttype: null,\n\t\t\t\t\t\t\ttitle: null,\n\t\t\t\t\t\t\twrittenQuestion: null,\n\t\t\t\t\t\t\tsnappedQuestions: [],\n\t\t\t\t\t\t\tsnappedPreviews: [],\n\t\t\t\t\t\t\tzoomMeetings: null\n\t\t\t\t\t}\n\n\t\t\t\t\tstate.creatingQuestionDetails = {\n\t\t\t\t\t\t\ttype: null,\n\t\t\t\t\t\t\ttitle: null,\n\t\t\t\t\t\t\twrittenQuestion: null,\n\t\t\t\t\t\t\tsnappedQuestions: [],\n\t\t\t\t\t\t\tsnappedPreviews: [],\n\t\t\t\t\t\t\tzoomMeetings: null\n\t\t\t\t\t}\n\t\t\t},\n\n\t\t\t/* push:\n\t\t\t\t* assignmentDetails.question -> questionDraft\n\t\t\t\ta* ssignmentDetails.question -> creatingQuestionDetails\n\t\t\t*/\n\t\t\tloadSavedQuestionForEdit(state, type) {\n\n\t\t\t\t\tstate.questionDraft = {\n\t\t\t\t\t\t\ttype: type,\n\t\t\t\t\t\t\ttitle: JSON.parse(JSON.stringify(state.assignmentDetails.question.title)),\n\t\t\t\t\t\t\twrittenQuestion: JSON.parse(JSON.stringify(state.assignmentDetails.question.writtenQuestion)),\n\t\t\t\t\t\t\tsnappedQuestions: JSON.parse(JSON.stringify(state.assignmentDetails.question.snappedQuestions)),\n\t\t\t\t\t\t\tsnappedPreviews: JSON.parse(JSON.stringify(state.assignmentDetails.question.snappedPreviews)),\n\t\t\t\t\t\t\tzoomMeetings: state.assignmentDetails.question.zoomMeetings,\n\t\t\t\t\t}\n\n\t\t\t\t\tstate.creatingQuestionDetails = {\n\t\t\t\t\t\t\ttype: type,\n\t\t\t\t\t\t\ttitle: JSON.parse(JSON.stringify(state.assignmentDetails.question.title)),\n\t\t\t\t\t\t\twrittenQuestion: JSON.parse(JSON.stringify(state.assignmentDetails.question.writtenQuestion)),\n\t\t\t\t\t\t\tsnappedQuestions: JSON.parse(JSON.stringify(state.assignmentDetails.question.snappedQuestions)),\n\t\t\t\t\t\t\tsnappedPreviews: JSON.parse(JSON.stringify(state.assignmentDetails.question.snappedPreviews)),\n\t\t\t\t\t\t\tzoomMeetings: state.assignmentDetails.question.zoomMeetings,\n\t\t\t\t\t}\n\t\t\t},\n\n\n\t\t\tsetMeetingId(state, key) {\n\t\t\t\tstate.states.meeting_id = key;\n\t\t\t},\n\n\t\t\t// init, basically everything to null.\n\t\t\tinitialise(state) {\n\n\t\t\t\t\t// STATES\n\t\t\t\t\tstate.states = {\n\t\t\t\t\t\t\tisMain: true,\n\t\t\t\t\t\t\tisCreatingQuestion: false,\n\t\t\t\t\t\t\tisCreatingZoomQuestion: false,\n\t\t\t\t\t\t\tisInZoomMeeting: false,\n\t\t\t\t\t\t\tisSelectingDuration: false,\n\t\t\t\t\t\t\tisSelectingQuestionType: false,\n\t\t\t\t\t\t\tisWritingQuestion: false,\n\t\t\t\t\t\t\tisSnappingQuestion: false,\n\t\t\t\t\t\t\tisCroppingSnappedQuestion: false,\n\t\t\t\t\t\t\tisResettingQuestion: false,\n\t\t\t\t\t\t\tisShowingScheduler: false,\n\t\t\t\t\t\t\tisPublishing: false,\n\t\t\t\t\t\t\tisPublished: false,\n\t\t\t\t\t\t\tisShowingError: false,\n\t\t\t\t\t\t\tisInZoomMeeting: false,\n\t\t\t\t\t\t\tisVideoOn: false,\n\t\t\t\t\t\t\tisMicOn: false,\n\t\t\t\t\t\t\tisScreenShare: false,\n\t\t\t\t\t\t\tisRecording: false,\n\t\t\t\t\t\t\tmeeting_id: null,\n\t\t\t\t\t};\n\n\t\t\t\t\t// Main details to be submitted\n\t\t\t\t\tstate.assignmentDetails = {\n\t\t\t\t\t\t\ttitle: null,\n\t\t\t\t\t\t\tschool_id: \"\",\n\t\t\t\t\t\t\tsubject_id: \"\",\n\t\t\t\t\t\t\tclassroom_id: null,\n\t\t\t\t\t\t\tdue_datetime: null,\n\t\t\t\t\t\t\tquestion: {\n\t\t\t\t\t\t\t\t\ttype: null,\n\t\t\t\t\t\t\t\t\ttitle: null,\n\t\t\t\t\t\t\t\t\twrittenQuestion: null,\n\t\t\t\t\t\t\t\t\tsnappedQuestions: [],\n\t\t\t\t\t\t\t\t\tzoomeMeetings: null\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tpublished_at: moment(),\n\t\t\t\t\t}\n\n\t\t\t\t\t// Questions' draft, serve as temporary save point while creating question.\n\t\t\t\t\t// When draft is saved, load into assignment details\n\t\t\t\t\tstate.questionDraft = {\n\t\t\t\t\t\t\ttype: null,\n\t\t\t\t\t\t\ttitle: null,\n\t\t\t\t\t\t\twrittenQuestion: null,\n\t\t\t\t\t\t\tsnappedQuestions: [],\n\t\t\t\t\t\t\tsnappedPreviews: [],\n\t\t\t\t\t\t\tzoomMeetings: null\n\t\t\t\t\t}\n\n\t\t\t\t\t// Currently creating question details. To be used instantaneous.\n\t\t\t\t\t// When saved, load into question draft\n\t\t\t\t\tstate.creatingQuestionDetails = {\n\t\t\t\t\t\t\ttype: null,\n\t\t\t\t\t\t\ttitle: null,\n\t\t\t\t\t\t\twrittenQuestion: null,\n\t\t\t\t\t\t\tsnappedQuestions: [],\n\t\t\t\t\t\t\tsnappedPreviews: [],\n\t\t\t\t\t\t\tzoomMeetings: null,\n\t\t\t\t\t}\n\n\t\t\t\t\tstate.selectables = {\n\t\t\t\t\t\tschools:[],\n\t\t\t\t\t\tsubjects: [],\n\t\t\t\t\t\tclassrooms: []\n\t\t\t\t\t}\n\t\t\t}\n\n\t},\n\tactions: {\n\t\tselectQuestionType(type) {\n\t\t\t\tif (type === 'snapped') {\n\t\t\t\t\t\tthis.isSnappingQuestion = true;\n\t\t\t\t\t\tthis.isSelectingQuestionType = false;\n\t\t\t\t\t\tthis.questionDetails.type = 'snapped';\n\t\t\t\t}\n\t\t},\n\t\tbeginWritingQuestion({state, commit, getters}) {\n\t\t\tcommit('toggleWritingQuestionMode')\n\t\t\tstate.creatingQuestionDetails.type = 'written';\n\t\t},\n\t\tbeginWritingZoomQuestion({state, commit, getters}) {\n\t\t\t// triggered when user select zoom meeting question\n\t\t\tcommit('toogleZoomQuestionMode');\n\t\t\tstate.creatingQuestionDetails.type ='zoom';\n\t\t},\n\t\tsaveWrittenQuestionToDraft({state, commit, getters}) {\n\t\t\tif (state.creatingQuestionDetails.writtenQuestion) {\n\t\t\t\tcommit('toggleWritingQuestionMode')\n\t\t\t\tcommit('saveQuestionToDraft')\n\t\t\t} else {\n\t\t\t\tcommit('toggleShowingErrorMode')\n\t\t\t}\n\t\t},\n\t\tendWritingQuestion({state, getters, commit}) {\n\t\t\t// Exits writing question mode and return to Create/Edit question\n\t\t\t// If written draft exist, reload it into creatingQuestionDetails\n\t\t\t// Else, empty the creatingQuestionDetails and trigger Select Question mode\n\t\t\tcommit('toggleWritingQuestionMode')\n\t\t\tif (state.states.isSelectingQuestionType && getters.hasWrittenQuestionDraft) {\n\t\t\t\tstate.creatingQuestionDetails.type = 'written';\n\t\t\t\tstate.creatingQuestionDetails.writtenQuestion = JSON.parse(JSON.stringify(state.questionDraft.writtenQuestion))\n\t\t\t} else {\n\t\t\t\tstate.creatingQuestionDetails.writtenQuestion = '';\n\t\t\t\tstate.creatingQuestionDetails.type = null;\n\t\t\t}\n\t\t},\n\t\tremoveWrittenQuestionDraft({state, getters, commit}) {\n\t\t\tcommit('resetCreatingQuestion')\n\t\t},\n\t\tbeginSnappingQuestion({state, getters, commit}) {\n\t\t\tif (!state.states.isSnappingQuestion) {\n\t\t\t\tcommit('toggleSnappingQuestionMode');\n\t\t\t\tstate.creatingQuestionDetails.type = 'snapped';\n\t\t\t}\n\t\t},\n\t\thandleSnapQuestion({state, getters, commit, dispatch}, e) {\n\t\t\tlet files = e.target.files || e.dataTransfer.files\n\n\t\t\tif (!files.length) { return }\n\n\t\t\tlet fileList = Array.prototype.slice.call(e.target.files);\n\n\t\t\tfileList.forEach(f => {\n\t\t\t\tif (!f.type.match(\"image.*\")) { return; }\n\n\t\t\t\tlet reader = new FileReader();\n\n\t\t\t\treader.onload = (e) => {\n\t\t\t\t\tstate.creatingQuestionDetails.snappedQuestions.push(e.target.result)\n\t\t\t\t\tstate.creatingQuestionDetails.snappedPreviews.push({\n\t\t\t\t\t\tsource: e.target.result,\n\t\t\t\t\t\tpreview: false,\n\t\t\t\t\t\tcropping: false\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\treader.readAsDataURL(f);\n\t\t\t});\n\t\t},\n\t\tsaveCroppedSnappedQuestion({state, commit}, payload) {\n\t\t\tstate.creatingQuestionDetails.snappedPreviews[payload.key].source = payload.dataURL\n\t\t\tstate.creatingQuestionDetails.snappedQuestions[payload.key] = payload.dataURL\n\t\t\tcommit('toggleCroppingSnappedQuestionMode', payload.key);\n\t\t},\n\t\tremoveSnappedQuestion({state, commit}, key) {\n\t\t\tstate.creatingQuestionDetails.snappedQuestions.splice(key, 1);\n\t\t\tstate.creatingQuestionDetails.snappedPreviews.splice(key, 1);\n\n\t\t\tif (!state.creatingQuestionDetails.snappedQuestions.length) {\n\t\t\t\tcommit('resetCreatingQuestion')\n\t\t\t\tcommit('toggleSnappingQuestionMode')\n\t\t\t}\n\t\t},\n\t\thandleZoomQuestion({state, commit}, payload) {\n\t\t\t// handled when recording stops\n\t\t\t// payload should be the zoom recording file in blob\n\t\t\tconsole.log('trigger when new video stored');\n\n\t\t\tstate.creatingQuestionDetails.zoomMeetings = payload;\n\t\t\tconsole.log('payload', payload);\n\t\t},\n\t\tsaveZoomQuestionToDraf({state, commit}) {\n\t\t\t//pushing questionDetails.zoomMeetings to assignmentDetails.question\n\t\t\tconsole.log('saving zoom question draf')\n\n\t\t\tcommit('saveQuestionToDraft');\n\n\t\t\tif(state.creatingQuestionDetails.zoomMeetings) {\n\t\t\t\tcommit('toogleZoomQuestionMode');\n\t\t\t} else {\n\t\t\t\tcommit('toggleShowingErrorMode');\n\t\t\t\t}\n\t\t},\n\t\tcloseToggleDuration() {\n\t\t\t// MODE: MODAL\n\t\t\tif (this.durationDay === '') { this.durationDay = 0 }\n\t\t\tif (this.durationHour === '') { this.durationHour = 0 }\n\t\t\tif (this.durationMinute === '') { this.durationMinute = 0 }\n\n\t\t\tthis.toggleDuration = !this.toggleDuration\n\t\t},\n\t\tgetSchools({state}){\n\t\t\tTeacherRepository\n\t\t\t\t.getTeacherSchools()\n\t\t\t\t.then(res => {\n\t\t\t\t\tconsole.log('res', res.data);\n\t\t\t\t\tres.data.forEach(item => {\n\t\t\t\t\t\tstate.selectables.schools.push({\n\t\t\t\t\t\t\tid: item.id, \n\t\t\t\t\t\t\tname: item.name\n\t\t\t\t\t\t});\n\t\t\t\t\t})\n\t\t\t\t\t// update state.selectables.schools\n\t\t\t\t})\n\n\t\t},\n\t\tgetSubjects({state}) {\n\t\t\tTeacherRepository\n\t\t\t\t.getTeacherSubjects()\n\t\t\t\t.then(response => {\n\t\t\t\t\tif (response.data.success) {\n\t\t\t\t\t\tconst data = response.data.data\n\t\t\t\t\t\tconst numOfSubjects = data.length\n\n\t\t\t\t\t\tfor (let i = 0; i < numOfSubjects; i++) {\n\t\t\t\t\t\t\tlet item = data[i];\n\t\t\t\t\t\t\tlet subjectDetail = {\n\t\t\t\t\t\t\t\tid: item.subject_id,\n\t\t\t\t\t\t\t\tname: item.subject_name\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tstate.selectables.subjects.push(subjectDetail);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t},\n\t\tgetClasses({state, commit}) {\n\t\t\tTeacherRepository\n\t\t\t.getTeacherClasses()\n\t\t\t.then(response => {\n\t\t\t\tif (response.data.success) {\n\t\t\t\t\tconst data = response.data.data\n\t\t\t\t\tfor (let i = 0; i < data.length; i++) {\n\t\t\t\t\t\tlet item = data[i];\n\t\t\t\t\t\tlet classDetail = {\n\t\t\t\t\t\t\tid: item.class_id,\n\t\t\t\t\t\t\tname: item.class_name,\n\t\t\t\t\t\t\tnumOfStudents: item.num_of_students,\n\t\t\t\t\t\t\tisHomeroom: item.homeroom,\n\t\t\t\t\t\t}\n\t\t\t\t\t\tstate.selectables.classrooms.push(classDetail);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t},\n\t\t// updateShowManualDescription() {\n\t\t//   this.showDescription = !this.showDescription\n\t\t//   this.isCreatingQuestion = !this.isCreatingQuestion;\n\t\t// },\n\t\thandleQuestionDetails(details) {\n\t\t\tthis.questionDetails = details;\n\t\t},\n\t\tsaveQuestion({state, getters, commit}) {\n\t\t\t// Check if user selected a type of question\n\t\t\tif (state.creatingQuestionDetails.type) {\n\n\t\t\t// Check if user has inserted a question title\n\t\t\tif (state.creatingQuestionDetails.title) {\n\t\t\t\t// If user opt to Write Question\n\t\t\t\tif (getters.creatingQuestionType === 'written') {\n\t\t\t\t\tif (getters.hasWrittenQuestionDraft) {\n\t\t\t\t\t\tcommit('saveQuestionToAssignmentDetails');\n\t\t\t\t\t\tcommit('resetCreatingQuestion')\n\t\t\t\t\t\tcommit('toggleCreatingQuestionMode')\n\t\t\t\t\t} else {\n\t\t\t\t\t\tconsole.log('please write something')\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// If user opt to Snap Question\n\t\t\t\tif (getters.creatingQuestionType === 'snapped') {\n\t\t\t\t\tcommit('saveQuestionToDraft')\n\n\t\t\t\t\tif (getters.hasSnappedQuestionDraft) {\n\t\t\t\t\t\tcommit('saveQuestionToAssignmentDetails');\n\t\t\t\t\t\tcommit('resetCreatingQuestion')\n\t\t\t\t\t\tcommit('toggleCreatingQuestionMode')\n\t\t\t\t\t} else {\n\t\t\t\t\t\tconsole.log('please snap something')\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// if user opt to zoom question\n\t\t\t\tif (getters.creatingQuestionType === 'zoom') {\n\t\t\t\t\tconsole.log('saving zoom question');\n\n\t\t\t\t\tcommit('saveQuestionToDraft');\n\t\t\t\t\tif (getters.hasZoomQuestionDraf) {\n\t\t\t\t\t\tcommit('saveQuestionToAssignmentDetails');\n\t\t\t\t\t\tcommit('resetCreatingQuestion')\n\t\t\t\t\t\tcommit('toggleCreatingQuestionMode')\n\t\t\t\t\t} else {\n\t\t\t\t\t\tconsole.log('please record something');\n\t\t\t\t\t}\n\n\t\t\t\t\t// plan. sanitize and push to server\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tconsole.log('please fill in title')\n\t\t\t}\n\t\t} else {\n\t\t\tconsole.log('Please select a type of question.')\n\t\t}\n\t\t},\n\t\teditSavedQuestion({state, commit, getters}) {\n\t\t\tlet type = getters.savedQuestionType\n\n\t\t\tcommit('beginEditingQuestionMode', type)\n\t\t\tcommit('loadSavedQuestionForEdit', type)\n\t\t},\n\t\tcancelCreatingQuestion({state, commit, type}) {\n\t\t\tif (!getters.hasSavedQuestion) {\n\t\t\t\tcommit('resetCreatingQuestion')\n\t\t\t}\n\n\t\t\tcommit('cancelCreatingQuestionMode')\n\t\t},\n\t\tcheckForm({state, commit, getters}) {\n\t\t\t// Reset error\n\t\t\tstate.errors = [];\n\n\t\t\tif (!state.assignmentDetails.title) { state.errors.push('Title required.'); }\n\t\t\tif (!state.assignmentDetails.subject_id) { state.errors.push('Subject required.'); }\n\t\t\tif (!state.assignmentDetails.classroom_id) { state.errors.push('Classroom required.'); }\n\t\t\tif (!getters.hasSavedQuestion) { state.errors.push('Question required.'); }\n\t\t\tif (!state.assignmentDetails.due_datetime) { state.errors.push('Due date required'); }\n\t\t\tif (state.errors.length) { commit('toggleShowingErrorMode') }\n\t\t},\n\t\tasync sendData({state, commit, getters, dispatch}) {\n\t\t\t// send data to the server\n\n\t\t\tdispatch('checkForm');\n\n\t\t\tif (!getters.hasErrors) {\n\t\t\t\tlet counter = 0;\n\t\t\t\tlet zoom_meeting = null;\n\n\t\t\t\tif (state.states.isShowingScheduler) {\n\t\t\t\t\tcommit('toggleShowingSchedulerMode')\n\t\t\t\t}\n\n\t\t\t\tcommit('togglePublishingMode')\n\t\t\t\tcommit('toggleShowingSchedulerMode')\n\n\t\t\t// from lavarel code, it seems push the video to the server first and to get meeting\n\t\t\t// and then push the assignment  details\n\n\t\t\t// pre-flight check: see if it's a zoom meeting video.\n\t\t\t// if it's a zoom meeting, upload the video first and update assignment details\n\t\t\tconsole.log('check if got zoom video');\n\t\t\tif(state.assignmentDetails.question.type === 'zoom'){\n\t\t\t\tlet formData = new FormData();\n\t\t\t\tconst path = '/zoom-meeting/push_s3';\n\t\t\t\tlet recUrl = state.assignmentDetails.question.zoomMeetings;\n\t\t\t\tconsole.log('recovering video from ', recUrl);\n\n\t\t\t\tconsole.log('getting the video file');\n\t\t\t\tlet recBlob = await fetch(recUrl).then( r =>\n\t\t\t\t\tr.blob()).then(blobFile => new File([blobFile], \"test.webm\", { type: \"video/webm\"})\n\t\t\t\t);\n\n\t\t\t\tformData.append('zoomMeetings', recBlob);\n\n\t\t\t\tawait Repository.post(path, formData,   {\n\t\t\t\t\theaders: { 'Content-Type': 'multipart/form-data' }\n\t\t\t\t}).then( (res) => {\n\t\t\t\t\tzoom_meeting = res.data.zoom_meeting;\n\t\t\t\t\tconsole.log('res', res);\n\t\t\t\t});\n\t\t\t}\n\t\t\tconsole.log('done sending a zoom video', zoom_meeting);\n\n\t\t\tconsole.log('pushing the assignment detail');\n\t\t\t// push the assignment details for each class.\n\t\t\tstate.assignmentDetails.classroom_id.forEach((classroom, index) => {\n\n\t\t\tlet formData = new FormData();\n\n\t\t\tformData.append('subject_id', state.assignmentDetails.subject_id);\n\t\t\tformData.append('school_id', state.assignmentDetails.school_id);\n\t\t\tformData.append('class_id', classroom.id);\n\t\t\tformData.append('title', state.assignmentDetails.title);\n\t\t\tformData.append('written_question_title', state.assignmentDetails.question.title);\n\t\t\tformData.append('written_description', state.assignmentDetails.question.writtenQuestion ?? '');\n\t\t\tformData.append('due_datetime', moment(state.assignmentDetails.due_datetime).format('YYYY-MM-DD HH:mm:ss'));\n\t\t\tformData.append('published_at', moment(state.assignmentDetails.published_at).format('YYYY-MM-DD HH:mm:ss'));\n\t\t\tformData.append('remarks', state.assignmentDetails.remarks ?? '');\n\t\t\tformData.append('recording_meeting_id', zoom_meeting ? zoom_meeting.meeting_id : '');\n\n\t\t\tfor (let i = 0; i < state.assignmentDetails.question.snappedQuestions.length; i++) {\n\t\t\t\tlet file = state.assignmentDetails.question.snappedQuestions[i];\n\t\t\t\tformData.append('snap_question[' + i + ']', file);\n\t\t\t}\n\n\t\t\t// the part where actually save the assignment\n\t\t\tRepository.post('/assignments/store',\n\t\t\t\tformData,\n\t\t\t\t{\n\t\t\t\t\t\theaders: { 'Content-Type': 'multipart/form-data' }\n\t\t\t\t})\n\t\t\t\t.then(response => {\n\t\t\t\t\tif (response.data.success) {\n\t\t\t\t\t\tcounter++;\n\n\t\t\t\t\t\tif (counter === state.assignmentDetails.classroom_id.length) {\n\t\t\t\t\t\t\tcommit('togglePublishingMode')\n\t\t\t\t\t\t\tcommit('togglePublishedMode')\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tcounter++;\n\t\t\t\t\t\tif (counter === state.assignmentDetails.classroom_id.length) {\n\t\t\t\t\t\t\t\tcommit('toggleShowingErrorMode')\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.catch(error => {\n\t\t\t\t\tcommit('togglePublishingMode')\n\t\t\t\t\tcommit('toggleShowingErrorMode')\n\t\t\t\t});\n\t\t\t});\n\n\t\t\tconsole.log('done sending the assignment to db');\n\t\t}\n\t\t},\n\t\ttestRecordMeeting({state, commit}){\n\t\t\t// test the past where posting to '/zoom-meeting/store'\n\t\t\t//const host = 'https://admin.gotsnapped.tech/api';\n\t\t\tconst host = 'http://localhost:8000/api';\n\t\t\tconst path = '/zoom-meeting/store';\n\t\t\tconst topic = \"test meeting\"\n\t\t\tlet formData = new FormData();\n\n\t\t\tformData.append('topic', topic);\n\t\t\tformData.append('agenda', topic);\n\t\t\tformData.append('duration', '5');\n\t\t\tformData.append('host_video', '1');\n\t\t\tformData.append('participant_video', '1');\n\n\n\t\t\tRepository.post(path, formData).then((res) => {\n\t\t\t\tconsole.log('response', res);\n\n\t\t\t\tconsole.log('data', res.data.data);\n\t\t\t\tconsole.log('meetind_id', res.data.data.id);\n\t\t\t\tcommit('setMeetingId', res.data.data.id);\n\n\t\t\t\tconsole.log('meeting_url', res.data.data.join_url);\n\t\t\t})\n\n\t\t},\n\t\ttestGetMeetingRecordings({state}){\n\t\t\t// retrive meeting recordings from state.states.meeting_id\n\t\t\tconsole.log('meeting_id is ', state.states.meeting_id);\n\n\t\t\tif(state.states.meeting_id) {\n\t\t\t\tconst path = '/zoom-meeting/' + state.states.meeting_id + '/recordings';\n\t\t\t\tconsole.log('getting recordings from ', path);\n\t\t\t\tRepository.get(path).then( (res) => {\n\t\t\t\t\tconsole.log('res', res);\n\t\t\t\t})\n\t\t\t}\n\t\t},\n\t\tasync testSendRecordings({state }){\n\t\t\tconsole.log('in testSendRecordings');\n\t\t\tconst path = '/zoom-meeting/push_s3';\n\n\t\t\t/*\n\t\t\t\tplan:-\n\t\t\t\tfor testing, see if i can push the file contents from\n\t\t\t\t\tquestionDetails.zoomMeetings to the server and eventually to s3.\n\t\t\t*/\n\n\t\t\t//validation, ensure the zoomMeetings is populated\n\t\t\t/*\n\t\t\tif(!state.assignmentDetails.zoomMeetings){\n\t\t\t\tconsole.log('plese record a video');\n\t\t\t}\n\t\t\t*/\n\n\t\t\t// build up formData\n\t\t\tlet formData = new FormData();\n\t\t\tlet recUrl = state.creatingQuestionDetails.zoomMeetings;\n\t\t\tlet recBlob = await fetch(recUrl).then( r =>\n\t\t\t\tr.blob()).then(blobFile =>\n\t\t\t\t\tnew File([blobFile], \"test.webm\", { type: \"video/webm\"})\n\t\t\t);\n\t\t\tformData.append('zoomMeetings', recBlob);\n\t\t\tRepository.post(path, formData,   {\n\t\t\t\theaders: { 'Content-Type': 'multipart/form-data' }\n\t\t\t}).then( (res) => {\n\t\t\t\tconsole.log('res', res);\n\t\t\t});\n\t\t},\n\t\tgetDetails: function () {\n\t\t\tTeacherRepository\n\t\t\t.getTeacherDetails()\n\t\t\t.then(response => {\n\t\t\t\tif (response.data.success) {\n\t\t\t\t\t\tconst data = response.data.data[0]\n\n\t\t\t\t\t\tlet teacherDetail = { id: data.id, }\n\n\t\t\t\t\t\tlocalStorage.setItem('teacherID', teacherDetail.id)\n\t\t\t\t}\n\t\t\t})\n\t\t},\n\t\tsetAssignmentTitle({state}, maxedTitle) {\n\t\t\tstate.assignmentDetails.title = maxedTitle;\n\t\t}\n\t},\n\tgetters: {\n\t\tcreatingQuestionType: (state) => { return state.creatingQuestionDetails.type; },\n\t\tsavedQuestionType: (state) => { return state.assignmentDetails.question.type; },\n\t\tdueDateTime(state) { return moment(state.assignmentDetails.due_datetime).format('DD/MM/YYYY') },\n\t\tsnappedPreviews(state) { return state.assignmentDetails.question.snappedQuestions; },\n\t\thasSavedQuestion: (state) => {\n\t\t\treturn state.assignmentDetails.question.type && (\n\t\t\t\tstate.assignmentDetails.question.writtenQuestion ||\n\t\t\t\tstate.assignmentDetails.question.snappedQuestions.length ||\n\t\t\t\tstate.assignmentDetails.question.zoomMeetings !== null\n\t\t\t);\n\t\t},\n\t\thasSavedDueDatetime: (state) => {\n\t\t\t\treturn state.assignmentDetails.due_datetime !== null;\n\t\t},\n\t\thasEditableQuestion(state, getters) {\n\t\t\t\treturn state.states.isCreatingQuestion && !state.states.isWritingQuestion && (getters.hasWrittenQuestionDraft || getters.hasSnappedQuestionDraft)\n\t\t},\n\t\thasWrittenQuestionDraft: (state) => {\n\t\t\t\treturn state.questionDraft.type ? (state.questionDraft.type === 'written' && state.questionDraft.writtenQuestion) : false;\n\t\t},\n\t\thasSnappedQuestionDraft(state) {\n\t\t\t\treturn state.questionDraft.type ? state.questionDraft.type === 'snapped' && state.questionDraft.snappedQuestions.length > 0 : false;\n\t\t},\n\t\thasZoomQuestionDraf(state){\n\t\t\treturn state.questionDraft.type ?\n\t\t\t\tstate.questionDraft.type === 'zoom' && state.questionDraft.zoomMeetings !== null :\n\t\t\t\tfalse;\n\t\t},\n\t\thasErrors(state) { return state.errors.length || state.states.isShowingError },\n\t\thasZoomMeeting(state) { return state.states.isInZoomMeeting; },\n\t\thasZoomVideo(state) { return state.states.isVideoOn; },\n\t\thasZoomMic(state) { return state.states.isMicOn; },\n\t\thasZoomScreenShare(state) { return state.states.isScreenShare; },\n\t\thasZoomRecording(state) { return state.states.isRecording; }\n\t}\n}\n"],"mappings":"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"}]}