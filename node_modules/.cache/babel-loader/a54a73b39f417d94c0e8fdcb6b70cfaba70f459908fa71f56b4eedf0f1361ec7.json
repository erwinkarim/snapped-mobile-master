{"ast":null,"code":"import GoogleClassroomRepository from \"@/repositories/GoogleClassroomRepository\";\nexport default {\n  name: \"googleAuthCallback\",\n  data() {\n    return {\n      // State\n      isAuthenticating: true,\n      isAuthenticated: false,\n      title: 'Authenticating...',\n      message: \"Please wait. Thank you.\"\n    };\n  },\n  methods: {\n    googleClassroomCallback() {\n      let payload = {\n        code: this.$route.query.code\n        // token: this.$store.getters.getToken\n      };\n\n      GoogleClassroomRepository.integrationCallback(payload).then(response => {\n        if (response.data.success) {\n          // Give time to update user details at backend\n          setTimeout(() => {\n            this.isAuthenticating = false;\n            this.title = 'Success!';\n            this.message = response.data.message;\n\n            // Send post message to parent. To get updated user details\n            window.opener.postMessage({\n              success: true\n            });\n\n            // Close the window\n            setTimeout(() => {\n              window.close();\n            }, 1500);\n          }, 1500);\n        } else {\n          this.title = 'Oops!';\n          this.message = response.data.message;\n          setTimeout(() => {\n            window.close();\n          }, 1500);\n        }\n      }).catch(error => {\n        this.isAuthenticating = false;\n        this.title = 'Oops!';\n        this.message = error;\n      });\n    }\n  },\n  mounted() {\n    window.addEventListener('message', this.handleMessage);\n  },\n  created() {\n    this.googleClassroomCallback();\n  }\n};","map":{"version":3,"names":["GoogleClassroomRepository","name","data","isAuthenticating","isAuthenticated","title","message","methods","googleClassroomCallback","payload","code","$route","query","integrationCallback","then","response","success","setTimeout","window","opener","postMessage","close","catch","error","mounted","addEventListener","handleMessage","created"],"sources":["/Users/erwinkarim/Websites/Snapped/snapped-mobile-master/src/views/integrations/googleAuthCallback.vue"],"sourcesContent":["<template>\n  <div class=\"mx-auto h-screen flex flex-col justify-center items-center\">\n    <div class=\"font-bold my-3 text-xl\">\n      {{ title }}\n    </div>\n    <div class=\"text-sm\">\n      {{ message }}\n    </div>\n  </div>\n</template>\n\n<script>\nimport GoogleClassroomRepository from \"@/repositories/GoogleClassroomRepository\";\n\nexport default {\n  name: \"googleAuthCallback\",\n  data() {\n    return {\n\n      // State\n      isAuthenticating: true,\n      isAuthenticated: false,\n\n      title: 'Authenticating...',\n      message: \"Please wait. Thank you.\",\n    }\n  },\n  methods: {\n    googleClassroomCallback() {\n\n      let payload = {\n        code: this.$route.query.code,\n        // token: this.$store.getters.getToken\n      }\n\n      GoogleClassroomRepository.integrationCallback(payload)\n          .then(response => {\n\n            if (response.data.success) {\n\n              // Give time to update user details at backend\n              setTimeout(() => {\n                this.isAuthenticating = false;\n\n                this.title = 'Success!'\n                this.message = response.data.message\n\n                // Send post message to parent. To get updated user details\n                window.opener.postMessage({success: true})\n\n                // Close the window\n                setTimeout(() => {\n                  window.close();\n                }, 1500)\n              }, 1500)\n\n\n            } else {\n\n              this.title = 'Oops!'\n              this.message = response.data.message\n\n              setTimeout(() => {\n                window.close();\n              }, 1500)\n            }\n          })\n          .catch((error) => {\n\n            this.isAuthenticating = false;\n\n            this.title = 'Oops!'\n            this.message = error;\n          });\n    },\n  },\n  mounted() {\n    window.addEventListener('message', this.handleMessage)\n  },\n  created() {\n    this.googleClassroomCallback();\n  }\n}\n</script>\n\n<style scoped>\n\n</style>\n"],"mappings":"AAYA,OAAOA,yBAAwB,MAAO,0CAA0C;AAEhF,eAAe;EACbC,IAAI,EAAE,oBAAoB;EAC1BC,IAAIA,CAAA,EAAG;IACL,OAAO;MAEL;MACAC,gBAAgB,EAAE,IAAI;MACtBC,eAAe,EAAE,KAAK;MAEtBC,KAAK,EAAE,mBAAmB;MAC1BC,OAAO,EAAE;IACX;EACF,CAAC;EACDC,OAAO,EAAE;IACPC,uBAAuBA,CAAA,EAAG;MAExB,IAAIC,OAAM,GAAI;QACZC,IAAI,EAAE,IAAI,CAACC,MAAM,CAACC,KAAK,CAACF;QACxB;MACF;;MAEAV,yBAAyB,CAACa,mBAAmB,CAACJ,OAAO,EAChDK,IAAI,CAACC,QAAO,IAAK;QAEhB,IAAIA,QAAQ,CAACb,IAAI,CAACc,OAAO,EAAE;UAEzB;UACAC,UAAU,CAAC,MAAM;YACf,IAAI,CAACd,gBAAe,GAAI,KAAK;YAE7B,IAAI,CAACE,KAAI,GAAI,UAAS;YACtB,IAAI,CAACC,OAAM,GAAIS,QAAQ,CAACb,IAAI,CAACI,OAAM;;YAEnC;YACAY,MAAM,CAACC,MAAM,CAACC,WAAW,CAAC;cAACJ,OAAO,EAAE;YAAI,CAAC;;YAEzC;YACAC,UAAU,CAAC,MAAM;cACfC,MAAM,CAACG,KAAK,EAAE;YAChB,CAAC,EAAE,IAAI;UACT,CAAC,EAAE,IAAI;QAGT,OAAO;UAEL,IAAI,CAAChB,KAAI,GAAI,OAAM;UACnB,IAAI,CAACC,OAAM,GAAIS,QAAQ,CAACb,IAAI,CAACI,OAAM;UAEnCW,UAAU,CAAC,MAAM;YACfC,MAAM,CAACG,KAAK,EAAE;UAChB,CAAC,EAAE,IAAI;QACT;MACF,CAAC,EACAC,KAAK,CAAEC,KAAK,IAAK;QAEhB,IAAI,CAACpB,gBAAe,GAAI,KAAK;QAE7B,IAAI,CAACE,KAAI,GAAI,OAAM;QACnB,IAAI,CAACC,OAAM,GAAIiB,KAAK;MACtB,CAAC,CAAC;IACR;EACF,CAAC;EACDC,OAAOA,CAAA,EAAG;IACRN,MAAM,CAACO,gBAAgB,CAAC,SAAS,EAAE,IAAI,CAACC,aAAa;EACvD,CAAC;EACDC,OAAOA,CAAA,EAAG;IACR,IAAI,CAACnB,uBAAuB,EAAE;EAChC;AACF"},"metadata":{},"sourceType":"module","externalDependencies":[]}