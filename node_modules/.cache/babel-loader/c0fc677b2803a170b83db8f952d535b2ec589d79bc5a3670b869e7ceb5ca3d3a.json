{"ast":null,"code":"import { renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, resolveComponent as _resolveComponent, createVNode as _createVNode, withCtx as _withCtx, toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, normalizeClass as _normalizeClass, createCommentVNode as _createCommentVNode } from \"vue\";\nconst _hoisted_1 = [\"onClick\"];\nconst _hoisted_2 = {\n  class: \"flex flex-row items-center w-11/12\"\n};\nconst _hoisted_3 = {\n  class: \"w-5/6 ml-5 text-purple-primary truncate pr-4\"\n};\nconst _hoisted_4 = {\n  class: \"w-1/12\"\n};\nconst _hoisted_5 = /*#__PURE__*/_createElementVNode(\"div\", {\n  slot: \"spinner\",\n  class: \"mt-10\"\n}, \"Loading...\", -1 /* HOISTED */);\nconst _hoisted_6 = /*#__PURE__*/_createElementVNode(\"div\", {\n  slot: \"no-more\"\n}, null, -1 /* HOISTED */);\nconst _hoisted_7 = /*#__PURE__*/_createElementVNode(\"div\", {\n  slot: \"no-results\"\n}, \"No results message\", -1 /* HOISTED */);\n\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_profile_photo = _resolveComponent(\"profile-photo\");\n  const _component_icon_base_two = _resolveComponent(\"icon-base-two\");\n  const _component_tagging_icon = _resolveComponent(\"tagging-icon\");\n  const _component_infinite_loading = _resolveComponent(\"infinite-loading\");\n  return _openBlock(), _createElementBlock(\"div\", null, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.students, student => {\n    return _openBlock(), _createElementBlock(\"div\", {\n      key: student.id,\n      onClick: $event => $options.goToStudentShow(student.id),\n      class: \"text-left px-5 py-2 h-20 flex flex-row w-full border-b-1 items-center bg-white\"\n    }, [_createElementVNode(\"div\", _hoisted_2, [_createVNode(_component_icon_base_two, {\n      class: \"w-1/6\",\n      \"icon-name\": \"profile-photo-icon\",\n      \"icon-color\": \"white\",\n      \"view-box\": \"0 0 60 55\"\n    }, {\n      default: _withCtx(() => [_createVNode(_component_profile_photo, {\n        gender: student.gender\n      }, null, 8 /* PROPS */, [\"gender\"])], undefined, true),\n      _: 2 /* DYNAMIC */\n    }, 1024 /* DYNAMIC_SLOTS */), _createElementVNode(\"div\", _hoisted_3, _toDisplayString(student.name), 1 /* TEXT */)]), _ctx.performance.student_id === student.id ? (_openBlock(true), _createElementBlock(_Fragment, {\n      key: 0\n    }, _renderList($data.performances, performance => {\n      return _openBlock(), _createElementBlock(\"div\", _hoisted_4, [_createVNode(_component_icon_base_two, {\n        class: _normalizeClass([$options.taggingClass(performance.status_color), \"w-5/6\"])\n      }, {\n        default: _withCtx(() => [_createVNode(_component_tagging_icon)], undefined, true),\n        _: 2 /* DYNAMIC */\n      }, 1032 /* PROPS, DYNAMIC_SLOTS */, [\"class\"])]);\n    }), 256 /* UNKEYED_FRAGMENT */)) : _createCommentVNode(\"v-if\", true)], 8 /* PROPS */, _hoisted_1);\n  }), 128 /* KEYED_FRAGMENT */)), _createVNode(_component_infinite_loading, {\n    identifier: $data.filterCount,\n    onInfinite: $options.handleInfiniteScroll,\n    spinner: \"bubbles\",\n    \"force-use-infinite-wrapper\": \"\"\n  }, {\n    default: _withCtx(() => [_hoisted_5, _hoisted_6, _hoisted_7], undefined, true),\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"identifier\", \"onInfinite\"])]);\n}","map":{"version":3,"names":["class","_createElementVNode","slot","_createElementBlock","_Fragment","_renderList","$data","students","student","key","id","onClick","$event","$options","goToStudentShow","_hoisted_2","_createVNode","_component_icon_base_two","_component_profile_photo","gender","_hoisted_3","_toDisplayString","name","_ctx","performance","student_id","performances","_hoisted_4","_normalizeClass","taggingClass","status_color","_component_tagging_icon","_component_infinite_loading","identifier","filterCount","onInfinite","handleInfiniteScroll","spinner","_hoisted_5","_hoisted_6","_hoisted_7"],"sources":["/Users/erwinkarim/Websites/Snapped/snapped-mobile-master/src/views/teachers/TeachersStudents/StudentsList.vue"],"sourcesContent":["<template>\n  <div>\n    <div v-for=\"student in students\"\n         :key=\"student.id\"\n         @click=\"goToStudentShow(student.id)\"\n         class=\"text-left px-5 py-2 h-20 flex flex-row w-full border-b-1 items-center bg-white\"\n    >\n      <div class=\"flex flex-row items-center w-11/12\">\n        <icon-base-two class=\" w-1/6\" icon-name=\"profile-photo-icon\" icon-color=\"white\" view-box=\"0 0 60 55\">\n          <profile-photo :gender=\"student.gender\"/>\n        </icon-base-two>\n        <div class=\"w-5/6 ml-5 text-purple-primary  truncate pr-4\"> {{ student.name }}</div>\n      </div>\n      <div v-for=\"performance in performances\"\n           v-if=\"performance.student_id === student.id \"\n           class=\" w-1/12\"\n      >\n        <icon-base-two :class=\"taggingClass(performance.status_color)\" class=\"w-5/6\">\n          <tagging-icon/>\n        </icon-base-two>\n      </div>\n    </div>\n\n    <infinite-loading :identifier=\"filterCount\"\n                      @infinite=\"handleInfiniteScroll\"\n                      spinner=\"bubbles\"\n                      force-use-infinite-wrapper\n    >\n      <div slot=\"spinner\" class=\"mt-10\">Loading...</div>\n      <div slot=\"no-more\"></div>\n      <div slot=\"no-results\">No results message</div>\n    </infinite-loading>\n\n  </div>\n</template>\n\n<script>\nimport TeacherRepository from \"@/repositories/TeacherRepository\";\nimport IconBase from \"@/components/IconBase\";\nimport ProfilePhoto from \"@/components/icons/ProfilePhoto\";\nimport router from \"@/router\";\nimport TaggingIcon from \"../../../components/icons/TaggingIcon\";\nimport IconBaseTwo from \"../../../components/IconBaseTwo\";\nimport StudentRepository from \"@/repositories/StudentRepository\";\nimport InfiniteLoading from \"vue-infinite-loading\";\n\n\nexport default {\n  name: \"StudentsList\",\n  props: {\n    search: String\n  },\n  data() {\n    return {\n\n      // states\n      error: null,\n      loading: false,\n      awaitingSearch: false,\n\n      filterCount: 0,\n      filters: {\n        pageNum: 1,\n        perPage: 20,\n        search: ''\n      },\n      meta: null,\n\n      // data\n      students: [],\n      performances: null\n    }\n  },\n  watch: {\n    '$route': 'fetchData',\n    'search': 'searchName'\n  },\n  computed: {\n    hasLoadMore() {\n      if (this.meta) {\n        return this.filters.pageNum <= this.meta.last_page\n      } else {\n        return true;\n      }\n    },\n  },\n  methods: {\n\n    handleInfiniteScroll($state) {\n\n      if (this.hasLoadMore) {\n\n        TeacherRepository.getTeacherStudents(this.filters)\n            .then(response => {\n\n              let data = response.data.data\n\n              for (let i = 0; i < data.length; i++) {\n                this.students.push(data[i]);\n              }\n\n              // Update meta details and pageNum for filters\n              this.meta = response.data.meta;\n              this.filters.pageNum = this.meta.current_page + 1;\n\n              $state.loaded();\n\n            })\n\n      } else {\n        $state.complete();\n      }\n    },\n\n    getStudentPerformance() {\n      TeacherRepository.getStudentPerformance()\n          .then(response => {\n            let data = response.data;\n\n            this.performances = data.data;\n          })\n    },\n\n    searchName() {\n\n      this.filters.search = this.search;\n\n      if (!this.awaitingSearch) {\n        setTimeout(() => {\n          this.awaitingSearch = false;\n          this.updateFilter();\n        }, 1000); // 1 sec delay\n      }\n      this.awaitingSearch = true;\n    },\n\n    updateFilter() {\n      this.filters.pageNum = 1\n      this.filters.perPage = 20\n\n      this.students = [];\n      this.filterCount++;\n    },\n\n    goToStudentShow(studentID) {\n      router.push({name: 'student.profile.show', params: {studentID: studentID}})\n    },\n\n    taggingClass(statusColor) {\n\n      switch (statusColor) {\n        case 'neutral' :\n          return '';\n        case 'red':\n          return 'text-red-primary';\n        case 'yellow':\n          return \"text-yellow-primary\";\n        case 'green':\n          return \"text-green-primary\";\n      }\n    }\n  },\n  created() {\n    // this.fetchData()\n  },\n  mounted() {\n    this.getStudentPerformance()\n  },\n  components: {IconBaseTwo, TaggingIcon, ProfilePhoto, IconBase, InfiniteLoading},\n\n}\n</script>\n\n<style scoped>\n\n</style>\n"],"mappings":";;;EAOWA,KAAK,EAAC;AAAoC;;EAIxCA,KAAK,EAAC;AAA+C;;EAIvDA,KAAK,EAAC;AAAS;gCAapBC,mBAAA,CAAkD;EAA7CC,IAAI,EAAC,SAAS;EAACF,KAAK,EAAC;GAAQ,YAAU;gCAC5CC,mBAAA,CAA0B;EAArBC,IAAI,EAAC;AAAS;gCACnBD,mBAAA,CAA+C;EAA1CC,IAAI,EAAC;AAAY,GAAC,oBAAkB;;;;;;;uBA7B7CC,mBAAA,CAgCM,e,kBA/BJA,mBAAA,CAmBMC,SAAA,QAAAC,WAAA,CAnBiBC,KAAA,CAAAC,QAAQ,EAAnBC,OAAO;yBAAnBL,mBAAA,CAmBM;MAlBAM,GAAG,EAAED,OAAO,CAACE,EAAE;MACfC,OAAK,EAAAC,MAAA,IAAEC,QAAA,CAAAC,eAAe,CAACN,OAAO,CAACE,EAAE;MAClCV,KAAK,EAAC;QAETC,mBAAA,CAKM,OALNc,UAKM,GAJJC,YAAA,CAEgBC,wBAAA;MAFDjB,KAAK,EAAC,OAAQ;MAAC,WAAS,EAAC,oBAAoB;MAAC,YAAU,EAAC,OAAO;MAAC,UAAQ,EAAC;;wBACvF,MAAyC,CAAzCgB,YAAA,CAAyCE,wBAAA;QAAzBC,MAAM,EAAEX,OAAO,CAACW;;;kCAElClB,mBAAA,CAAoF,OAApFmB,UAAoF,EAAAC,gBAAA,CAArBb,OAAO,CAACc,IAAI,iB,GAGlEC,IAAA,CAAAC,WAAW,CAACC,UAAU,KAAKjB,OAAO,CAACE,EAAE,I,kBADhDP,mBAAA,CAOMC,SAAA;MAAAK,GAAA;IAAA,GAAAJ,WAAA,CAPqBC,KAAA,CAAAoB,YAAY,EAA3BF,WAAW;2BAAvBrB,mBAAA,CAOM,OAPNwB,UAOM,GAHJX,YAAA,CAEgBC,wBAAA;QAFAjB,KAAK,EAAA4B,eAAA,EAAEf,QAAA,CAAAgB,YAAY,CAACL,WAAW,CAACM,YAAY,GAAS,OAAO;;0BAC1E,MAAe,CAAfd,YAAA,CAAee,uBAAA,E;;;;kCAKrBf,YAAA,CAQmBgB,2BAAA;IARAC,UAAU,EAAE3B,KAAA,CAAA4B,WAAW;IACvBC,UAAQ,EAAEtB,QAAA,CAAAuB,oBAAoB;IAC/BC,OAAO,EAAC,SAAS;IACjB,4BAA0B,EAA1B;;sBAEhB,MAAkD,CAAlDC,UAAkD,EAClDC,UAA0B,EAC1BC,UAA+C,C"},"metadata":{},"sourceType":"module","externalDependencies":[]}