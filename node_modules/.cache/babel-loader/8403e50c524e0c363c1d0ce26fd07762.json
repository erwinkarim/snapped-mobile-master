{"remainingRequest":"/Users/erwinkarim/Websites/Snapped/snapped-mobile-master/node_modules/thread-loader/dist/cjs.js!/Users/erwinkarim/Websites/Snapped/snapped-mobile-master/node_modules/babel-loader/lib/index.js!/Users/erwinkarim/Websites/Snapped/snapped-mobile-master/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/erwinkarim/Websites/Snapped/snapped-mobile-master/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/erwinkarim/Websites/Snapped/snapped-mobile-master/src/views/students/StudentAssignments/Answer/AnswerSave.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/erwinkarim/Websites/Snapped/snapped-mobile-master/src/views/students/StudentAssignments/Answer/AnswerSave.vue","mtime":1679379067245},{"path":"/Users/erwinkarim/Websites/Snapped/snapped-mobile-master/babel.config.js","mtime":1679379067182},{"path":"/Users/erwinkarim/Websites/Snapped/snapped-mobile-master/node_modules/cache-loader/dist/cjs.js","mtime":1680070113546},{"path":"/Users/erwinkarim/Websites/Snapped/snapped-mobile-master/node_modules/thread-loader/dist/cjs.js","mtime":1680070298752},{"path":"/Users/erwinkarim/Websites/Snapped/snapped-mobile-master/node_modules/babel-loader/lib/index.js","mtime":1680059914906},{"path":"/Users/erwinkarim/Websites/Snapped/snapped-mobile-master/node_modules/cache-loader/dist/cjs.js","mtime":1680070113546},{"path":"/Users/erwinkarim/Websites/Snapped/snapped-mobile-master/node_modules/vue-loader/lib/index.js","mtime":1680070113705}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkucHVzaC5qcyI7CmltcG9ydCBQYWdlVGl0bGVUd28gZnJvbSAiQC9jb21wb25lbnRzL1BhZ2VUaXRsZVR3byI7CmltcG9ydCBOYXZCYWNrIGZyb20gIkAvY29tcG9uZW50cy9OYXZCYWNrIjsKaW1wb3J0IEljb25CYXNlVHdvIGZyb20gIkAvY29tcG9uZW50cy9JY29uQmFzZVR3byI7CmltcG9ydCBUcmFzaEljb24gZnJvbSAiQC9jb21wb25lbnRzL2ljb25zL1RyYXNoSWNvbiI7CmltcG9ydCBNb2RhbCBmcm9tICJAL2NvbXBvbmVudHMvTW9kYWwiOwppbXBvcnQgRGFzaGJvYXJkTGF5b3V0IGZyb20gIkAvdmlld3MvbGF5b3V0L0Rhc2hib2FyZExheW91dCI7CmltcG9ydCBQYWdlSGVhZGVyVGhyZWUgZnJvbSAiQC9jb21wb25lbnRzL1BhZ2VIZWFkZXJUaHJlZSI7CmltcG9ydCByb3V0ZXIgZnJvbSAiQC9yb3V0ZXIiOwppbXBvcnQgQXJyb3dCYWNrSWNvbiBmcm9tICJAL2NvbXBvbmVudHMvaWNvbnMvQXJyb3dCYWNrSWNvbiI7CmltcG9ydCBDcm9wSWNvbiBmcm9tICJAL2NvbXBvbmVudHMvaWNvbnMvQ3JvcEljb24iOwoKLy8gVnVlIENyb3BwZXIKaW1wb3J0IFZ1ZUNyb3BwZXIgZnJvbSAndnVlLWNyb3BwZXJqcyc7CmltcG9ydCAnY3JvcHBlcmpzL2Rpc3QvY3JvcHBlci5jc3MnOwoKLy8gRk9OVCBBV0VTT01FCmltcG9ydCB7IEZvbnRBd2Vzb21lSWNvbiB9IGZyb20gJ0Bmb3J0YXdlc29tZS92dWUtZm9udGF3ZXNvbWUnOwppbXBvcnQgeyBmYVRyYXNoLCBmYUNyb3BBbHQgfSBmcm9tICJAZm9ydGF3ZXNvbWUvZnJlZS1zb2xpZC1zdmctaWNvbnMiOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIkFuc3dlclNhdmUiLAogIHByb3BzOiB7CiAgICBhbnN3ZXI6IE9iamVjdCwKICAgIGFzc2lnbm1lbnREZXRhaWxzOiBPYmplY3QKICB9LAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICAvLyBTdGF0ZXMKICAgICAgaXNNYWluUGFnZTogdHJ1ZSwKICAgICAgaXNQcmV2aWV3aW5nU25hcHBlZEFuc3dlcjogZmFsc2UsCiAgICAgIGlzU3VibWl0dGluZzogZmFsc2UsCiAgICAgIGlzU2hvd2luZ01vZGFsOiBmYWxzZSwKICAgICAgc3VibWlzc2lvblN0YXR1czogbnVsbCwKICAgICAgc25hcHBlZEFuc3dlclByZXZpZXdzOiBbXSwKICAgICAgcmVtYXJrczogJycsCiAgICAgIHNuYXBwZWRBbnN3ZXJzOiBbXSwKICAgICAgLy8gSWNvbnMKICAgICAgaWNvbnM6IHsKICAgICAgICBjcm9wOiBmYUNyb3BBbHQsCiAgICAgICAgdHJhc2g6IGZhVHJhc2gKICAgICAgfQogICAgfTsKICB9LAogIGNvbXB1dGVkOiB7CiAgICBoYXNBbnN3ZXJDb250ZW50KCkgewogICAgICByZXR1cm4gdGhpcy5hbnN3ZXIudHlwZSAhPT0gbnVsbCAmJiB0aGlzLmFuc3dlci5jb250ZW50ICE9PSAnJzsKICAgIH0sCiAgICBpc1dyaXR0ZW5BbnN3ZXIoKSB7CiAgICAgIHJldHVybiB0aGlzLmFuc3dlci50eXBlID09PSAnd3JpdHRlbic7CiAgICB9LAogICAgaXNTbmFwcGVkQW5zd2VyKCkgewogICAgICByZXR1cm4gdGhpcy5hbnN3ZXIudHlwZSA9PT0gJ3NuYXBwZWQnOwogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgdG9nZ2xlU25hcHBlZEFuc3dlclByZXZpZXcoKSB7CiAgICAgIGlmICh0aGlzLmlzUHJldmlld2luZ1NuYXBwZWRBbnN3ZXIpIHsKICAgICAgICB0aGlzLmlzTWFpblBhZ2UgPSB0cnVlOwogICAgICAgIHRoaXMuaXNQcmV2aWV3aW5nU25hcHBlZEFuc3dlciA9IGZhbHNlOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuaXNNYWluUGFnZSA9IGZhbHNlOwogICAgICAgIHRoaXMuaXNQcmV2aWV3aW5nU25hcHBlZEFuc3dlciA9IHRydWU7CiAgICAgIH0KICAgIH0sCiAgICBvbkZpbGVTZWxlY3RlZChlKSB7CiAgICAgIGxldCBmaWxlcyA9IGUudGFyZ2V0LmZpbGVzIHx8IGUuZGF0YVRyYW5zZmVyLmZpbGVzOwogICAgICBpZiAoIWZpbGVzLmxlbmd0aCkgewogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICBpZiAoZmlsZXNbMF0udHlwZS5tYXRjaCgiaW1hZ2UuKiIpKSB7CiAgICAgICAgdGhpcy5nZW5lcmF0ZVNuYXBwZWRBbnN3ZXJQcmV2aWV3KGZpbGVzKTsKICAgICAgfQogICAgICBlLnRhcmdldC52YWx1ZSA9ICcnOwogICAgfSwKICAgIGhhbmRsZVZ1ZUNyb3BwZXJSZWFkeShlKSB7CiAgICAgIGxldCBjcm9wcGVyID0gZS50YXJnZXQuY3JvcHBlcjsKICAgICAgY3JvcHBlci5hdXRvQ3JvcCA9IGZhbHNlOwogICAgICBjcm9wcGVyLmNsZWFyKCk7CiAgICAgIGNyb3BwZXIuZGlzYWJsZSgpOwoKICAgICAgLy8gSWYgdGhpcyBpcyBuZXcgcGhvdG8gdXBsb2FkZWQsIGFkZCBpbWFnZSB0byBzbmFwcGVkIGFuc3dlcnMgYXJyYXkKICAgICAgaWYgKCFjcm9wcGVyLnJlcGxhY2VkKSB7CiAgICAgICAgY3JvcHBlci5nZXRDcm9wcGVkQ2FudmFzKHsKICAgICAgICAgIG1heFdpZHRoOiA3MjAsCiAgICAgICAgICBtYXhIZWlnaHQ6IDcyMCwKICAgICAgICAgIGZpbGxDb2xvcjogJyNmZmYnCiAgICAgICAgfSkudG9CbG9iKGJsb2IgPT4gewogICAgICAgICAgdGhpcy5zbmFwcGVkQW5zd2Vycy5wdXNoKGJsb2IpOwogICAgICAgIH0sICdpbWFnZS9qcGVnJyk7CiAgICAgIH0KICAgIH0sCiAgICBnZW5lcmF0ZVNuYXBwZWRBbnN3ZXJQcmV2aWV3KGZpbGVzKSB7CiAgICAgIGZpbGVzLmZvckVhY2goZiA9PiB7CiAgICAgICAgaWYgKCFmLnR5cGUubWF0Y2goImltYWdlLioiKSkgewogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgICBsZXQgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTsKICAgICAgICBsZXQgdGhhdCA9IHRoaXM7CiAgICAgICAgcmVhZGVyLm9ubG9hZCA9IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICB0aGF0LnNuYXBwZWRBbnN3ZXJQcmV2aWV3cy5wdXNoKHsKICAgICAgICAgICAgc291cmNlOiBlLnRhcmdldC5yZXN1bHQsCiAgICAgICAgICAgIGNyb3BwaW5nOiBmYWxzZQogICAgICAgICAgfSk7CiAgICAgICAgfTsKICAgICAgICByZWFkZXIucmVhZEFzRGF0YVVSTChmKTsKICAgICAgfSk7CiAgICB9LAogICAgdG9nZ2xlU25hcHBlZENyb3BwaW5nU3RhdHVzKGtleSkgewogICAgICB0aGlzLnNuYXBwZWRBbnN3ZXJQcmV2aWV3c1trZXldLmNyb3BwaW5nID0gIXRoaXMuc25hcHBlZEFuc3dlclByZXZpZXdzW2tleV0uY3JvcHBpbmc7CiAgICAgIGxldCBjcm9wcGVyS2V5ID0gYGNyb3BwZXJfJHtrZXl9YDsKICAgICAgbGV0IGNyb3BwZXIgPSB0aGlzLiRyZWZzW2Nyb3BwZXJLZXldWzBdOwoKICAgICAgLy8gSWYgY3JvcHBpbmcsIGVuYWJsZQogICAgICBpZiAodGhpcy5zbmFwcGVkQW5zd2VyUHJldmlld3Nba2V5XS5jcm9wcGluZykgewogICAgICAgIGNyb3BwZXIuZW5hYmxlKCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgY3JvcHBlci5jbGVhcigpOwogICAgICAgIGNyb3BwZXIuZGlzYWJsZSgpOwogICAgICB9CiAgICB9LAogICAgdnVlQ3JvcHBlckNvbnRhaW5lclN0eWxlKGtleSkgewogICAgICBsZXQgc3R5bGUgPSB7CiAgICAgICAgd2lkdGg6ICcxMDAlJwogICAgICAgIC8vIGRpc3BsYXk6ICdub25lJwogICAgICB9OwoKICAgICAgaWYgKHRoaXMuc25hcHBlZEFuc3dlclByZXZpZXdzW2tleV0uY3JvcHBpbmcpIHsKICAgICAgICBzdHlsZS5kaXNwbGF5ID0gJ2ZsZXgnOwogICAgICB9CiAgICAgIHJldHVybiBzdHlsZTsKICAgIH0sCiAgICBzYXZlQ3JvcHBlZFNuYXBwZWRBbnN3ZXIoa2V5KSB7CiAgICAgIGxldCBjcm9wcGVyS2V5ID0gYGNyb3BwZXJfJHtrZXl9YDsKICAgICAgbGV0IGNyb3BwZXIgPSB0aGlzLiRyZWZzW2Nyb3BwZXJLZXldWzBdOwogICAgICBsZXQgY3JvcHBlZCA9IGNyb3BwZXIuZ2V0Q3JvcHBlZENhbnZhcyh7CiAgICAgICAgbWF4V2lkdGg6IDcyMCwKICAgICAgICBtYXhIZWlnaHQ6IDcyMCwKICAgICAgICBmaWxsQ29sb3I6ICcjZmZmJwogICAgICB9KTsKICAgICAgbGV0IGRhdGFVUkwgPSBjcm9wcGVkLnRvRGF0YVVSTCgiaW1hZ2UvanBlZyIpOwogICAgICBjcm9wcGVyLnJlcGxhY2UoZGF0YVVSTCk7CiAgICAgIHRoaXMuc25hcHBlZEFuc3dlclByZXZpZXdzW2tleV0uc291cmNlID0gZGF0YVVSTDsKICAgICAgY3JvcHBlZC50b0Jsb2IoYmxvYiA9PiB7CiAgICAgICAgdGhpcy5zbmFwcGVkQW5zd2Vyc1trZXldID0gYmxvYjsKICAgICAgfSwgJ2ltYWdlL2pwZWcnKTsKICAgICAgdGhpcy50b2dnbGVTbmFwcGVkQ3JvcHBpbmdTdGF0dXMoa2V5KTsKICAgIH0sCiAgICByZW1vdmVTbmFwcGVkQW5zd2VyKGtleSkgewogICAgICBsZXQgY3JvcHBlcktleSA9IGBjcm9wcGVyXyR7a2V5fWA7CiAgICAgIGxldCBjcm9wcGVyID0gdGhpcy4kcmVmc1tjcm9wcGVyS2V5XVswXTsKICAgICAgY3JvcHBlci5kZXN0cm95KCk7CiAgICAgIHRoaXMuc25hcHBlZEFuc3dlcnMuc3BsaWNlKGtleSwgMSk7CiAgICAgIHRoaXMuc25hcHBlZEFuc3dlclByZXZpZXdzLnNwbGljZShrZXksIDEpOwogICAgfSwKICAgIHN1Ym1pdCgpIHsKICAgICAgaWYgKHRoaXMuaXNTbmFwcGVkQW5zd2VyKSB7CiAgICAgICAgaWYgKHRoaXMuc25hcHBlZEFuc3dlcnMubGVuZ3RoID4gMCkgewogICAgICAgICAgdGhpcy4kZW1pdCgnc25hcHBlZEFuc3dlcicsIHRoaXMuc25hcHBlZEFuc3dlcnMpOwogICAgICAgICAgdGhpcy4kZW1pdCgnc3VibWl0JywgdGhpcy5yZW1hcmtzKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy4kZW1pdCgnZXJyb3InLCB7CiAgICAgICAgICAgIHN0YXR1czogdHJ1ZSwKICAgICAgICAgICAgbWVzc2FnZTogJ1BsZWFzZSBzbmFwIGFuIGFuc3dlciEnCiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0KICAgICAgaWYgKHRoaXMuaXNXcml0dGVuQW5zd2VyKSB7CiAgICAgICAgdGhpcy4kZW1pdCgnc3VibWl0JywgdGhpcy5yZW1hcmtzKTsKICAgICAgfQogICAgfQogIH0sCiAgbW91bnRlZCgpIHsKICAgIGlmICh0aGlzLmlzU25hcHBlZEFuc3dlcikgewogICAgICB0aGlzLmdlbmVyYXRlU25hcHBlZEFuc3dlclByZXZpZXcodGhpcy5hbnN3ZXIuY29udGVudCk7CiAgICB9CiAgfSwKICBjcmVhdGVkKCkgewogICAgaWYgKCF0aGlzLmhhc0Fuc3dlckNvbnRlbnQpIHsKICAgICAgcm91dGVyLnB1c2goewogICAgICAgIG5hbWU6ICdzdHVkZW50LmFzc2lnbm1lbnRzLnNob3cnCiAgICAgIH0pOwogICAgfQogIH0sCiAgY29tcG9uZW50czogewogICAgQ3JvcEljb24sCiAgICBBcnJvd0JhY2tJY29uLAogICAgUGFnZUhlYWRlclRocmVlLAogICAgRGFzaGJvYXJkTGF5b3V0LAogICAgTW9kYWwsCiAgICBUcmFzaEljb24sCiAgICBJY29uQmFzZVR3bywKICAgIE5hdkJhY2ssCiAgICBQYWdlVGl0bGVUd28sCiAgICBGb250QXdlc29tZUljb24sCiAgICBWdWVDcm9wcGVyCiAgfQp9Ow=="},{"version":3,"names":["PageTitleTwo","NavBack","IconBaseTwo","TrashIcon","Modal","DashboardLayout","PageHeaderThree","router","ArrowBackIcon","CropIcon","VueCropper","FontAwesomeIcon","faTrash","faCropAlt","name","props","answer","Object","assignmentDetails","data","isMainPage","isPreviewingSnappedAnswer","isSubmitting","isShowingModal","submissionStatus","snappedAnswerPreviews","remarks","snappedAnswers","icons","crop","trash","computed","hasAnswerContent","type","content","isWrittenAnswer","isSnappedAnswer","methods","toggleSnappedAnswerPreview","onFileSelected","e","files","target","dataTransfer","length","match","generateSnappedAnswerPreview","value","handleVueCropperReady","cropper","autoCrop","clear","disable","replaced","getCroppedCanvas","maxWidth","maxHeight","fillColor","toBlob","blob","push","forEach","f","reader","FileReader","that","onload","source","result","cropping","readAsDataURL","toggleSnappedCroppingStatus","key","cropperKey","$refs","enable","vueCropperContainerStyle","style","width","display","saveCroppedSnappedAnswer","cropped","dataURL","toDataURL","replace","removeSnappedAnswer","destroy","splice","submit","$emit","status","message","mounted","created","components"],"sources":["src/views/students/StudentAssignments/Answer/AnswerSave.vue"],"sourcesContent":["<template>\n\n  <dashboard-layout :content-fills-screen=\"isPreviewingSnappedAnswer\"\n                    :has-custom-bottom-bar=\"isMainPage\"\n                    :no-bottom-bar=\" isPreviewingSnappedAnswer\"\n  >\n\n    <template v-slot:pageHeader>\n      <page-header-three>\n\n        <template v-slot:leftAction>\n          <nav-back v-if=\"isMainPage\"\n                    type=\"cancel\"\n                    :to=\"{name: 'student.assignments.show'}\"\n                    class=\"w-2/7\" stroke-color=\"red-primary\"\n          />\n\n          <div @click=\"toggleSnappedAnswerPreview\"\n               v-if=\"isPreviewingSnappedAnswer\"\n          >\n            <icon-base-two class=\"w-2/7 ml-5\">\n              <arrow-back-icon/>\n            </icon-base-two>\n          </div>\n        </template>\n\n        <template v-slot:mini-title>\n          Answer\n        </template>\n\n      </page-header-three>\n    </template>\n\n    <template slot=\"content\" v-if=\"isMainPage\">\n\n      <div class=\"relative pt-40 px-6 h-full text-left text-purple-primary\">\n\n        <!-- SUBMISSION DETAIL -->\n        <div>\n          <div>\n            Your answer will be submitted to\n          </div>\n          <div class=\"font-bold mt-1\">\n            {{ assignmentDetails ? assignmentDetails.title : '' }}\n          </div>\n        </div>\n\n        <!-- VIEW SNAPPED ANSWER -->\n        <div class=\"mt-10\" v-if=\"isSnappedAnswer\">\n          <div class=\"mb-4\">\n            Your Snapped Answer\n          </div>\n          <div class=\"flex flex-col\">\n\n            <div v-for=\"(image,key) in snappedAnswerPreviews\"\n                 class=\"flex flex-col py-5 px-5 mt-2 mb-2 w-full text-lg font-normal leading-tight rounded-md border border-none appearance-none bg-gray-secondary text-purple-secondary focus:outline-none focus:shadow-outline placeholder-purple-secondary\"\n            >\n\n              <div class=\"mt-5 w-full\">\n                {{`cropper_${key}`}}\n                <vue-cropper :ref=\"`cropper_${key}`\"\n                             :container-style=\"vueCropperContainerStyle(key)\"\n                             :src=\"image.source\"\n                             alt=\"Source Image\"\n                             @ready=\"handleVueCropperReady\"\n                >\n                </vue-cropper>\n\n                <div v-if=\"image.cropping\" class=\"flex flex-row items-center mt-4 md:mt-4 \">\n                  <button @click=\"toggleSnappedCroppingStatus(key)\"\n                          class=\"flex flex-row items-center w-1/2  py-3 md:py-5 mr-1 rounded-lg bg-red-primary focus:outline-none\">\n                    <div class=\"text-white text-sm md:text-lg w-full\">\n                      Cancel\n                    </div>\n                  </button>\n                  <button @click=\"saveCroppedSnappedAnswer(key)\"\n                          class=\"flex flex-row items-center  py-3  md:py-5 w-1/2 ml-1 rounded-lg bg-green-400 focus:outline-none\">\n                    <div class=\"text-white text-sm md:text-lg w-3/4\">\n                      Done\n                    </div>\n                    <div class=\"w-1/4\">\n                      <icon-base-two class=\"w-1/2\">\n                        <crop-icon/>\n                      </icon-base-two>\n                    </div>\n                  </button>\n                </div>\n\n                <div v-else class=\"flex flex-row items-center mt-2 md:mt-4 \">\n                  <button @click=\"removeSnappedAnswer(key)\"\n                          class=\"flex flex-row items-center w-1/2  py-3 md:py-5 mr-1 rounded-lg bg-red-primary focus:outline-none\">\n                    <div class=\"text-white text-sm md:text-lg w-3/4\">\n                      Remove\n                    </div>\n                    <div class=\"w-1/4\">\n                      <font-awesome-icon class=\"w-full fa-1x text-white\" :icon=\"icons.trash\"/>\n                    </div>\n                  </button>\n                  <button @click=\"toggleSnappedCroppingStatus(key)\"\n                          class=\"flex flex-row items-center  py-3  md:py-5 w-1/2 ml-1 rounded-lg bg-purple-primary focus:outline-none\">\n                    <div class=\"text-white text-sm md:text-lg w-3/4\">\n                      Crop\n                    </div>\n                    <div class=\"w-1/4\">\n                      <font-awesome-icon class=\"w-full fa-1x text-white\" :icon=\"icons.crop\"/>\n                    </div>\n                  </button>\n                </div>\n              </div>\n\n            </div>\n\n          </div>\n\n\n          <!-- ADD MORE PHOTO -->\n          <div class=\"flex mb-4 -mx-1\">\n            <label\n                class=\"text-center pl-6 pr-2 py-5 mt-2  appearance-none border rounded-md border-none w-full text-lg font-normal leading-tight focus:outline-none focus:shadow-outline text-red-primary\">\n              + Add more photo\n              <input class=\"hidden\" type=\"file\" accept=\"image/*\" multiple @change=\"onFileSelected\">\n            </label>\n          </div>\n        </div>\n\n\n        <div class=\"mt-6\">\n          <div>\n            Your remarks\n          </div>\n          <div class=\"mt-4 h-36 \">\n            <textarea v-model=\"remarks\"\n                      class=\"resize-y text-purple-primary py-4 px-5 h-full w-full bg-gray-secondary rounded focus:outline-none placeholder-purple-secondary\"\n                      placeholder=\"Remarks\"></textarea>\n          </div>\n        </div>\n\n      </div>\n    </template>\n\n\n    <template v-slot:bottomBar>\n      <div class=\"w-full md:max-w-xl px-2\">\n        <button @click=\"submit\"\n                :disabled=\"isSubmitting\"\n                class=\"w-full font-bold rounded-full text-purple-primary text-sm bg-yellow-primary py-4 px-1 flex flex-row justify-center\">\n          Submit Answer\n        </button>\n      </div>\n    </template>\n  </dashboard-layout>\n\n</template>\n\n<script>\nimport PageTitleTwo from \"@/components/PageTitleTwo\";\nimport NavBack from \"@/components/NavBack\";\nimport IconBaseTwo from \"@/components/IconBaseTwo\";\nimport TrashIcon from \"@/components/icons/TrashIcon\";\nimport Modal from \"@/components/Modal\";\nimport DashboardLayout from \"@/views/layout/DashboardLayout\";\nimport PageHeaderThree from \"@/components/PageHeaderThree\";\nimport router from \"@/router\";\nimport ArrowBackIcon from \"@/components/icons/ArrowBackIcon\";\nimport CropIcon from \"@/components/icons/CropIcon\";\n\n// Vue Cropper\nimport VueCropper from 'vue-cropperjs';\nimport 'cropperjs/dist/cropper.css';\n\n// FONT AWESOME\nimport {FontAwesomeIcon} from '@fortawesome/vue-fontawesome'\nimport {faTrash, faCropAlt} from \"@fortawesome/free-solid-svg-icons\";\n\nexport default {\n  name: \"AnswerSave\",\n  props: {\n    answer: Object,\n    assignmentDetails: Object,\n  },\n  data() {\n    return {\n\n      // States\n      isMainPage: true,\n      isPreviewingSnappedAnswer: false,\n      isSubmitting: false,\n      isShowingModal: false,\n      submissionStatus: null,\n\n      snappedAnswerPreviews: [],\n\n      remarks: '',\n\n      snappedAnswers: [],\n\n      // Icons\n      icons: {\n        crop: faCropAlt,\n        trash: faTrash\n      }\n    }\n  },\n  computed: {\n    hasAnswerContent() {\n      return this.answer.type !== null && this.answer.content !== '';\n    },\n    isWrittenAnswer() {\n      return this.answer.type === 'written';\n    },\n    isSnappedAnswer() {\n      return this.answer.type === 'snapped';\n    },\n  },\n  methods: {\n\n    toggleSnappedAnswerPreview() {\n      if (this.isPreviewingSnappedAnswer) {\n        this.isMainPage = true;\n        this.isPreviewingSnappedAnswer = false;\n      } else {\n        this.isMainPage = false;\n        this.isPreviewingSnappedAnswer = true;\n      }\n    },\n\n    onFileSelected(e) {\n      let files = e.target.files || e.dataTransfer.files\n\n      if (!files.length) {\n        return\n      }\n\n      if (files[0].type.match(\"image.*\")) {\n        this.generateSnappedAnswerPreview(files)\n      }\n\n      e.target.value = ''\n\n    },\n\n    handleVueCropperReady(e) {\n      let cropper = e.target.cropper;\n\n      cropper.autoCrop = false;\n\n      cropper.clear();\n      cropper.disable();\n\n      // If this is new photo uploaded, add image to snapped answers array\n      if (!cropper.replaced) {\n        cropper.getCroppedCanvas({\n          maxWidth: 720,\n          maxHeight: 720,\n          fillColor: '#fff'\n        }).toBlob((blob) => {\n          this.snappedAnswers.push(blob)\n        },'image/jpeg');\n      }\n\n\n    },\n\n    generateSnappedAnswerPreview(files) {\n      files.forEach(f => {\n\n        if (!f.type.match(\"image.*\")) {\n          return;\n        }\n\n        let reader = new FileReader();\n        let that = this;\n\n        reader.onload = function (e) {\n\n          that.snappedAnswerPreviews.push({\n            source: e.target.result,\n            cropping: false\n          });\n        }\n\n        reader.readAsDataURL(f);\n      });\n    },\n\n    toggleSnappedCroppingStatus(key) {\n      this.snappedAnswerPreviews[key].cropping = !this.snappedAnswerPreviews[key].cropping;\n\n      let cropperKey = `cropper_${key}`\n      let cropper = this.$refs[cropperKey][0];\n\n      // If cropping, enable\n      if (this.snappedAnswerPreviews[key].cropping) {\n        cropper.enable();\n      } else{\n        cropper.clear();\n        cropper.disable();\n      }\n    },\n\n    vueCropperContainerStyle(key) {\n      let style = {\n        width: '100%',\n        // display: 'none'\n      }\n\n      if (this.snappedAnswerPreviews[key].cropping) {\n        style.display = 'flex'\n      }\n      return  style;\n    },\n\n    saveCroppedSnappedAnswer(key) {\n      let cropperKey = `cropper_${key}`\n\n      let cropper = this.$refs[cropperKey][0];\n\n      let cropped =  cropper.getCroppedCanvas({\n        maxWidth: 720,\n        maxHeight: 720,\n        fillColor: '#fff'\n      });\n\n      let dataURL = cropped.toDataURL(\"image/jpeg\");\n      cropper.replace(dataURL);\n      this.snappedAnswerPreviews[key].source = dataURL;\n\n      cropped.toBlob((blob) => {\n              this.snappedAnswers[key] = blob;\n            },'image/jpeg');\n\n      this.toggleSnappedCroppingStatus(key)\n\n    },\n\n    removeSnappedAnswer(key) {\n\n      let cropperKey = `cropper_${key}`\n\n      let cropper = this.$refs[cropperKey][0];\n      cropper.destroy();\n\n      this.snappedAnswers.splice(key, 1);\n      this.snappedAnswerPreviews.splice(key, 1);\n    },\n\n    submit() {\n      if (this.isSnappedAnswer) {\n        if (this.snappedAnswers.length > 0) {\n          this.$emit('snappedAnswer', this.snappedAnswers)\n          this.$emit('submit', this.remarks)\n        } else {\n          this.$emit('error', {\n            status: true,\n            message: 'Please snap an answer!'\n          })\n        }\n      }\n\n      if (this.isWrittenAnswer) {\n        this.$emit('submit', this.remarks)\n      }\n\n    },\n\n\n  },\n  mounted() {\n\n    if (this.isSnappedAnswer) {\n      this.generateSnappedAnswerPreview(this.answer.content)\n    }\n  },\n  created() {\n    if (!this.hasAnswerContent) {\n      router.push({name: 'student.assignments.show'})\n    }\n  },\n  components: {\n    CropIcon,\n    ArrowBackIcon,\n    PageHeaderThree,\n    DashboardLayout, Modal, TrashIcon, IconBaseTwo, NavBack, PageTitleTwo,\n    FontAwesomeIcon,\n    VueCropper\n  }\n}\n</script>\n\n<style>\n</style>\n"],"mappings":"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"}]}