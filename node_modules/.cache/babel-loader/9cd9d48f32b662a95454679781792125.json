{"remainingRequest":"/Users/erwinkarim/Websites/Snapped/snapped-mobile-master/node_modules/babel-loader/lib/index.js!/Users/erwinkarim/Websites/Snapped/snapped-mobile-master/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/erwinkarim/Websites/Snapped/snapped-mobile-master/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/erwinkarim/Websites/Snapped/snapped-mobile-master/src/views/integrations/googleAuthCallback.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/erwinkarim/Websites/Snapped/snapped-mobile-master/src/views/integrations/googleAuthCallback.vue","mtime":1679379067244},{"path":"/Users/erwinkarim/Websites/Snapped/snapped-mobile-master/babel.config.js","mtime":1679379067182},{"path":"/Users/erwinkarim/Websites/Snapped/snapped-mobile-master/node_modules/cache-loader/dist/cjs.js","mtime":1680070113546},{"path":"/Users/erwinkarim/Websites/Snapped/snapped-mobile-master/node_modules/babel-loader/lib/index.js","mtime":1680059914906},{"path":"/Users/erwinkarim/Websites/Snapped/snapped-mobile-master/node_modules/cache-loader/dist/cjs.js","mtime":1680070113546},{"path":"/Users/erwinkarim/Websites/Snapped/snapped-mobile-master/node_modules/vue-loader/lib/index.js","mtime":1680070113705}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IEdvb2dsZUNsYXNzcm9vbVJlcG9zaXRvcnkgZnJvbSAiQC9yZXBvc2l0b3JpZXMvR29vZ2xlQ2xhc3Nyb29tUmVwb3NpdG9yeSI7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiZ29vZ2xlQXV0aENhbGxiYWNrIiwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgLy8gU3RhdGUKICAgICAgaXNBdXRoZW50aWNhdGluZzogdHJ1ZSwKICAgICAgaXNBdXRoZW50aWNhdGVkOiBmYWxzZSwKICAgICAgdGl0bGU6ICdBdXRoZW50aWNhdGluZy4uLicsCiAgICAgIG1lc3NhZ2U6ICJQbGVhc2Ugd2FpdC4gVGhhbmsgeW91LiIKICAgIH07CiAgfSwKICBtZXRob2RzOiB7CiAgICBnb29nbGVDbGFzc3Jvb21DYWxsYmFjaygpIHsKICAgICAgbGV0IHBheWxvYWQgPSB7CiAgICAgICAgY29kZTogdGhpcy4kcm91dGUucXVlcnkuY29kZQogICAgICAgIC8vIHRva2VuOiB0aGlzLiRzdG9yZS5nZXR0ZXJzLmdldFRva2VuCiAgICAgIH07CgogICAgICBHb29nbGVDbGFzc3Jvb21SZXBvc2l0b3J5LmludGVncmF0aW9uQ2FsbGJhY2socGF5bG9hZCkudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgaWYgKHJlc3BvbnNlLmRhdGEuc3VjY2VzcykgewogICAgICAgICAgLy8gR2l2ZSB0aW1lIHRvIHVwZGF0ZSB1c2VyIGRldGFpbHMgYXQgYmFja2VuZAogICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgICAgIHRoaXMuaXNBdXRoZW50aWNhdGluZyA9IGZhbHNlOwogICAgICAgICAgICB0aGlzLnRpdGxlID0gJ1N1Y2Nlc3MhJzsKICAgICAgICAgICAgdGhpcy5tZXNzYWdlID0gcmVzcG9uc2UuZGF0YS5tZXNzYWdlOwoKICAgICAgICAgICAgLy8gU2VuZCBwb3N0IG1lc3NhZ2UgdG8gcGFyZW50LiBUbyBnZXQgdXBkYXRlZCB1c2VyIGRldGFpbHMKICAgICAgICAgICAgd2luZG93Lm9wZW5lci5wb3N0TWVzc2FnZSh7CiAgICAgICAgICAgICAgc3VjY2VzczogdHJ1ZQogICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIC8vIENsb3NlIHRoZSB3aW5kb3cKICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgICAgICAgd2luZG93LmNsb3NlKCk7CiAgICAgICAgICAgIH0sIDE1MDApOwogICAgICAgICAgfSwgMTUwMCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMudGl0bGUgPSAnT29wcyEnOwogICAgICAgICAgdGhpcy5tZXNzYWdlID0gcmVzcG9uc2UuZGF0YS5tZXNzYWdlOwogICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgICAgIHdpbmRvdy5jbG9zZSgpOwogICAgICAgICAgfSwgMTUwMCk7CiAgICAgICAgfQogICAgICB9KS5jYXRjaChlcnJvciA9PiB7CiAgICAgICAgdGhpcy5pc0F1dGhlbnRpY2F0aW5nID0gZmFsc2U7CiAgICAgICAgdGhpcy50aXRsZSA9ICdPb3BzISc7CiAgICAgICAgdGhpcy5tZXNzYWdlID0gZXJyb3I7CiAgICAgIH0pOwogICAgfQogIH0sCiAgbW91bnRlZCgpIHsKICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdtZXNzYWdlJywgdGhpcy5oYW5kbGVNZXNzYWdlKTsKICB9LAogIGNyZWF0ZWQoKSB7CiAgICB0aGlzLmdvb2dsZUNsYXNzcm9vbUNhbGxiYWNrKCk7CiAgfQp9Ow=="},{"version":3,"names":["GoogleClassroomRepository","name","data","isAuthenticating","isAuthenticated","title","message","methods","googleClassroomCallback","payload","code","$route","query","integrationCallback","then","response","success","setTimeout","window","opener","postMessage","close","catch","error","mounted","addEventListener","handleMessage","created"],"sources":["src/views/integrations/googleAuthCallback.vue"],"sourcesContent":["<template>\n  <div class=\"mx-auto h-screen flex flex-col justify-center items-center\">\n    <div class=\"font-bold my-3 text-xl\">\n      {{ title }}\n    </div>\n    <div class=\"text-sm\">\n      {{ message }}\n    </div>\n  </div>\n</template>\n\n<script>\nimport GoogleClassroomRepository from \"@/repositories/GoogleClassroomRepository\";\n\nexport default {\n  name: \"googleAuthCallback\",\n  data() {\n    return {\n\n      // State\n      isAuthenticating: true,\n      isAuthenticated: false,\n\n      title: 'Authenticating...',\n      message: \"Please wait. Thank you.\",\n    }\n  },\n  methods: {\n    googleClassroomCallback() {\n\n      let payload = {\n        code: this.$route.query.code,\n        // token: this.$store.getters.getToken\n      }\n\n      GoogleClassroomRepository.integrationCallback(payload)\n          .then(response => {\n\n            if (response.data.success) {\n\n              // Give time to update user details at backend\n              setTimeout(() => {\n                this.isAuthenticating = false;\n\n                this.title = 'Success!'\n                this.message = response.data.message\n\n                // Send post message to parent. To get updated user details\n                window.opener.postMessage({success: true})\n\n                // Close the window\n                setTimeout(() => {\n                  window.close();\n                }, 1500)\n              }, 1500)\n\n\n            } else {\n\n              this.title = 'Oops!'\n              this.message = response.data.message\n\n              setTimeout(() => {\n                window.close();\n              }, 1500)\n            }\n          })\n          .catch((error) => {\n\n            this.isAuthenticating = false;\n\n            this.title = 'Oops!'\n            this.message = error;\n          });\n    },\n  },\n  mounted() {\n    window.addEventListener('message', this.handleMessage)\n  },\n  created() {\n    this.googleClassroomCallback();\n  }\n}\n</script>\n\n<style scoped>\n\n</style>\n"],"mappings":"AAYA,OAAAA,yBAAA;AAEA;EACAC,IAAA;EACAC,KAAA;IACA;MAEA;MACAC,gBAAA;MACAC,eAAA;MAEAC,KAAA;MACAC,OAAA;IACA;EACA;EACAC,OAAA;IACAC,wBAAA;MAEA,IAAAC,OAAA;QACAC,IAAA,OAAAC,MAAA,CAAAC,KAAA,CAAAF;QACA;MACA;;MAEAV,yBAAA,CAAAa,mBAAA,CAAAJ,OAAA,EACAK,IAAA,CAAAC,QAAA;QAEA,IAAAA,QAAA,CAAAb,IAAA,CAAAc,OAAA;UAEA;UACAC,UAAA;YACA,KAAAd,gBAAA;YAEA,KAAAE,KAAA;YACA,KAAAC,OAAA,GAAAS,QAAA,CAAAb,IAAA,CAAAI,OAAA;;YAEA;YACAY,MAAA,CAAAC,MAAA,CAAAC,WAAA;cAAAJ,OAAA;YAAA;;YAEA;YACAC,UAAA;cACAC,MAAA,CAAAG,KAAA;YACA;UACA;QAGA;UAEA,KAAAhB,KAAA;UACA,KAAAC,OAAA,GAAAS,QAAA,CAAAb,IAAA,CAAAI,OAAA;UAEAW,UAAA;YACAC,MAAA,CAAAG,KAAA;UACA;QACA;MACA,GACAC,KAAA,CAAAC,KAAA;QAEA,KAAApB,gBAAA;QAEA,KAAAE,KAAA;QACA,KAAAC,OAAA,GAAAiB,KAAA;MACA;IACA;EACA;EACAC,QAAA;IACAN,MAAA,CAAAO,gBAAA,iBAAAC,aAAA;EACA;EACAC,QAAA;IACA,KAAAnB,uBAAA;EACA;AACA"}]}