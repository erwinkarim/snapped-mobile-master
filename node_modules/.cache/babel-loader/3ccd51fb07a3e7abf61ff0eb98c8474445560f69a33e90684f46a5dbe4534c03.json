{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport TeacherRepository from \"@/repositories/TeacherRepository\";\nimport IconBase from \"@/components/IconBase\";\nimport ProfilePhoto from \"@/components/icons/ProfilePhoto\";\nimport router from \"@/router\";\nimport TaggingIcon from \"../../../components/icons/TaggingIcon\";\nimport IconBaseTwo from \"../../../components/IconBaseTwo\";\nimport StudentRepository from \"@/repositories/StudentRepository\";\nimport InfiniteLoading from \"vue-infinite-loading\";\nexport default {\n  name: \"StudentsList\",\n  props: {\n    search: String\n  },\n  data() {\n    return {\n      // states\n      error: null,\n      loading: false,\n      awaitingSearch: false,\n      filterCount: 0,\n      filters: {\n        pageNum: 1,\n        perPage: 20,\n        search: ''\n      },\n      meta: null,\n      // data\n      students: [],\n      performances: null\n    };\n  },\n  watch: {\n    '$route': 'fetchData',\n    'search': 'searchName'\n  },\n  computed: {\n    hasLoadMore() {\n      if (this.meta) {\n        return this.filters.pageNum <= this.meta.last_page;\n      } else {\n        return true;\n      }\n    }\n  },\n  methods: {\n    handleInfiniteScroll($state) {\n      if (this.hasLoadMore) {\n        TeacherRepository.getTeacherStudents(this.filters).then(response => {\n          let data = response.data.data;\n          for (let i = 0; i < data.length; i++) {\n            this.students.push(data[i]);\n          }\n\n          // Update meta details and pageNum for filters\n          this.meta = response.data.meta;\n          this.filters.pageNum = this.meta.current_page + 1;\n          $state.loaded();\n        });\n      } else {\n        $state.complete();\n      }\n    },\n    getStudentPerformance() {\n      TeacherRepository.getStudentPerformance().then(response => {\n        let data = response.data;\n        this.performances = data.data;\n      });\n    },\n    searchName() {\n      this.filters.search = this.search;\n      if (!this.awaitingSearch) {\n        setTimeout(() => {\n          this.awaitingSearch = false;\n          this.updateFilter();\n        }, 1000); // 1 sec delay\n      }\n\n      this.awaitingSearch = true;\n    },\n    updateFilter() {\n      this.filters.pageNum = 1;\n      this.filters.perPage = 20;\n      this.students = [];\n      this.filterCount++;\n    },\n    goToStudentShow(studentID) {\n      router.push({\n        name: 'student.profile.show',\n        params: {\n          studentID: studentID\n        }\n      });\n    },\n    taggingClass(statusColor) {\n      switch (statusColor) {\n        case 'neutral':\n          return '';\n        case 'red':\n          return 'text-red-primary';\n        case 'yellow':\n          return \"text-yellow-primary\";\n        case 'green':\n          return \"text-green-primary\";\n      }\n    }\n  },\n  created() {\n    // this.fetchData()\n  },\n  mounted() {\n    this.getStudentPerformance();\n  },\n  components: {\n    IconBaseTwo,\n    TaggingIcon,\n    ProfilePhoto,\n    IconBase,\n    InfiniteLoading\n  }\n};","map":{"version":3,"names":["TeacherRepository","IconBase","ProfilePhoto","router","TaggingIcon","IconBaseTwo","StudentRepository","InfiniteLoading","name","props","search","String","data","error","loading","awaitingSearch","filterCount","filters","pageNum","perPage","meta","students","performances","watch","computed","hasLoadMore","last_page","methods","handleInfiniteScroll","$state","getTeacherStudents","then","response","i","length","push","current_page","loaded","complete","getStudentPerformance","searchName","setTimeout","updateFilter","goToStudentShow","studentID","params","taggingClass","statusColor","created","mounted","components"],"sources":["/Users/erwinkarim/Websites/Snapped/snapped-mobile-master/src/views/teachers/TeachersStudents/StudentsList.vue"],"sourcesContent":["<template>\n  <div>\n    <div v-for=\"student in students\"\n         :key=\"student.id\"\n         @click=\"goToStudentShow(student.id)\"\n         class=\"text-left px-5 py-2 h-20 flex flex-row w-full border-b-1 items-center bg-white\"\n    >\n      <div class=\"flex flex-row items-center w-11/12\">\n        <icon-base-two class=\" w-1/6\" icon-name=\"profile-photo-icon\" icon-color=\"white\" view-box=\"0 0 60 55\">\n          <profile-photo :gender=\"student.gender\"/>\n        </icon-base-two>\n        <div class=\"w-5/6 ml-5 text-purple-primary  truncate pr-4\"> {{ student.name }}</div>\n      </div>\n      <div v-for=\"performance in performances\"\n           v-if=\"performance.student_id === student.id \"\n           class=\" w-1/12\"\n      >\n        <icon-base-two :class=\"taggingClass(performance.status_color)\" class=\"w-5/6\">\n          <tagging-icon/>\n        </icon-base-two>\n      </div>\n    </div>\n\n    <infinite-loading :identifier=\"filterCount\"\n                      @infinite=\"handleInfiniteScroll\"\n                      spinner=\"bubbles\"\n                      force-use-infinite-wrapper\n    >\n      <div slot=\"spinner\" class=\"mt-10\">Loading...</div>\n      <div slot=\"no-more\"></div>\n      <div slot=\"no-results\">No results message</div>\n    </infinite-loading>\n\n  </div>\n</template>\n\n<script>\nimport TeacherRepository from \"@/repositories/TeacherRepository\";\nimport IconBase from \"@/components/IconBase\";\nimport ProfilePhoto from \"@/components/icons/ProfilePhoto\";\nimport router from \"@/router\";\nimport TaggingIcon from \"../../../components/icons/TaggingIcon\";\nimport IconBaseTwo from \"../../../components/IconBaseTwo\";\nimport StudentRepository from \"@/repositories/StudentRepository\";\nimport InfiniteLoading from \"vue-infinite-loading\";\n\n\nexport default {\n  name: \"StudentsList\",\n  props: {\n    search: String\n  },\n  data() {\n    return {\n\n      // states\n      error: null,\n      loading: false,\n      awaitingSearch: false,\n\n      filterCount: 0,\n      filters: {\n        pageNum: 1,\n        perPage: 20,\n        search: ''\n      },\n      meta: null,\n\n      // data\n      students: [],\n      performances: null\n    }\n  },\n  watch: {\n    '$route': 'fetchData',\n    'search': 'searchName'\n  },\n  computed: {\n    hasLoadMore() {\n      if (this.meta) {\n        return this.filters.pageNum <= this.meta.last_page\n      } else {\n        return true;\n      }\n    },\n  },\n  methods: {\n\n    handleInfiniteScroll($state) {\n\n      if (this.hasLoadMore) {\n\n        TeacherRepository.getTeacherStudents(this.filters)\n            .then(response => {\n\n              let data = response.data.data\n\n              for (let i = 0; i < data.length; i++) {\n                this.students.push(data[i]);\n              }\n\n              // Update meta details and pageNum for filters\n              this.meta = response.data.meta;\n              this.filters.pageNum = this.meta.current_page + 1;\n\n              $state.loaded();\n\n            })\n\n      } else {\n        $state.complete();\n      }\n    },\n\n    getStudentPerformance() {\n      TeacherRepository.getStudentPerformance()\n          .then(response => {\n            let data = response.data;\n\n            this.performances = data.data;\n          })\n    },\n\n    searchName() {\n\n      this.filters.search = this.search;\n\n      if (!this.awaitingSearch) {\n        setTimeout(() => {\n          this.awaitingSearch = false;\n          this.updateFilter();\n        }, 1000); // 1 sec delay\n      }\n      this.awaitingSearch = true;\n    },\n\n    updateFilter() {\n      this.filters.pageNum = 1\n      this.filters.perPage = 20\n\n      this.students = [];\n      this.filterCount++;\n    },\n\n    goToStudentShow(studentID) {\n      router.push({name: 'student.profile.show', params: {studentID: studentID}})\n    },\n\n    taggingClass(statusColor) {\n\n      switch (statusColor) {\n        case 'neutral' :\n          return '';\n        case 'red':\n          return 'text-red-primary';\n        case 'yellow':\n          return \"text-yellow-primary\";\n        case 'green':\n          return \"text-green-primary\";\n      }\n    }\n  },\n  created() {\n    // this.fetchData()\n  },\n  mounted() {\n    this.getStudentPerformance()\n  },\n  components: {IconBaseTwo, TaggingIcon, ProfilePhoto, IconBase, InfiniteLoading},\n\n}\n</script>\n\n<style scoped>\n\n</style>\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}