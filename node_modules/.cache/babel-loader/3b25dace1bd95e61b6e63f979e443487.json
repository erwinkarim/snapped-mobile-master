{"remainingRequest":"/Users/erwinkarim/Websites/Snapped/snapped-mobile-master/node_modules/thread-loader/dist/cjs.js!/Users/erwinkarim/Websites/Snapped/snapped-mobile-master/node_modules/babel-loader/lib/index.js!/Users/erwinkarim/Websites/Snapped/snapped-mobile-master/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/erwinkarim/Websites/Snapped/snapped-mobile-master/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/erwinkarim/Websites/Snapped/snapped-mobile-master/src/components/ZoomQuestionForm.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/erwinkarim/Websites/Snapped/snapped-mobile-master/src/components/ZoomQuestionForm.vue","mtime":1679379067237},{"path":"/Users/erwinkarim/Websites/Snapped/snapped-mobile-master/babel.config.js","mtime":1679379067182},{"path":"/Users/erwinkarim/Websites/Snapped/snapped-mobile-master/node_modules/cache-loader/dist/cjs.js","mtime":1680070113546},{"path":"/Users/erwinkarim/Websites/Snapped/snapped-mobile-master/node_modules/thread-loader/dist/cjs.js","mtime":1680070298752},{"path":"/Users/erwinkarim/Websites/Snapped/snapped-mobile-master/node_modules/babel-loader/lib/index.js","mtime":1680059914906},{"path":"/Users/erwinkarim/Websites/Snapped/snapped-mobile-master/node_modules/cache-loader/dist/cjs.js","mtime":1680070113546},{"path":"/Users/erwinkarim/Websites/Snapped/snapped-mobile-master/node_modules/vue-loader/lib/index.js","mtime":1680070113705}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMudHlwZWQtYXJyYXkuYXQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5maW5kLWxhc3QuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5maW5kLWxhc3QtaW5kZXguanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy50eXBlZC1hcnJheS5zZXQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lc25leHQudHlwZWQtYXJyYXkudG8tcmV2ZXJzZWQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lc25leHQudHlwZWQtYXJyYXkudG8tc29ydGVkLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXNuZXh0LnR5cGVkLWFycmF5LndpdGguanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5wdXNoLmpzIjsKaW1wb3J0IEljb25CYXNlVHdvIGZyb20gIkAvY29tcG9uZW50cy9JY29uQmFzZVR3byI7CmltcG9ydCBUcmFzaEljb24gZnJvbSAiQC9jb21wb25lbnRzL2ljb25zL1RyYXNoSWNvbiI7CmltcG9ydCBDYW1lcmFJY29uIGZyb20gIkAvY29tcG9uZW50cy9pY29ucy9DYW1lcmFJY29uIjsKaW1wb3J0IFBlbkljb24gZnJvbSAiQC9jb21wb25lbnRzL2ljb25zL1Blbkljb24iOwppbXBvcnQgQ3JvcEljb24gZnJvbSAiQC9jb21wb25lbnRzL2ljb25zL0Nyb3BJY29uIjsKaW1wb3J0IFBob25lSWNvbiBmcm9tICJAL2NvbXBvbmVudHMvaWNvbnMvUGhvbmVJY29uIjsKaW1wb3J0IFBsdXNJY29uIGZyb20gIkAvY29tcG9uZW50cy9pY29ucy9QbHVzSWNvbiI7CmltcG9ydCBBcnJvd1JpZ2h0SWNvbiBmcm9tICJAL2NvbXBvbmVudHMvaWNvbnMvQXJyb3dSaWdodEljb24iOwppbXBvcnQgWm9vbUljb24gZnJvbSAiQC9jb21wb25lbnRzL2ljb25zL1pvb21JY29uIjsKaW1wb3J0IE1pY3JvcGhvbmVJY29uIGZyb20gIkAvY29tcG9uZW50cy9pY29ucy9NaWNyb3Bob25lSWNvbiI7CmltcG9ydCBNaWNyb3Bob25lU2xhc2hJY29uIGZyb20gIkAvY29tcG9uZW50cy9pY29ucy9NaWNyb3Bob25lU2xhc2hJY29uIjsKaW1wb3J0IFN0b3BJY29uIGZyb20gIkAvY29tcG9uZW50cy9pY29ucy9TdG9wSWNvbiI7CmltcG9ydCBDaXJjbGVJY29uIGZyb20gIkAvY29tcG9uZW50cy9pY29ucy9DaXJjbGVJY29uIjsKaW1wb3J0IFBlcnNvblRvRG9vckljb24gZnJvbSAiQC9jb21wb25lbnRzL2ljb25zL1BlcnNvblRvRG9vckljb24iOwppbXBvcnQgRGlzcGxheUljb24gZnJvbSAiQC9jb21wb25lbnRzL2ljb25zL0Rpc3BsYXlJY29uIjsKaW1wb3J0IERpc3BsYXlTbGFzaEljb24gZnJvbSAiQC9jb21wb25lbnRzL2ljb25zL0Rpc3BsYXlTbGFzaEljb24iOwppbXBvcnQgVmlkZW9JY29uIGZyb20gIkAvY29tcG9uZW50cy9pY29ucy9WaWRlb0ljb24iOwppbXBvcnQgVmlkZW9TbGFzaEljb24gZnJvbSAiQC9jb21wb25lbnRzL2ljb25zL1ZpZGVvU2xhc2hJY29uIjsKaW1wb3J0IFZ1ZUNyb3BwZXIgZnJvbSAndnVlLWNyb3BwZXJqcyc7CmltcG9ydCAnY3JvcHBlcmpzL2Rpc3QvY3JvcHBlci5jc3MnOwppbXBvcnQgWm9vbVZpZGVvIGZyb20gJ0B6b29tL3ZpZGVvc2RrJzsKaW1wb3J0IEtKVVIgZnJvbSAnanNyc2FzaWduJzsKY29uc3QgZ2VuUmFuSGV4ID0gc2l6ZSA9PiBbLi4uQXJyYXkoc2l6ZSldLm1hcCgoKSA9PiBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAxNikudG9TdHJpbmcoMTYpKS5qb2luKCcnKTsKbGV0IHN0cmVhbTsgLy8gem9vbSBzdHJlYW0KY29uc3QgY2xpZW50ID0gWm9vbVZpZGVvLmNyZWF0ZUNsaWVudCgpOyAvLyB6b29tIGNsaWVudAoKbGV0IGNhbnZhc0hhbmRsZXIgPSBudWxsOyAvLyBjYW52YXMgLyB2aWRlbyB0YWcgdG8gYmUgbG9hZGVkIHRvIHNob3cgdmlkZW8gY2FtCmxldCBzY3JlZW5IYW5kbGVyID0gbnVsbDsgLy8gY2FudmFzIC8gdmlkZW8gdGFnIHRvIHNob3cgc2NyZWVuIHNoYXJlCmxldCBhdWRpb0NhbnZhcyA9IG51bGw7CmxldCBhdWRpb0NhbnZhc0N0eCA9IG51bGw7CmxldCBtY3N0cmVhbSA9IG51bGw7IC8vIGNhbnZhcyBzdHJlYW0KbGV0IG1jID0gbnVsbDsgLy8gbG9jYWwgbWVkaWEgcmVjb3JkIHRvIHJlY29yZCB6b29tIHN0cmVhbSAodGhlb3JpY2FsbHkpCmxldCBtY01pbWVUeXBlID0gISF3aW5kb3cuc2FmYXJpID8gInZpZGVvL21wNCIgOiAidmlkZW8vd2VibSI7CmxldCBtcyA9IG51bGw7IC8vIGxvY2FsIG1lZGlhIHN0cmVhbSByZXByZXNlbnRpbmcgdGhlIGNhbnZhcy92aWRlbwpsZXQgbWljVHJhY2sgPSBudWxsOyAvLyBsb2NhbCBtZWRpYSBzdHJlYW0gcmVwcmVzZW50aW5nIHVzZXIncyBtaWMKbGV0IGNodW5rcyA9IFtdOwpsZXQgc2FmYXJpQXVkaW9EZWNvZGU7CmxldCBzYWZhcmlBdWRpb0VuY29kZTsKbGV0IHNlc3Npb25Ub3BpYyA9IGdlblJhbkhleCg2KTsKbGV0IHNlc3Npb25QYXNzd29yZCA9IGdlblJhbkhleCg2KTsKCi8vIGZpbmFsIHJlbmRpbmcgcGxhY2UKbGV0IGNhbnZhc1JlbmRlckhhbmRsZSA9IG51bGw7CmxldCBjYW52YXNSZW5kZXJIYW5kbGVTdHJlYW0gPSBudWxsOwpsZXQgY2FudmFzUmVuZGVySGFuZGxlQ3R4ID0gbnVsbDsKCi8qCiAgc29tZSBpc3N1ZXMgLyBmZWF0dXJlcwogIDEuIHBpY3R1cmUtaW4tcGljdHVyZSB3aGVuIHN0YXJ0aW5nIHpvb20gJiBzaGFyZSBzY3JlZW4KICAyLiBtaWMgZmVlZGJhY2sgcHJvYmxlbSBvbiBjaHJvbWUKICAgIC0gcHJvYmxlbSB3aGVuIHN0YXJ0aW5nIHJlY29yZGluZwogIDMuIHNjb3BlIGRpc3BsYXkgd2hlbiByZWNvcmRpbmcgb25seSBzb3VuZAogIDQuIG1lZGlhIHJlY29yZGVyIHN0YXRlLCBzb21ldGhpbmcgZ2V0IGxvc3QgYWZ0ZXIgYSByZWNvcmRpbmcgc2Vzc2lvbi4KCiAgLy8gbmV3IHBsYW46IHJlYnVpbGRpbmcgdGhlIG1lZGlhcmVjb3JkZXIgYW5kIHpvb20gY29udHJvbHMKICAxLiBtZWRpYXJlY29yZGVyIG5lZWRzIHN0cmVhbXMgCiAgMi4gdGllIHZpZGVvL2NhbnZhcyB0YWcgdG8gc3RyZWFtLCByZWNvcmQgYW55dGhpbmcgb24gdGhhdAogIDMuIHRpZSBtaWMgYXMgYSBuZXcgc3RyZWFtLCByZWNvcmQgYW55dGhpbmcgb24gdGhhdC4gKGZpbmQgaWYgY2FuIHJlc29sdmUgdGhlIGZlZWRiYWNrIHByb2JsZW0pCiovCgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIlpvb21RdWVzdGlvbkZvcm0iLAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBzdGF0dXM6ICdSZWFkeScsCiAgICAgIHNlc3Npb25Ub3BpYywKICAgICAgc2Vzc2lvblBhc3N3b3JkCiAgICB9OwogIH0sCiAgYXN5bmMgdXBkYXRlZCgpIHsKICAgIC8vIGNhbGxlZCBldmVyeXRpbWUgdGhlIGZvcm0gZ2V0cyB1cGRhdGVkLiB3YW50ZWQgdG8gZG8gbW91bnRlZCwgYnV0IHRoYXQgd2lsbCBvbmx5IGNhbGxlZCBvbmNlLgoKICAgIGNvbnNvbGUubG9nKCdab29tUXVlc3Rpb25Gb3JtIHVwZGF0ZWQnKTsKICAgIGNvbnNvbGUubG9nKGBVc2luZyBab29tIFZJREVPIFNESyB2ZXJzaW9uICR7Wm9vbVZpZGVvLlZFUlNJT059YCk7CgogICAgLyoKICAgICAgcGxhbjogCiAgICAgIC0gY2hlY2sgaWYgY2FudmFzIGlzIHRoZXJlOyBpZiBub3QgdGhlcmU6CiAgICAgIC0gdG8gYWRkIGNhbnZhcyhlcykgb3IgdmlkZW8gdGFnIGJhc2VkIG9uIGJyb3dzZXIKICAgICAgLSBzZXR1cCBhdWRpbyB3YXZlZm9ybSBkcmF3IGZuCiAgICAgIC0gc2V0dXAgY29tcG9zaXRlIGRyYXcgZm4KICAgICAgLSBzZXR1cCBtZWRpYSByZWNvcmRlciB0byByZWNvcmQgdGhlIGNvbXBvc2l0ZSBjYW52YXMgLyBtaWMKICAgICovCgogICAgLy8gaWYgdGhlcmUgYWxyZWFkeSB0aGVyZSwgc2tpcCBjaGVja2luZwogICAgbGV0IGNhbnZhc0NoZWNrID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3NlbGYtdmlldy1jYW52YXMnKTsKICAgIGxldCB2aWRlb0NoZWNrID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3NlbGYtdmlldy12aWRlbycpOwoKICAgIC8vIGNoZWNrIGlmIGNhbnZhcyBpcyBhbHJlYWR5IHRoZXJlLCBpZiBhbHJlYWR5IHRoZXJlLCBza2lwIHRoZSByZXN0IG9mIHRoZSBzdGVwIAogICAgaWYgKGNhbnZhc0NoZWNrICE9PSBudWxsIHx8IHZpZGVvQ2hlY2sgIT09IG51bGwpIHsKICAgICAgcmV0dXJuOwogICAgfQoKICAgIC8vIC0tLS0gU0VUVVAgVEhFIENBTlZBUyAvIE1FRElBIFJFQ09SREVSIElGIElUJ1MgTk9UIFRIRVJFIC0tLS0KCiAgICAvLyBzZXR1cCB0aGUgY29tcG9zaXRlIGNhbnZhcyAsIHdoaWNoIHdpbGwgYmUgbGF0ZXIgdXNlIGZvciByZWNvcmRpbmcuCiAgICBjYW52YXNSZW5kZXJIYW5kbGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjY2FudmFzLXJlbmRlcicpOwogICAgY2FudmFzUmVuZGVySGFuZGxlQ3R4ID0gY2FudmFzUmVuZGVySGFuZGxlLmdldENvbnRleHQoJzJkJyk7CiAgICBjYW52YXNSZW5kZXJIYW5kbGVTdHJlYW0gPSBjYW52YXNSZW5kZXJIYW5kbGUuY2FwdHVyZVN0cmVhbSgpOwoKICAgIC8vIGFkZCB2aWRlbyAvIGNhbnZhcyB0YWcgYmFzZWQgb24gYnJvd3NlciBhbmQgdGhlcmUncyBzaGFyZWQgYXJyYXkgYnVmZmVyIGRpc2FibGVkCiAgICBsZXQgdGhlVmlldyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyN0aGUtdmlldycpOwogICAgLy9pZighIXdpbmRvdy5jaHJvbWUgJiYgISh0eXBlb2YgU2hhcmVkQXJyYXlCdWZmZXIgPT09ICdmdW5jdGlvbicpKXsKICAgIC8qCiAgICBpZihuYXZpZ2F0b3IudXNlckFnZW50LnRvTG93ZXJDYXNlKCkuaW5kZXhPZignZmlyZWZveCcpID4gLTEpewogICAgICAvLyBkZWJ1ZzogdHJ5aW5nIHRvIGZvcmNlIGZpcmVmb3ggdG8gdXNlIGNhbnZhcwogICAgICBjYW52YXNIYW5kbGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJyk7CiAgICAgIGNhbnZhc0hhbmRsZXIuaWQ9J3NlbGYtdmlldy1jYW52YXMnOwogICAgfSBlbHNlIGlmKHR5cGVvZiBTaGFyZWRBcnJheUJ1ZmZlciA9PT0gJ2Z1bmN0aW9uJyl7CiAgICAqLwogICAgaWYgKHR5cGVvZiBTaGFyZWRBcnJheUJ1ZmZlciA9PT0gJ2Z1bmN0aW9uJykgewogICAgICAvLyBoYXZlIHNoYXJlZCBhcnJheSBidWZmZXIgZW5hYmxlZAogICAgICBjYW52YXNIYW5kbGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJyk7CiAgICAgIGNhbnZhc0hhbmRsZXIuaWQgPSAnc2VsZi12aWV3LWNhbnZhcyc7CiAgICB9IGVsc2UgewogICAgICAvLyBkb2Vzbid0IGhhdmUgc2hhcmVkIGFycmF5IGJ1ZmZlciBlbmFibGUgKGxpa2UgY2hyb21lKQogICAgICBjYW52YXNIYW5kbGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndmlkZW8nKTsKICAgICAgY2FudmFzSGFuZGxlci5pZCA9ICdzZWxmLXZpZXctdmlkZW8nOwogICAgfQogICAgY2FudmFzSGFuZGxlci5oZWlnaHQgPSAnMzI1JzsKICAgIGNhbnZhc0hhbmRsZXIud2lkdGggPSAnNTc2JzsKICAgIGNhbnZhc0hhbmRsZXIuY2xhc3NOYW1lID0gJ2JvcmRlci0yIGJvcmRlci1ibGFjayBoLWF1dG8gaC0yMCB3LWZ1bGwgbWQ6dy1zY3JlZW4gbWF4LXcteGwnOwogICAgdGhlVmlldy50ZXh0Q29udGVudCA9ICcnOwogICAgdGhlVmlldy5hcHBlbmRDaGlsZChjYW52YXNIYW5kbGVyKTsKCiAgICAvLyBhZGQgdmlkZW8gLyBjYW52YXMgdGFnIGZvciB0aGUgc2NyZWVuIHNoYXJlIGJhc2VkIG9uIGJyb3dzZXIKICAgIGxldCB0aGVTY3JlZW4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjdGhlLXNjcmVlbicpOwogICAgaWYgKCEhd2luZG93LmNocm9tZSkgewogICAgICBzY3JlZW5IYW5kbGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndmlkZW8nKTsKICAgICAgc2NyZWVuSGFuZGxlci5pZCA9ICdzY3JlZW4tc2hhcmUtdmlkZW8nOwogICAgfSBlbHNlIHsKICAgICAgc2NyZWVuSGFuZGxlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpOwogICAgICBzY3JlZW5IYW5kbGVyLmlkID0gJ3NjcmVlbi1zaGFyZS1jYW52YXMnOwogICAgICBzY3JlZW5IYW5kbGVyLm9ucGxheSA9ICgpID0+IHsKICAgICAgICBjb25zb2xlLmxvZygnc2NyZWVuIHNoYXJlIGRldGVjdGVkJyk7CiAgICAgIH07CiAgICB9CiAgICBzY3JlZW5IYW5kbGVyLmNsYXNzTmFtZSA9ICdib3JkZXItMiBib3JkZXItYmxhY2sgaC1hdXRvIGgtMjAgdy1mdWxsIG1kOnctc2NyZWVuIG1heC13LXhsJzsKICAgIHRoZVNjcmVlbi5hcHBlbmRDaGlsZChzY3JlZW5IYW5kbGVyKTsKCiAgICAvLyB0ZXN0OiBjYXB0dXJlIGV2ZXJ5dGhpbmcgZnJvbSBzaGFyZSBzY3JlZW4gdmlkZW8gLyBjYW52YXMKICAgIC8vIGNhbnZhc1JlbmRlckhhbmRsZVN0cmVhbSA9IHNjcmVlbkhhbmRsZXIuY2FwdHVyZVN0cmVhbSgpOwoKICAgIC8vIGNhcHR1cmUgdGhlIG1pYywgYW5kIHB1dCBpdCBpbiBhIGF1ZGlvQ29udGV4dCwgc28gd2UgY2FuIGFuYWx5c2UgYW5kIGRyYXcKICAgIC8vIGFsc28sIHB1dCB0aGUgc3RyZWFtIGluIHRoZSBmaW5hbCByZW5kZXIgc3RyZWFtLCBzbyBjYW4gcmVjb3JkIHRoaW5ncy4gCiAgICBjb25zdCBhdWRpb0NvbnRleHQgPSBuZXcgQXVkaW9Db250ZXh0KCk7CiAgICBtaWNUcmFjayA9IGF3YWl0IG5hdmlnYXRvci5tZWRpYURldmljZXMuZ2V0VXNlck1lZGlhKHsKICAgICAgYXVkaW86IHRydWUKICAgIH0pOwogICAgbWljVHJhY2suZ2V0QXVkaW9UcmFja3MoKVswXS5lbmFibGVkID0gZmFsc2U7CiAgICBjYW52YXNSZW5kZXJIYW5kbGVTdHJlYW0uYWRkVHJhY2sobWljVHJhY2suZ2V0QXVkaW9UcmFja3MoKVswXSk7CiAgICBjb25zdCBzb3VyY2UgPSBhdWRpb0NvbnRleHQuY3JlYXRlTWVkaWFTdHJlYW1Tb3VyY2UobWljVHJhY2spOwogICAgY29uc3QgYW5hbHlzZXIgPSBhdWRpb0NvbnRleHQuY3JlYXRlQW5hbHlzZXIoKTsKICAgIGFuYWx5c2VyLmZmdFNpemUgPSAyMDQ4OwogICAgY29uc3QgYnVmZmVyTGVuZ3RoID0gYW5hbHlzZXIuZnJlcXVlbmN5QmluQ291bnQ7CiAgICBjb25zdCBkYXRhQXJyYXkgPSBuZXcgVWludDhBcnJheShidWZmZXJMZW5ndGgpOwogICAgYW5hbHlzZXIuZ2V0Qnl0ZVRpbWVEb21haW5EYXRhKGRhdGFBcnJheSk7CgogICAgLy8gQ29ubmVjdCB0aGUgc291cmNlIHRvIGJlIGFuYWx5c2VkCiAgICBzb3VyY2UuY29ubmVjdChhbmFseXNlcik7CgogICAgLy8gY2FudmFzIHRvIGRyYXcgdGhlIHNvdW5kCiAgICBhdWRpb0NhbnZhcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyN0aGUtYXVkaW8nKTsKICAgIGF1ZGlvQ2FudmFzQ3R4ID0gYXVkaW9DYW52YXMuZ2V0Q29udGV4dCgnMmQnKTsKCiAgICAvLyBkZWJ1ZywgY2hlY2sgYXVkaW8gQ29udGV4dAogICAgLy8gY29uc29sZS5sb2coJ2F1ZGlvQ29udGV4dCcsIGF1ZGlvQ29udGV4dCk7CgogICAgLy8gZHJhdyB0aGUgd2F2ZWZvcm0KICAgIGZ1bmN0aW9uIGRyYXcoKSB7CiAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZShkcmF3KTsKICAgICAgYW5hbHlzZXIuZ2V0Qnl0ZVRpbWVEb21haW5EYXRhKGRhdGFBcnJheSk7CiAgICAgIGF1ZGlvQ2FudmFzQ3R4LmZpbGxTdHlsZSA9ICJyZ2IoMjAwLCAyMDAsIDIwMCkiOwogICAgICBhdWRpb0NhbnZhc0N0eC5maWxsUmVjdCgwLCAwLCBhdWRpb0NhbnZhcy53aWR0aCwgYXVkaW9DYW52YXMuaGVpZ2h0KTsKICAgICAgYXVkaW9DYW52YXNDdHgubGluZVdpZHRoID0gMjsKICAgICAgYXVkaW9DYW52YXNDdHguc3Ryb2tlU3R5bGUgPSAicmdiKDAsIDAsIDApIjsKICAgICAgYXVkaW9DYW52YXNDdHguYmVnaW5QYXRoKCk7CiAgICAgIGNvbnN0IHNsaWNlV2lkdGggPSBhdWRpb0NhbnZhcy53aWR0aCAqIDEuMCAvIGJ1ZmZlckxlbmd0aDsKICAgICAgbGV0IHggPSAwOwogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGJ1ZmZlckxlbmd0aDsgaSsrKSB7CiAgICAgICAgY29uc3QgdiA9IGRhdGFBcnJheVtpXSAvIDEyOC4wOwogICAgICAgIGNvbnN0IHkgPSB2ICogYXVkaW9DYW52YXMuaGVpZ2h0IC8gMjsKICAgICAgICBpZiAoaSA9PT0gMCkgewogICAgICAgICAgYXVkaW9DYW52YXNDdHgubW92ZVRvKHgsIHkpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBhdWRpb0NhbnZhc0N0eC5saW5lVG8oeCwgeSk7CiAgICAgICAgfQogICAgICAgIHggKz0gc2xpY2VXaWR0aDsKICAgICAgfQogICAgICBhdWRpb0NhbnZhc0N0eC5saW5lVG8oYXVkaW9DYW52YXMud2lkdGgsIGF1ZGlvQ2FudmFzLmhlaWdodCAvIDIpOwogICAgICBhdWRpb0NhbnZhc0N0eC5zdHJva2UoKTsKICAgIH0KICAgIGRyYXcoKTsKCiAgICAvLyBkcmF3IGNvbXBvc2l0ZSBiYXNlZCBvbiBzb3VyY2UgY2FudmFzL3ZpZGVvCiAgICBsZXQgZHJhd0NvbXBvc2l0ZSA9ICgpID0+IHsKICAgICAgLy9yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoZHJhd0NvbXBvc2l0ZSk7CgogICAgICBsZXQgbWljT24gPSB0aGlzLiRzdG9yZS5zdGF0ZS50ZWFjaGVyQ3JlYXRlQXNzaWdubWVudC5zdGF0ZXMuaXNNaWNPbjsKICAgICAgbGV0IHZpZGVvT24gPSB0aGlzLiRzdG9yZS5zdGF0ZS50ZWFjaGVyQ3JlYXRlQXNzaWdubWVudC5zdGF0ZXMuaXNWaWRlb09uOwogICAgICBsZXQgc2NyZWVuU2hhcmVPbiA9IHRoaXMuJHN0b3JlLnN0YXRlLnRlYWNoZXJDcmVhdGVBc3NpZ25tZW50LnN0YXRlcy5pc1NjcmVlblNoYXJlOwoKICAgICAgLy8gY2xlYXIgdGhlIHBpY3R1cmUgZmlyc3QKICAgICAgLy9jYW52YXNSZW5kZXJIYW5kbGVDdHguY2xlYXJSZWN0KDAsMCwgY2FudmFzUmVuZGVySGFuZGxlLndpZHRoLCBjYW52YXNSZW5kZXJIYW5kbGUuaGVpZ2h0KTsKCiAgICAgIGlmICh2aWRlb09uICYmICFzY3JlZW5TaGFyZU9uKSB7CiAgICAgICAgLy8gY2FtZXJhIG9uLCBidXQgbm90IHNjcmVlbiBzaGFyZQogICAgICAgIGNhbnZhc1JlbmRlckhhbmRsZUN0eC5kcmF3SW1hZ2UoY2FudmFzSGFuZGxlciwgMCwgMCwgY2FudmFzUmVuZGVySGFuZGxlLndpZHRoLCBjYW52YXNSZW5kZXJIYW5kbGUuaGVpZ2h0KTsKICAgICAgfSBlbHNlIGlmICghdmlkZW9PbiAmJiBzY3JlZW5TaGFyZU9uKSB7CiAgICAgICAgLy8gY2FtZXJhIG9mZiwgYnV0IHNjcmVlbiBpcyBzaGFyZWQKICAgICAgICAvLyBuZWVkIHRvIGZpZ3VyZSBvdXQgYSB3YXkgdGhhdCBkb2Vzbid0IHByb2R1Y2VkIGNsaXBwaW5nIHdoZW4gcmVjb3JkaW5nCiAgICAgICAgLy8gY2FudmFzUmVuZGVySGFuZGxlQ3R4LmRyYXdJbWFnZShzY3JlZW5IYW5kbGVyLCAwLDAgLCBjYW52YXNSZW5kZXJIYW5kbGUud2lkdGgsIGNhbnZhc1JlbmRlckhhbmRsZS5oZWlnaHQpCiAgICAgICAgLy9jYW52YXNSZW5kZXJIYW5kbGVDdHguZHJhd0ltYWdlKHNjcmVlbkhhbmRsZXIsIDAsIDApOwogICAgICAgIGNhbnZhc1JlbmRlckhhbmRsZUN0eC5kcmF3SW1hZ2Uoc2NyZWVuSGFuZGxlciwgMCwgMCwgY2FudmFzUmVuZGVySGFuZGxlLndpZHRoLCBjYW52YXNSZW5kZXJIYW5kbGUuaGVpZ2h0KTsKICAgICAgfSBlbHNlIGlmICh2aWRlb09uICYmIHNjcmVlblNoYXJlT24pIHsKICAgICAgICAvLyBib3RoIHZpZGVvIGFuZCBzY3JlZW4gc2hhcmUgaXMgb24sIGRvIFBpUAogICAgICAgIC8vIGNhbnZhc1JlbmRlckhhbmRsZUN0eC5jbGVhclJlY3QoMCwwLCBjYW52YXNSZW5kZXJIYW5kbGUud2lkdGgsIGNhbnZhc1JlbmRlckhhbmRsZS5oZWlnaHQpOwogICAgICAgIGNhbnZhc1JlbmRlckhhbmRsZUN0eC5kcmF3SW1hZ2Uoc2NyZWVuSGFuZGxlciwgMCwgMCwgY2FudmFzUmVuZGVySGFuZGxlLndpZHRoLCBjYW52YXNSZW5kZXJIYW5kbGUuaGVpZ2h0KTsKICAgICAgICBjYW52YXNSZW5kZXJIYW5kbGVDdHguZHJhd0ltYWdlKGNhbnZhc0hhbmRsZXIsIDAsIDAsIGNhbnZhc0hhbmRsZXIud2lkdGgsIGNhbnZhc0hhbmRsZXIuaGVpZ2h0LCBjYW52YXNSZW5kZXJIYW5kbGUud2lkdGggKiAzIC8gNCwgY2FudmFzUmVuZGVySGFuZGxlLmhlaWdodCAqIDMgLyA0LCBjYW52YXNSZW5kZXJIYW5kbGUud2lkdGggLyA0LCBjYW52YXNSZW5kZXJIYW5kbGUuaGVpZ2h0IC8gNCk7CiAgICAgIH0gZWxzZSBpZiAobWljT24gJiYgIXZpZGVvT24gJiYgIXNjcmVlblNoYXJlT24pIHsKICAgICAgICAvLyBvbmx5IHRoZSBtaWMgaXMgb24KICAgICAgICBjYW52YXNSZW5kZXJIYW5kbGVDdHguZHJhd0ltYWdlKGF1ZGlvQ2FudmFzLCAwLCAwLCBjYW52YXNSZW5kZXJIYW5kbGUud2lkdGgsIGNhbnZhc1JlbmRlckhhbmRsZS5oZWlnaHQpOwogICAgICB9IGVsc2UgewogICAgICAgIC8vIGRlZmF1bHQsIG5vIGlucHV0CiAgICAgICAgY2FudmFzUmVuZGVySGFuZGxlQ3R4LmZpbGxUZXh0KCJOTyBJTlBVVCIsIGNhbnZhc1JlbmRlckhhbmRsZS53aWR0aCAvIDIsIGNhbnZhc1JlbmRlckhhbmRsZS5oZWlnaHQgLyAyKTsKICAgICAgfQogICAgfTsKICAgIC8vIGRyYXdDb21wb3NpdGUoKTsKICAgIC8vIHJlZHJhdyB0aGUgY29tcG9zaXRlIGNhbnZhcyA2MCB0aW1lcyAvIHNlY29uZC4gd291bGQgbGlrZSB0byB1c2UgcmVxdWVzdEFuaW1hdGlvbkZyYW1lLCAKICAgIC8vIGJ1dCBpdCBwYXVzZXMgaWYgdGhlIGJyb3dzZXIgaXMgb2ZmIGZvY3VzLiAKICAgIHNldEludGVydmFsKGRyYXdDb21wb3NpdGUsIDEwMDAgLyA2MCk7CgogICAgLy8gc3RhcnQgYnVpbGRpbmcgdGhlIG1lZGlhIHJlY29yZGVyCiAgICAvLyBjYXB0dXJlIHdoYXQncyBnb2luZyBvbiBpbiB0aGUgcmVuZGVyIGNhbnZhcyBhbmQgdGhlIG1pYwogICAgbWMgPSBuZXcgTWVkaWFSZWNvcmRlcihjYW52YXNSZW5kZXJIYW5kbGVTdHJlYW0sIHsKICAgICAgdHlwZTogbWNNaW1lVHlwZQogICAgfSk7CiAgICBtYy5vbnN0YXJ0ID0gKCkgPT4gewogICAgICAvLyBzdGFydCByZWNvcmRpbmcKICAgICAgY29uc29sZS5sb2coJ21jIG9uc3RhcnQnKTsKICAgIH07CiAgICBtYy5vbnN0b3AgPSBlID0+IHsKICAgICAgY29uc29sZS5sb2coJ21jIG9uc3RvcCcpOwoKICAgICAgLy9jb2xsZWN0IGFsbCBkYXRhIGFuZCBkdW1wIGl0CiAgICAgIC8vY29uc3QgYmxvYiA9IG5ldyBCbG9iKGNodW5rcywge3R5cGU6ICd2aWRlby93ZWJtJ30pOwogICAgICAvLyBlYWNoIGJyb3dzZXIgaGFzIGRpZmZlcmVudCBpZGVhIHdoYXQgbWltZVR5cGUgaXMgc3VwcG9ydGVkLiBzbyBzYWZhcmk6IHZpZGVvL21wNCwgZmlyZWZveCAmIGNocm9tZTogdmlkZW8vd2VibQogICAgICBjb25zdCBibG9iID0gbmV3IEJsb2IoY2h1bmtzLCB7CiAgICAgICAgdHlwZTogbWNNaW1lVHlwZQogICAgICB9KTsKICAgICAgY2h1bmtzID0gW107CgogICAgICAvL3B1dCB0aGUgYmxvYiBpbiBhIHZpZGVvIGdhbGxlcnkKICAgICAgY29uc29sZS5sb2coJ3B1c2hpbmcgbmV3IGJsb2Igd2l0aCBtZW1lVHlwZScsIG1jTWltZVR5cGUpOwogICAgICB2YXIgdXJsID0gVVJMLmNyZWF0ZU9iamVjdFVSTChibG9iKTsKICAgICAgLy8gY29uc29sZS5sb2coJ3VybCcsIHVybCk7CiAgICAgIHZhciB2aWRlb1RhZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3ZpZGVvJyk7CiAgICAgIHZpZGVvVGFnLmF1dG9wbGF5ID0gdHJ1ZTsKICAgICAgdmlkZW9UYWcuY29udHJvbHMgPSB0cnVlOwogICAgICB2aWRlb1RhZy5oZWlnaHQgPSA0ODA7CiAgICAgIHZpZGVvVGFnLndpZHRoID0gODU0OwogICAgICB2aWRlb1RhZy5zcmMgPSB1cmw7CgogICAgICAvL2Fsd2F5cyByZXBsYWNlIHdoYXQncyBldmVyIGluIHRoZSBwcmV2aWV3IGdhbGxlcnkKICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3ZpZGVvLXByZXZpZXctZ2FsbGVyeScpLnRleHRDb250ZW50ID0gJyc7CiAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyN2aWRlby1wcmV2aWV3LWdhbGxlcnknKS5hcHBlbmRDaGlsZCh2aWRlb1RhZyk7CgogICAgICAvL3RyaWdnZXIgdG8gcHVzaCB2aWRlbyBjb250ZW50IHRvIHF1ZXN0aW9uRGV0YWlscy56b29tTWVldGluZ3MKICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ3RlYWNoZXJDcmVhdGVBc3NpZ25tZW50L2hhbmRsZVpvb21RdWVzdGlvbicsIHVybCk7CiAgICAgIC8vIFVSTC5yZXZva2VPYmplY3RVUkwodXJsKTsKCiAgICAgIC8vIGZvciBkZWJ1ZywgdmlkZW8gY29udGVudCBmb3IgZGVidWdnaW5nCiAgICAgIC8vIGNvbnNvbGUubG9nKCdyZWNvcmQgdXJsIGR1bXAnLCB1cmwpOwogICAgfTsKCiAgICBtYy5vbmRhdGFhdmFpbGFibGUgPSBlID0+IHsKICAgICAgLy8gbW92ZSBkYXRhIGZyb20gYnVmZmVyIHRvIGFycmF5CiAgICAgIGNvbnNvbGUubG9nKCdtYyBvbmRhdGFhdmFpbGFibGUnKTsKCiAgICAgIC8vcHVtcCBkYXRhIGluIHRoZSBjaHVua3MgYXJyYXkuCiAgICAgIGNodW5rcy5wdXNoKGUuZGF0YSk7CgogICAgICAvLyBhZnRlciBzdG9wIGBkYXRhYXZpbGFibGVgIGV2ZW50IHJ1biBvbmUgbW9yZSB0aW1lCiAgICAgIGlmIChtYy5zdGF0ZSA9PT0gJ3JlY29yZGluZycpIHsKICAgICAgICBtYy5zdG9wKCk7CiAgICAgIH0KICAgICAgdGhpcy5zdGF0dXMgPSAiUmVjb3JkaW5nLiBQdXNoaW5nIGRhdGEgdG8gY2FjaGUgLi4uIjsKICAgIH07CiAgfSwKICBtZXRob2RzOiB7CiAgICBhc3luYyBjcmVhdGVab29tTWVldGluZyhlKSB7CiAgICAgIC8vaGFwcGVucyB3aGVuIGNyZWF0ZSBhIHpvb20gbWVldGluZyBjbGlja2VkCgogICAgICBjb25zb2xlLmxvZygnY3JlYXRlIGEgem9vbSBtZWV0aW5nJyk7CiAgICAgIHRoaXMuc3RhdHVzID0gIkpvaW5pbmcgbWVldGluZyAuLi4iOwogICAgICBjbGllbnQuaW5pdCgnZW4tVVMnLCAnQ0ROJyk7CgogICAgICAvL2NyZWF0ZSBzZXNzaW9uCiAgICAgIC8vIDEuIGdlbmVyYXRlIGp3dAoKICAgICAgLy9jb25zb2xlLmxvZygnZ2VuZXJhdGUgand0Jyk7CiAgICAgIGNvbnN0IGlhdCA9IE1hdGgucm91bmQoKG5ldyBEYXRlKCkuZ2V0VGltZSgpIC0gMzAwMDApIC8gMTAwMCk7CiAgICAgIGNvbnN0IGV4cCA9IGlhdCArIDYwICogNjAgKiAyOwogICAgICBjb25zdCBvSGVhZGVyID0gewogICAgICAgIGFsZzogJ0hTMjU2JywKICAgICAgICB0eXA6ICdKV1QnCiAgICAgIH07CiAgICAgIGNvbnN0IG9QYXlsb2FkID0gewogICAgICAgIGFwcF9rZXk6IHByb2Nlc3MuZW52LlZVRV9BUFBfWk9PTV9WSURFT19TREtfS0VZLAogICAgICAgIHRwYzogc2Vzc2lvblRvcGljLAogICAgICAgIHZlcnNpb246IDEsCiAgICAgICAgcm9sZV90eXBlOiAxLAogICAgICAgIGlhdDogaWF0LAogICAgICAgIGV4cDogZXhwLAogICAgICAgIHB3ZDogc2Vzc2lvblBhc3N3b3JkCiAgICAgIH07CiAgICAgIGNvbnN0IHNIZWFkZXIgPSBKU09OLnN0cmluZ2lmeShvSGVhZGVyKTsKICAgICAgY29uc3Qgc1BheWxvYWQgPSBKU09OLnN0cmluZ2lmeShvUGF5bG9hZCk7CiAgICAgIGNvbnN0IHNpZ25hdHVyZSA9IEtKVVIuandzLkpXUy5zaWduKCdIUzI1NicsIHNIZWFkZXIsIHNQYXlsb2FkLCBwcm9jZXNzLmVudi5WVUVfQVBQX1pPT01fVklERU9fU0RLX1NFQ1JFVCk7CiAgICAgIC8vY29uc29sZS5sb2coJ3NpZ25hdHVyZTonLCBzaWduYXR1cmUpOwoKICAgICAgLy8gMi4gYWN0dWFsbHkgY3JlYXRlIHRoZSBzZXNzaW9uCiAgICAgIGNvbnNvbGUubG9nKCdjcmVhdGUgYSB6b29tIHNlc3Npb24nKTsKICAgICAgLy8gYXdhaXQgY2xpZW50LmpvaW4oJ3Nlc3Npb24nLCBzaWduYXR1cmUsICdlcndpbmthcmltQGdtYWlsLmNvbScsICdwYXNzd29yZCcpLnRoZW4oKHJlcykgPT4gewogICAgICBhd2FpdCBjbGllbnQuam9pbihzZXNzaW9uVG9waWMsIHNpZ25hdHVyZSwgdGhpcy4kc3RvcmUuc3RhdGUuYXV0aFVzZXIuZW1haWwsIHNlc3Npb25QYXNzd29yZCkudGhlbihyZXMgPT4gewogICAgICAgIHN0cmVhbSA9IGNsaWVudC5nZXRNZWRpYVN0cmVhbSgpOwogICAgICAgIGNvbnNvbGUubG9nKCdyZXMnLCByZXMpOwogICAgICAgIHRoaXMuc3RhdHVzID0gYEpvaW4gc3VjY2Vzc2Z1bC4gU2Vzc2lvbiBJRDogJHtzZXNzaW9uVG9waWN9LCBQYXNzd29yZDogJHtzZXNzaW9uUGFzc3dvcmR9YDsKCiAgICAgICAgLyoKICAgICAgICBjb25zb2xlLmxvZygnc3RyZWFtJywgc3RyZWFtKTsKICAgICAgICBjb25zb2xlLmxvZygnY2xpZW50JywgY2xpZW50KTsKICAgICAgICBjb25zb2xlLmxvZygnc2Vzc2lvbkluZm8nLCBjbGllbnQuZ2V0U2Vzc2lvbkluZm8oKSk7CiAgICAgICAgY29uc29sZS5sb2coJ2NsaWVudGluZm8nLCBjbGllbnQuZ2V0Q3VycmVudFVzZXJJbmZvKCkudXNlcklkKTsKICAgICAgICAqLwogICAgICB9KS5jYXRjaChlcnJvciA9PiB7CiAgICAgICAgdGhpcy5zdGF0dXMgPSAiSm9pbiBGYWlsZWQuIENoZWNrIGlmIGFkLWJsb2NrZXIgaXMgYWN0aXZlLiI7CiAgICAgICAgY29uc29sZS5sb2coJ2pvaW4gZmFpbGVkOyBjaGVjayBjb25uZWN0aW9uIG9yIGFkLWJsb2NrcycpOwogICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTsKICAgICAgfSk7CgogICAgICAvLyBldmVudCBsaXN0ZW5lciB0byBzZWUgd2hlbiBkZXNrdG9wIFNhZmFyaSBhdWRpbyBoYXMgYmVlbiBpbml0aWFsaXplZAogICAgICBjbGllbnQub24oJ21lZGlhLXNkay1jaGFuZ2UnLCBwYXlsb2FkID0+IHsKICAgICAgICBpZiAocGF5bG9hZC50eXBlID09PSAnYXVkaW8nICYmIHBheWxvYWQucmVzdWx0ID09PSAnc3VjY2VzcycpIHsKICAgICAgICAgIGlmIChwYXlsb2FkLmFjdGlvbiA9PT0gJ2VuY29kZScpIHsKICAgICAgICAgICAgLy8gZW5jb2RlIGZvciBzZW5kaW5nIGF1ZGlvIHN0cmVhbSAoc3BlYWspCiAgICAgICAgICAgIHNhZmFyaUF1ZGlvRW5jb2RlID0gdHJ1ZTsKICAgICAgICAgIH0gZWxzZSBpZiAocGF5bG9hZC5hY3Rpb24gPT09ICdkZWNvZGUnKSB7CiAgICAgICAgICAgIC8vIGRlY29kZSBmb3IgcmVjZWl2aW5nIGF1ZGlvIHN0cmVhbSAoaGVhcikKICAgICAgICAgICAgc2FmYXJpQXVkaW9EZWNvZGUgPSB0cnVlOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICA7CiAgICAgICAgaWYgKHdpbmRvdy5zYWZhcmkgIT09IHVuZGVmaW5lZCkgewogICAgICAgICAgLy8gZGVza3RvcCBTYWZhcmksIGNoZWNrIGlmIGRlc2t0b3AgU2FmYXJpIGF1ZGlvIGhhcyBiZWVuIGluaXRpYWxpemVkCiAgICAgICAgICBpZiAoc2FmYXJpQXVkaW9FbmNvZGUgJiYgc2FmYXJpQXVkaW9EZWNvZGUpIHsKICAgICAgICAgICAgLy8gZGVza3RvcCBTYWZhcmkgYXVkaW8gaGFzIGJlZW4gaW5pdGlhbGl6ZWQKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAvLyB0cnkgdG8gc3RhcnQgYXVkaW8gYXV0b21hdGljYWxseSBpbiBTYWZhcmkKICAgICAgICAgICAgICBzdHJlYW0uc3RhcnRBdWRpbyh7CiAgICAgICAgICAgICAgICBhdXRvU3RhcnRBdWRpb0luU2FmYXJpOiB0cnVlCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgICAgICAgLy8gc3RhcnRpbmcgYXVkaW8gYXV0b21hdGljYWxseSBpbiBTYWZhcmkgZmFpbGVkLCByZXRyeSBvciBoYW5kbGUgZXJyb3IKICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIC8vIGRlc2t0b3AgU2FmYXJpIGF1ZGlvIGhhcyBub3QgYmVlbiBpbml0aWFsaXplZCwgcmV0cnkgb3IgaGFuZGxlIGVycm9yCiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdzYWZhcmkgYXVkaW8gaGFzIG5vdCBmaW5pc2hlZCBpbml0aWFsaXppbmcnKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgOwogICAgICB9KTsKICAgICAgY29uc29sZS5sb2coJ2pvaW4gc3VjY2VzcycpOwogICAgICB0aGlzLiRzdG9yZS5jb21taXQoJ3RlYWNoZXJDcmVhdGVBc3NpZ25tZW50L3RvZ2dsZUlzSW5ab29tTWVldGluZycpOwoKICAgICAgLy8gZGV0ZWN0ICdzdG9wIHNoYXJpbmcnIGNvbnRyb2xsZWQgYnkgdGhlIGJyb3dzZXIKICAgICAgY2xpZW50Lm9uKCdwYXNzaXZlbHktc3RvcC1zaGFyZScsIHBheWxvYWQgPT4gewogICAgICAgIGNvbnNvbGUubG9nKCdkZXRlY3RlZCBzY3JlZW4gc2hhcmUgaXMgb2ZmJywgcGF5bG9hZCk7CiAgICAgICAgdGhpcy50b2dnbGVTaGFyZVNjcmVlbkJ1dHRvbigpOwogICAgICB9KTsKICAgIH0sCiAgICBsZWF2ZVpvb21NZWV0aW5nKGUpIHsKICAgICAgLy8gc3dpdGNoIG9mZiBjYW1lcmEsIG1pYywgc2NyZWVuIHNoYXJlIGFuZCByZWNvcmRpbmcgaWYgdGhleSBhcmUgb24KICAgICAgaWYgKHRoaXMuJHN0b3JlLnN0YXRlLnRlYWNoZXJDcmVhdGVBc3NpZ25tZW50LnN0YXRlcy5pc1ZpZGVvT24pIHsKICAgICAgICB0aGlzLnRvZ2dsZVZpZGVvQnV0dG9uKCk7CiAgICAgIH0KICAgICAgaWYgKHRoaXMuJHN0b3JlLnN0YXRlLnRlYWNoZXJDcmVhdGVBc3NpZ25tZW50LnN0YXRlcy5pc01pY09uKSB7CiAgICAgICAgdGhpcy50b2dnbGVNaWNCdXR0b24oKTsKICAgICAgfQogICAgICBpZiAodGhpcy4kc3RvcmUuc3RhdGUudGVhY2hlckNyZWF0ZUFzc2lnbm1lbnQuc3RhdGVzLmlzU2NyZWVuU2hhcmUpIHsKICAgICAgICB0aGlzLnRvZ2dsZVNoYXJlU2NyZWVuQnV0dG9uKCk7CiAgICAgIH0KICAgICAgaWYgKHRoaXMuJHN0b3JlLnN0YXRlLnRlYWNoZXJDcmVhdGVBc3NpZ25tZW50LnN0YXRlcy5pc1JlY29yZGluZykgewogICAgICAgIHRoaXMuc3RvcFJlY29yZGluZygpOwogICAgICB9CgogICAgICAvLyBsZWF2ZSB6b29tIG1lZXRpbmcKICAgICAgY2xpZW50LmxlYXZlKHRydWUpOwogICAgICBjb25zb2xlLmxvZygnbGVhdmUgc3VjY2VzcycpOwogICAgICB0aGlzLnN0YXR1cyA9ICJMZWZ0IHRoZSBtZWV0aW5nLiI7CiAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgndGVhY2hlckNyZWF0ZUFzc2lnbm1lbnQvdG9nZ2xlSXNJblpvb21NZWV0aW5nJyk7CiAgICB9LAogICAgYXN5bmMgdG9nZ2xlVmlkZW9CdXR0b24oKSB7CiAgICAgIHZhciB2aWRlb1N0YXRlID0gdGhpcy4kc3RvcmUuc3RhdGUudGVhY2hlckNyZWF0ZUFzc2lnbm1lbnQuc3RhdGVzLmlzVmlkZW9PbjsKICAgICAgaWYgKHZpZGVvU3RhdGUpIHsKICAgICAgICAvLyB2aWRlbyBpcyBvbiwgc3RvcCB2aWRlbwogICAgICAgIHRoaXMuc3RhdHVzID0gJ0NhbWVyYSB0dXJuZWQgb2ZmJzsKICAgICAgICBzdHJlYW0uc3RvcFZpZGVvKCk7CiAgICAgICAgY2FudmFzUmVuZGVySGFuZGxlQ3R4LmNsZWFyUmVjdCgwLCAwLCBjYW52YXNSZW5kZXJIYW5kbGUud2lkdGgsIGNhbnZhc1JlbmRlckhhbmRsZS5oZWlnaHQpOwogICAgICB9IGVsc2UgewogICAgICAgIC8vIHZpZGVvIGlzIG9mZiwgc3RhcnQgdmlkZW8KICAgICAgICB0aGlzLnN0YXR1cyA9ICdDYW1lcmEgdHVybmVkIG9uJzsKICAgICAgICBjb25zb2xlLmxvZygnY2hlY2tpbmcgU2hhcmVkQXJyYXlCdWZmZXInLCB0eXBlb2YgU2hhcmVkQXJyYXlCdWZmZXIpOwogICAgICAgIGlmICghIXdpbmRvdy5jaHJvbWUgJiYgISh0eXBlb2YgU2hhcmVkQXJyYXlCdWZmZXIgPT09ICdmdW5jdGlvbicpKSB7CiAgICAgICAgICAvLyBpZighKHR5cGVvZiBTaGFyZWRBcnJheUJ1ZmZlciA9PT0gJ2Z1bmN0aW9uJykpIHsKICAgICAgICAgIC8vIGlmIGRlc2t0b3AgQ2hyb21lIG9yIEVkZ2UgKENocm9taXVtKSB3aXRoIFNoYXJlZEFycmF5QnVmZmVyIG5vdCBlbmFibGVkCiAgICAgICAgICBjb25zb2xlLmxvZygnc2l0ZSBpcyBjaHJvbWUgYW5kIHcvbyBTaGFyZWRBcnJheUJ1ZmZlcicpOwogICAgICAgICAgY29uc29sZS5sb2coJ3RyeWluZyB0byBwdXQgdmlkZW8gb24gJywgY2FudmFzSGFuZGxlcik7CiAgICAgICAgICBzdHJlYW0uc3RhcnRWaWRlbyh7CiAgICAgICAgICAgIHZpZGVvRWxlbWVudDogY2FudmFzSGFuZGxlcgogICAgICAgICAgfSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIC8vIGFsbCBvdGhlciBicm93c2VycyBhbmQgZGVza3RvcCBDaHJvbWUgb3IgRWRnZSAoQ2hyb21pdW0pIHdpdGggU2hhcmVkQXJyYXlCdWZmZXIgZW5hYmxlZAoKICAgICAgICAgIGNvbnNvbGUubG9nKCdvdGhlciBicm93c2VycyBvciBjaHJvbWUgdy8gU2hhcmVkQXJyYXlCdWZmZXInKTsKICAgICAgICAgIGNvbnNvbGUubG9nKCd0cnlpbmcgdG8gcHV0IHZpZGVvIG9uICcsIGNhbnZhc0hhbmRsZXIpOwoKICAgICAgICAgIC8qCiAgICAgICAgICBzdHJlYW0uc3RhcnRWaWRlbygoKSA9PiB7CiAgICAgICAgICAgIHN0cmVhbS5yZW5kZXJWaWRlbyhjYW52YXNIYW5kbGVyLCBjbGllbnQuZ2V0Q3VycmVudFVzZXJJbmZvKCkudXNlcklkLCAzMDAsIDIwMCwgMCwgMCwgMyk7CiAgICAgICAgICB9KQogICAgICAgICAgKi8KICAgICAgICAgIHN0cmVhbS5zdGFydFZpZGVvKCkudGhlbigoKSA9PiB7CiAgICAgICAgICAgIHN0cmVhbS5yZW5kZXJWaWRlbyhjYW52YXNIYW5kbGVyLCBjbGllbnQuZ2V0Q3VycmVudFVzZXJJbmZvKCkudXNlcklkLCBjYW52YXNIYW5kbGVyLndpZHRoLCBjYW52YXNIYW5kbGVyLmhlaWdodCwgMCwgMCwgMykudGhlbigoKSA9PiB7CiAgICAgICAgICAgICAgY29uc29sZS5sb2coJ3N1Y2Nlc2Z1bGx5IHJlbmRlcmVkIHZpZGVvJyk7CiAgICAgICAgICAgIH0pLmNhdGNoKGUgPT4gewogICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdlcnJvciByZW5kZXIgdmlkZW8nLCBlKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgICAgY2FudmFzUmVuZGVySGFuZGxlLndpZHRoID0gY2FudmFzSGFuZGxlci53aWR0aDsKICAgICAgICBjYW52YXNSZW5kZXJIYW5kbGUuaGVpZ2h0ID0gY2FudmFzSGFuZGxlci5oZWlnaHQ7CiAgICAgIH0KICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCd0ZWFjaGVyQ3JlYXRlQXNzaWdubWVudC90b2dnbGVWaWRlbycpOwogICAgfSwKICAgIGFzeW5jIHRvZ2dsZVNoYXJlU2NyZWVuQnV0dG9uKGUpIHsKICAgICAgLyoKICAgICAgICBoYXZlIHRvIGZpZ3VyZSBvdXQgaG93IHRvIGRvIFBpUCB3aGVuIHN0YXJ0aW5nIGJvdGggdmlkZW8gYW5kIHNoYXJlIHNjcmVlbi4KICAgICAgICAtIHNlZSBpZiBpIGNhbiB1c2UgcmVuZGVyVmlkZW8gZm4gdG8gZG8gdGhpcy4KICAgICAgKi8KICAgICAgY29uc29sZS5sb2coJ3RvZ2dsZSBzaGFyZSBzY3JlZW4gYnV0dG9uIHByZXNzZWQnKTsKICAgICAgdmFyIHNjcmVlblNoYXJlU3RhdGUgPSB0aGlzLiRzdG9yZS5zdGF0ZS50ZWFjaGVyQ3JlYXRlQXNzaWdubWVudC5zdGF0ZXMuaXNTY3JlZW5TaGFyZTsKICAgICAgaWYgKHNjcmVlblNoYXJlU3RhdGUpIHsKICAgICAgICBjb25zb2xlLmxvZygndHVybmluZyBzY3JlZW4gc2hhcmUgb2ZmJyk7CiAgICAgICAgLy8gc2NyZWVuIHNoYXJlIGlzIG9uLCB0b2dnbGUgb2ZmCiAgICAgICAgc3RyZWFtLnN0b3BTaGFyZVNjcmVlbigpOwogICAgICAgIGNhbnZhc1JlbmRlckhhbmRsZUN0eC5jbGVhclJlY3QoMCwgMCwgY2FudmFzUmVuZGVySGFuZGxlLndpZHRoLCBjYW52YXNSZW5kZXJIYW5kbGUuaGVpZ2h0KTsKICAgICAgICB0aGlzLnN0YXR1cyA9ICdTY3JlZW4gc2hhcmUgdHVybmVkIG9mZic7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgLy8gc2NyZWVuIHNoYXJlIGlzIG9mZiwgdG9nZ2xlIG9uCiAgICAgICAgY29uc29sZS5sb2coJ3N0YXJ0aW5nIHNjcmVlbiBzaGFyZSBvbicsIHNjcmVlbkhhbmRsZXIpOwogICAgICAgIHN0cmVhbS5zdGFydFNoYXJlU2NyZWVuKHNjcmVlbkhhbmRsZXIpLnRoZW4oKCkgPT4gewogICAgICAgICAgY29uc29sZS5sb2coYHNldHRpbmcgdGhlIHJlbmRlciBzY3JlZW4gdG8gJHtzY3JlZW5IYW5kbGVyLndpZHRofSB4ICR7c2NyZWVuSGFuZGxlci5oZWlnaHR9YCk7CiAgICAgICAgICBpZiAoc2NyZWVuSGFuZGxlci53aWR0aCA9PSAwKSB7CiAgICAgICAgICAgIGNhbnZhc1JlbmRlckhhbmRsZS53aWR0aCA9IDEwMjQ7CiAgICAgICAgICAgIGNhbnZhc1JlbmRlckhhbmRsZS5oZWlnaHQgPSA4MDA7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBjYW52YXNSZW5kZXJIYW5kbGUud2lkdGggPSBzY3JlZW5IYW5kbGVyLndpZHRoOwogICAgICAgICAgICBjYW52YXNSZW5kZXJIYW5kbGUuaGVpZ2h0ID0gc2NyZWVuSGFuZGxlci5oZWlnaHQ7CiAgICAgICAgICB9CiAgICAgICAgfSkuY2F0Y2goZSA9PiB7CiAgICAgICAgICBjb25zb2xlLmxvZygnZXJyb3Igc2hhcmluZyBzY3JlZW4nLCBlKTsKICAgICAgICB9KTsKICAgICAgICB0aGlzLnN0YXR1cyA9ICdTY3JlZW4gc2hhcmUgdHVybmVkIG9uJzsKICAgICAgfQoKICAgICAgLy8gdXBkYXRlIHRoZSB0b2dnbGUgc3RhdGUKICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCd0ZWFjaGVyQ3JlYXRlQXNzaWdubWVudC90b2dnbGVTaGFyZVNjcmVlbicpOwogICAgfSwKICAgIGFzeW5jIHRvZ2dsZU1pY0J1dHRvbihlKSB7CiAgICAgIGNvbnNvbGUubG9nKCd0b2dnbGUgdGhlIG1pYycpOwogICAgICB2YXIgbWljU3RhdGUgPSB0aGlzLiRzdG9yZS5zdGF0ZS50ZWFjaGVyQ3JlYXRlQXNzaWdubWVudC5zdGF0ZXMuaXNNaWNPbjsKICAgICAgaWYgKG1pY1N0YXRlKSB7CiAgICAgICAgLy8gbWljIGlzIG9uLCB0dXJuIGl0IG9mZgogICAgICAgIHN0cmVhbS5zdG9wQXVkaW8oKTsKICAgICAgICBtaWNUcmFjay5nZXRBdWRpb1RyYWNrcygpWzBdLmVuYWJsZWQgPSBmYWxzZTsKICAgICAgICBjYW52YXNSZW5kZXJIYW5kbGVDdHguY2xlYXJSZWN0KDAsIDAsIGNhbnZhc1JlbmRlckhhbmRsZS53aWR0aCwgY2FudmFzUmVuZGVySGFuZGxlLmhlaWdodCk7CiAgICAgICAgdGhpcy5zdGF0dXMgPSAnTWljcm9waG9uZSBpcyB0dXJuZWQgb2ZmJzsKICAgICAgfSBlbHNlIHsKICAgICAgICAvLyBtaWMgaXMgb2ZmLCB0dXJuIGl0IG9uCiAgICAgICAgc3RyZWFtLnN0YXJ0QXVkaW8oKTsKICAgICAgICBtaWNUcmFjay5nZXRBdWRpb1RyYWNrcygpWzBdLmVuYWJsZWQgPSB0cnVlOwogICAgICAgIHRoaXMuc3RhdHVzID0gJ01pY3JvcGhvbmUgaXMgdHVybmVkIG9uJzsKICAgICAgfQoKICAgICAgLy8gdG9nZ2xlIHRoZSBtaWMgc3RhdGUKICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCd0ZWFjaGVyQ3JlYXRlQXNzaWdubWVudC90b2dnbGVNaWMnKTsKICAgIH0sCiAgICBhc3luYyBzdGFydFJlY29yZGluZygpIHsKICAgICAgY29uc29sZS5sb2coJ3N0YXJ0IHJlY29yZCcpOwogICAgICBtYy5zdGFydCgpOwogICAgICB0aGlzLiRzdG9yZS5jb21taXQoJ3RlYWNoZXJDcmVhdGVBc3NpZ25tZW50L3RvZ2dsZVJlY29yZGluZycpOwogICAgICB0aGlzLnN0YXR1cyA9ICdSZWNvcmRpbmcgc3RhcnRlZCc7CiAgICB9LAogICAgc3RvcFJlY29yZGluZygpIHsKICAgICAgY29uc29sZS5sb2coJ3N0b3AgcmVjb3JkJyk7CiAgICAgIG1jLnN0b3AoKTsKICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCd0ZWFjaGVyQ3JlYXRlQXNzaWdubWVudC90b2dnbGVSZWNvcmRpbmcnKTsKICAgICAgdGhpcy5zdGF0dXMgPSAnUmVjb3JkaW5nIHN0b3BwZWQnOwogICAgfQogIH0sCiAgY29tcG9uZW50czogewogICAgQ3JvcEljb24sCiAgICBQZW5JY29uLAogICAgQ2FtZXJhSWNvbiwKICAgIFRyYXNoSWNvbiwKICAgIEljb25CYXNlVHdvLAogICAgVnVlQ3JvcHBlciwKICAgIFBob25lSWNvbiwKICAgIFBsdXNJY29uLAogICAgQXJyb3dSaWdodEljb24sCiAgICBab29tSWNvbiwKICAgIE1pY3JvcGhvbmVJY29uLAogICAgTWljcm9waG9uZVNsYXNoSWNvbiwKICAgIFN0b3BJY29uLAogICAgQ2lyY2xlSWNvbiwKICAgIFBlcnNvblRvRG9vckljb24sCiAgICBEaXNwbGF5SWNvbiwKICAgIERpc3BsYXlTbGFzaEljb24sCiAgICBWaWRlb0ljb24sCiAgICBWaWRlb1NsYXNoSWNvbgogIH0KfTs="},{"version":3,"names":["IconBaseTwo","TrashIcon","CameraIcon","PenIcon","CropIcon","PhoneIcon","PlusIcon","ArrowRightIcon","ZoomIcon","MicrophoneIcon","MicrophoneSlashIcon","StopIcon","CircleIcon","PersonToDoorIcon","DisplayIcon","DisplaySlashIcon","VideoIcon","VideoSlashIcon","VueCropper","ZoomVideo","KJUR","genRanHex","size","Array","map","Math","floor","random","toString","join","stream","client","createClient","canvasHandler","screenHandler","audioCanvas","audioCanvasCtx","mcstream","mc","mcMimeType","window","safari","ms","micTrack","chunks","safariAudioDecode","safariAudioEncode","sessionTopic","sessionPassword","canvasRenderHandle","canvasRenderHandleStream","canvasRenderHandleCtx","name","data","status","updated","console","log","VERSION","canvasCheck","document","querySelector","videoCheck","getContext","captureStream","theView","SharedArrayBuffer","createElement","id","height","width","className","textContent","appendChild","theScreen","chrome","onplay","audioContext","AudioContext","navigator","mediaDevices","getUserMedia","audio","getAudioTracks","enabled","addTrack","source","createMediaStreamSource","analyser","createAnalyser","fftSize","bufferLength","frequencyBinCount","dataArray","Uint8Array","getByteTimeDomainData","connect","draw","requestAnimationFrame","fillStyle","fillRect","lineWidth","strokeStyle","beginPath","sliceWidth","x","i","v","y","moveTo","lineTo","stroke","drawComposite","micOn","$store","state","teacherCreateAssignment","states","isMicOn","videoOn","isVideoOn","screenShareOn","isScreenShare","drawImage","fillText","setInterval","MediaRecorder","type","onstart","onstop","e","blob","Blob","url","URL","createObjectURL","videoTag","autoplay","controls","src","dispatch","ondataavailable","push","stop","methods","createZoomMeeting","init","iat","round","Date","getTime","exp","oHeader","alg","typ","oPayload","app_key","process","env","VUE_APP_ZOOM_VIDEO_SDK_KEY","tpc","version","role_type","pwd","sHeader","JSON","stringify","sPayload","signature","jws","JWS","sign","VUE_APP_ZOOM_VIDEO_SDK_SECRET","authUser","email","then","res","getMediaStream","catch","error","on","payload","result","action","undefined","startAudio","autoStartAudioInSafari","commit","toggleShareScreenButton","leaveZoomMeeting","toggleVideoButton","toggleMicButton","isRecording","stopRecording","leave","videoState","stopVideo","clearRect","startVideo","videoElement","renderVideo","getCurrentUserInfo","userId","screenShareState","stopShareScreen","startShareScreen","micState","stopAudio","startRecording","start","components"],"sources":["src/components/ZoomQuestionForm.vue"],"sourcesContent":["<template>\n  <div>\n    <!-- FORM: Zoom Question -->\n    <div v-if=\"$store.state.teacherCreateAssignment.states.isCreatingZoomQuestion\">\n      <p>Works best in Google Chrome. Some features may not be available in other browsers.</p>\n\n      <!-- Join / leave meeting -->\n      <div class=\"flex -mx-1 mb-4\" >\n        <div class=\"px-1 w-1/2 h-28\">\n          <button @click=\"createZoomMeeting\"\n            class=\"mt-2 w-full text-lg font-normal leading-tight rounded-md border border-none appearance-none bg-gray-secondary text-purple-secondary focus:outline-none focus:shadow-outline\"\n          >\n            <div class=\"flex col-span-1 row-span-1 justify-center py-4\">\n              <icon-base-two class=\"w-12\">\n                <phone-icon class=\"w-12\"/>\n              </icon-base-two>\n            </div>\n            <div class=\"flex col-span-1 row-span-2 justify-center py-2\">\n              Join\n            </div>\n          </button>\n        </div>\n        <div class=\"px-1 w-1/2 h-28\">\n          <button @click=\"leaveZoomMeeting\"\n                  class=\"mt-2 w-full text-lg font-normal leading-tight rounded-md border border-none appearance-none bg-gray-secondary text-purple-secondary focus:outline-none focus:shadow-outline\"\n          >\n            <div class=\"flex col-span-1 row-span-1 justify-center py-4\">\n              <icon-base-two class=\"w-12\">\n                <person-to-door-icon class=\"w-12\"/>\n              </icon-base-two>\n            </div>\n            <div class=\"flex col-span-1 row-span-2 justify-center py-2\">\n              Leave\n            </div>\n          </button>\n        </div>\n      </div>\n\n      <!-- Status Bar -->\n      <div class=\"flex -mx-1 mb-4\" >\n        <div class=\"py-2 mt-2 w-full text-lg font-normal leading-tight rounded-md border border-none appearance-none bg-gray-secondary text-purple-secondary focus:outline-none focus:shadow-outline\">\n          Status: {{ status }}\n        </div>\n\n      </div>\n\n      <!-- video canvas -->\n      <p>Video panel</p>\n      <div class=\"flex -mx-1 mb-4\" >\n        <div id=\"the-view\" class=\"px-1 w-full\">\n        </div>\n      </div>\n\n      <p>Audio Waveform</p>\n      <div class=\"flex -mx-1 mb-4\">\n        <canvas id=\"the-audio\" class=\"px-1 w-full border-2 border-solid\"> </canvas>\n      </div>\n\n      <!-- screen share  video test -->\n      <p>Screen Share Panel</p>\n      <div class=\"flex -mx-1 mb-4\">\n        <div id=\"the-screen\" class=\"px-1 w-full\">\n        </div>\n      </div>\n\n      <!-- final render test -->\n      <p>Final render test</p>\n      <div class=\"flex -mx-1 mb-4\">\n        <canvas width=\"300\" height=\"150\" id=\"canvas-render\" class=\"border-2 border-black h-auto h-20 w-full md:w-screen max-w-xl \"></canvas>\n      </div>\n\n      <!-- camera and mic controls -->\n      <div class=\"flex -mx-1 mb-4\" >\n        <div class=\"px-1 w-1/3 h-28\">\n          <button @click=\"toggleVideoButton\"\n            id=\"video-button\"\n            class=\"mt-2 w-full text-lg font-normal leading-tight rounded-md border border-none appearance-none bg-gray-secondary text-purple-secondary focus:outline-none focus:shadow-outline\"\n            :disabled=\"!$store.getters['teacherCreateAssignment/hasZoomMeeting']\"\n          >\n            <div class=\"flex col-span-1 row-span-1 justify-center py-4\">\n              <icon-base-two class=\"w-12\">\n                <video-icon v-if=\"$store.state.teacherCreateAssignment.states.isVideoOn\" class=\"w-12\" />\n                <video-slash-icon v-else class=\"w-12\" />\n              </icon-base-two>\n            </div>\n            <div class=\"flex col-span-1 row-span-2 justify-center py-2\">\n              Camera\n            </div>\n          </button>\n        </div>\n        <div class=\"px-1 w-1/3 h-28\">\n          <button @click=\"toggleMicButton\"\n            id=\"mic-button\"\n            class=\"mt-2 w-full text-lg font-normal leading-tight rounded-md border border-none appearance-none bg-gray-secondary text-purple-secondary focus:outline-none focus:shadow-outline\"\n            :disabled=\"!$store.getters['teacherCreateAssignment/hasZoomMeeting']\"\n          >\n            <div class=\"flex col-span-1 row-span-1 justify-center py-4\">\n              <icon-base-two class=\"w-12\">\n                <microphone-icon v-if=\"$store.state.teacherCreateAssignment.states.isMicOn\" class=\"w-12\"/>\n                <microphone-slash-icon v-else class=\"w-12\"/>\n              </icon-base-two>\n            </div>\n            <div class=\"flex col-span-1 row-span-2 justify-center py-2\">\n              Microphone \n            </div>\n          </button>\n        </div>\n        <div class=\"px-1 w-1/3 h-28\">\n          <button @click=\"toggleShareScreenButton\"\n            id=\"screen-button\"\n            class=\"mt-2 w-full text-lg font-normal leading-tight rounded-md border border-none appearance-none bg-gray-secondary text-purple-secondary focus:outline-none focus:shadow-outline\"\n            :disabled=\"!$store.getters['teacherCreateAssignment/hasZoomMeeting']\"\n          >\n            <div class=\"flex col-span-1 row-span-1 justify-center py-4\">\n              <icon-base-two class=\"w-12\">\n                <display-icon v-if=\"$store.state.teacherCreateAssignment.states.isScreenShare\" class=\"w-12\" />\n                <display-slash-icon v-else class=\"w-12\"/>\n              </icon-base-two>\n            </div>\n            <div class=\"flex col-span-1 row-span-2 justify-center py-2\">\n              Screen\n            </div>\n          </button>\n        </div>\n      </div>\n\n      <!-- recording controls -->\n      <div class=\"flex -mx-1 mb-4\" >\n        <div class=\"px-1 w-1/2 h-28\">\n          <button @click=\"startRecording\"\n            class=\"mt-2 w-full text-lg font-normal leading-tight rounded-md border border-none appearance-none bg-gray-secondary text-purple-secondary focus:outline-none focus:shadow-outline\"\n            :disabled=\"!$store.getters['teacherCreateAssignment/hasZoomMeeting'] || $store.getters['teacherCreateAssignment/hasZoomRecording']\"\n          >\n            <div class=\"flex col-span-1 row-span-1 justify-center py-4\" :class=\"{ 'text-red-500': $store.getters['teacherCreateAssignment/hasZoomRecording'] }\">\n              <icon-base-two class=\"w-12\">\n                <circle-icon class=\"w-12\"/>\n              </icon-base-two>\n            </div>\n            <div class=\"flex col-span-1 row-span-2 justify-center py-2\">\n              Rec Start\n            </div>\n          </button>\n        </div>\n        <div class=\"px-1 w-1/2 h-28\">\n          <button @click=\"stopRecording\"\n            class=\"mt-2 w-full text-lg font-normal leading-tight rounded-md border border-none appearance-none bg-gray-secondary text-purple-secondary focus:outline-none focus:shadow-outline\"\n            :disabled=\"!$store.getters['teacherCreateAssignment/hasZoomMeeting'] || !$store.getters['teacherCreateAssignment/hasZoomRecording']\"\n          >\n            <div class=\"flex col-span-1 row-span-1 justify-center py-4\">\n              <icon-base-two class=\"w-12\">\n                <stop-icon class=\"w-12\"/>\n              </icon-base-two>\n            </div>\n            <div class=\"flex col-span-1 row-span-2 justify-center py-2\">\n              Rec Stop\n            </div>\n          </button>\n        </div>\n      </div>\n\n\n      <!-- recording gallery-->\n      <div class=\"flex -mx-1 mb-4\" >\n        <p>recording gallery here</p>\n      </div>\n      <div id=\"video-preview-gallery\" class=\"flex -mx-1 mb-4\" >\n        <div v-if=\"$store.state.teacherCreateAssignment.creatingQuestionDetails.zoomMeetings\">\n          <video\n            width=\"854\" height=\"480\"\n            controls=\"\" :src=\"$store.state.teacherCreateAssignment.creatingQuestionDetails.zoomMeetings\">\n          </video>\n        </div>\n      </div>\n\n      <div class=\"flex -mx-1 mb-4\" >\n        <p>A session by {{ $store.state.authUser.fullname }} ({{ $store.state.authUser.email }}). Session topic: {{ sessionTopic }} / session pasword: {{ sessionPassword }}</p>\n      </div>\n\n    </div>\n  </div>\n</template>\n\n<script>\nimport IconBaseTwo from \"@/components/IconBaseTwo\";\nimport TrashIcon from \"@/components/icons/TrashIcon\";\nimport CameraIcon from \"@/components/icons/CameraIcon\";\nimport PenIcon from \"@/components/icons/PenIcon\";\nimport CropIcon from \"@/components/icons/CropIcon\";\nimport PhoneIcon from \"@/components/icons/PhoneIcon\";\nimport PlusIcon from \"@/components/icons/PlusIcon\";\nimport ArrowRightIcon from \"@/components/icons/ArrowRightIcon\";\nimport ZoomIcon from \"@/components/icons/ZoomIcon\";\nimport MicrophoneIcon from \"@/components/icons/MicrophoneIcon\";\nimport MicrophoneSlashIcon from \"@/components/icons/MicrophoneSlashIcon\";\nimport StopIcon from \"@/components/icons/StopIcon\";\nimport CircleIcon from \"@/components/icons/CircleIcon\";\nimport PersonToDoorIcon from \"@/components/icons/PersonToDoorIcon\";\nimport DisplayIcon from \"@/components/icons/DisplayIcon\";\nimport DisplaySlashIcon from \"@/components/icons/DisplaySlashIcon\";\nimport VideoIcon from \"@/components/icons/VideoIcon\";\nimport VideoSlashIcon from \"@/components/icons/VideoSlashIcon\";\nimport VueCropper from 'vue-cropperjs';\nimport 'cropperjs/dist/cropper.css';\nimport ZoomVideo from '@zoom/videosdk';\nimport KJUR from 'jsrsasign';\n\nconst genRanHex = size => [...Array(size)].map(() => Math.floor(Math.random() * 16).toString(16)).join('');\nlet stream; // zoom stream\nconst client = ZoomVideo.createClient(); // zoom client\n\nlet canvasHandler = null; // canvas / video tag to be loaded to show video cam\nlet screenHandler = null; // canvas / video tag to show screen share\nlet audioCanvas = null;\nlet audioCanvasCtx = null;\n\nlet mcstream = null; // canvas stream\nlet mc = null; // local media record to record zoom stream (theorically)\nlet mcMimeType = !!window.safari ? \"video/mp4\" : \"video/webm\";\nlet ms = null; // local media stream representing the canvas/video\nlet micTrack = null; // local media stream representing user's mic\nlet chunks = [];\nlet safariAudioDecode;\nlet safariAudioEncode;\nlet sessionTopic = genRanHex(6);\nlet sessionPassword = genRanHex(6);\n\n// final rending place\nlet canvasRenderHandle = null;\nlet canvasRenderHandleStream = null;\nlet canvasRenderHandleCtx = null; \n\n/*\n  some issues / features\n  1. picture-in-picture when starting zoom & share screen\n  2. mic feedback problem on chrome\n    - problem when starting recording\n  3. scope display when recording only sound\n  4. media recorder state, something get lost after a recording session.\n\n  // new plan: rebuilding the mediarecorder and zoom controls\n  1. mediarecorder needs streams \n  2. tie video/canvas tag to stream, record anything on that\n  3. tie mic as a new stream, record anything on that. (find if can resolve the feedback problem)\n*/\n\nexport default {\n  name: \"ZoomQuestionForm\",\n  data () {\n    return { status: 'Ready', sessionTopic, sessionPassword };\n  }, \n  async updated() { \n    // called everytime the form gets updated. wanted to do mounted, but that will only called once.\n\n    console.log('ZoomQuestionForm updated');\n    console.log(`Using Zoom VIDEO SDK version ${ZoomVideo.VERSION}`);\n\n    /*\n      plan: \n      - check if canvas is there; if not there:\n      - to add canvas(es) or video tag based on browser\n      - setup audio waveform draw fn\n      - setup composite draw fn\n      - setup media recorder to record the composite canvas / mic\n    */\n\n    // if there already there, skip checking\n    let canvasCheck = document.querySelector('#self-view-canvas');\n    let videoCheck = document.querySelector('#self-view-video');\n\n\n    // check if canvas is already there, if already there, skip the rest of the step \n    if(canvasCheck !== null || videoCheck !== null){\n      return;\n    }\n\n    // ---- SETUP THE CANVAS / MEDIA RECORDER IF IT'S NOT THERE ----\n\n    // setup the composite canvas , which will be later use for recording.\n    canvasRenderHandle = document.querySelector('#canvas-render');\n    canvasRenderHandleCtx = canvasRenderHandle.getContext('2d');\n    canvasRenderHandleStream = canvasRenderHandle.captureStream();\n\n    // add video / canvas tag based on browser and there's shared array buffer disabled\n    let theView = document.querySelector('#the-view')\n    //if(!!window.chrome && !(typeof SharedArrayBuffer === 'function')){\n    /*\n    if(navigator.userAgent.toLowerCase().indexOf('firefox') > -1){\n      // debug: trying to force firefox to use canvas\n      canvasHandler = document.createElement('canvas');\n      canvasHandler.id='self-view-canvas';\n    } else if(typeof SharedArrayBuffer === 'function'){\n    */\n    if(typeof SharedArrayBuffer === 'function'){\n      // have shared array buffer enabled\n      canvasHandler = document.createElement('canvas');\n      canvasHandler.id='self-view-canvas';\n    } else {\n      // doesn't have shared array buffer enable (like chrome)\n      canvasHandler = document.createElement('video');\n      canvasHandler.id='self-view-video';\n    }\n    canvasHandler.height='325';\n    canvasHandler.width='576';\n    canvasHandler.className='border-2 border-black h-auto h-20 w-full md:w-screen max-w-xl';\n    theView.textContent = '';\n    theView.appendChild(canvasHandler);\n\n    // add video / canvas tag for the screen share based on browser\n    let theScreen = document.querySelector('#the-screen');\n    if(!!window.chrome){\n      screenHandler = document.createElement('video');\n      screenHandler.id = 'screen-share-video';\n    } else {\n      screenHandler = document.createElement('canvas');\n      screenHandler.id = 'screen-share-canvas';\n      screenHandler.onplay = () => {\n        console.log('screen share detected');\n      }\n    }\n    screenHandler.className='border-2 border-black h-auto h-20 w-full md:w-screen max-w-xl';\n    theScreen.appendChild(screenHandler);\n\n    // test: capture everything from share screen video / canvas\n    // canvasRenderHandleStream = screenHandler.captureStream();\n\n    // capture the mic, and put it in a audioContext, so we can analyse and draw\n    // also, put the stream in the final render stream, so can record things. \n    const audioContext = new AudioContext();\n    micTrack = await navigator.mediaDevices.getUserMedia({ audio: true });\n    micTrack.getAudioTracks()[0].enabled = false;\n    canvasRenderHandleStream.addTrack(micTrack.getAudioTracks()[0]);\n\n    const source = audioContext.createMediaStreamSource(micTrack)\n    const analyser = audioContext.createAnalyser();\n    analyser.fftSize = 2048;\n\n    const bufferLength = analyser.frequencyBinCount;\n    const dataArray = new Uint8Array(bufferLength);\n    analyser.getByteTimeDomainData(dataArray);\n\n    // Connect the source to be analysed\n    source.connect(analyser);\n\n    // canvas to draw the sound\n    audioCanvas = document.querySelector('#the-audio');\n    audioCanvasCtx = audioCanvas.getContext('2d');\n\n    // debug, check audio Context\n    // console.log('audioContext', audioContext);\n\n    // draw the waveform\n    function draw() {\n      requestAnimationFrame(draw);\n\n      analyser.getByteTimeDomainData(dataArray);\n\n      audioCanvasCtx.fillStyle = \"rgb(200, 200, 200)\";\n      audioCanvasCtx.fillRect(0, 0, audioCanvas.width, audioCanvas.height);\n\n      audioCanvasCtx.lineWidth = 2;\n      audioCanvasCtx.strokeStyle = \"rgb(0, 0, 0)\";\n\n      audioCanvasCtx.beginPath();\n\n      const sliceWidth = (audioCanvas.width * 1.0) / bufferLength;\n      let x = 0;\n\n      for (let i = 0; i < bufferLength; i++) {\n        const v = dataArray[i] / 128.0;\n        const y = (v * audioCanvas.height) / 2;\n\n        if (i === 0) {\n          audioCanvasCtx.moveTo(x, y);\n        } else {\n          audioCanvasCtx.lineTo(x, y);\n        }\n\n        x += sliceWidth;\n      }\n\n      audioCanvasCtx.lineTo(audioCanvas.width, audioCanvas.height / 2);\n      audioCanvasCtx.stroke();\n    }\n    draw();\n\n    // draw composite based on source canvas/video\n    let drawComposite = () => {\n      //requestAnimationFrame(drawComposite);\n\n      let micOn = this.$store.state.teacherCreateAssignment.states.isMicOn;\n      let videoOn = this.$store.state.teacherCreateAssignment.states.isVideoOn;\n      let screenShareOn = this.$store.state.teacherCreateAssignment.states.isScreenShare;\n\n      // clear the picture first\n      //canvasRenderHandleCtx.clearRect(0,0, canvasRenderHandle.width, canvasRenderHandle.height);\n\n      if (videoOn && !screenShareOn) {\n        // camera on, but not screen share\n        canvasRenderHandleCtx.drawImage(canvasHandler, 0,0, \n          canvasRenderHandle.width, canvasRenderHandle.height);\n      } else if (!videoOn && screenShareOn) {\n        // camera off, but screen is shared\n        // need to figure out a way that doesn't produced clipping when recording\n        // canvasRenderHandleCtx.drawImage(screenHandler, 0,0 , canvasRenderHandle.width, canvasRenderHandle.height)\n        //canvasRenderHandleCtx.drawImage(screenHandler, 0, 0);\n        canvasRenderHandleCtx.drawImage(screenHandler, 0,0 ,\n          canvasRenderHandle.width, canvasRenderHandle.height);\n      } else if (videoOn && screenShareOn) {\n        // both video and screen share is on, do PiP\n        // canvasRenderHandleCtx.clearRect(0,0, canvasRenderHandle.width, canvasRenderHandle.height);\n        canvasRenderHandleCtx.drawImage(screenHandler, 0,0 ,\n          canvasRenderHandle.width, canvasRenderHandle.height);\n        canvasRenderHandleCtx.drawImage(canvasHandler, \n          0,0, canvasHandler.width, canvasHandler.height,\n          canvasRenderHandle.width*3/4, canvasRenderHandle.height*3/4,\n          canvasRenderHandle.width/4, canvasRenderHandle.height/4\n        );\n      } else if (micOn && !videoOn && !screenShareOn) {\n        // only the mic is on\n        canvasRenderHandleCtx.drawImage(audioCanvas, \n          0,0, canvasRenderHandle.width, canvasRenderHandle.height\n        );\n      } else {\n        // default, no input\n        canvasRenderHandleCtx.fillText(\"NO INPUT\", canvasRenderHandle.width/2, canvasRenderHandle.height/2);\n      }\n    }; \n    // drawComposite();\n    // redraw the composite canvas 60 times / second. would like to use requestAnimationFrame, \n    // but it pauses if the browser is off focus. \n    setInterval(drawComposite, 1000/60);\n\n    // start building the media recorder\n    // capture what's going on in the render canvas and the mic\n    mc = new MediaRecorder(canvasRenderHandleStream, { type: mcMimeType });\n    mc.onstart = () => {\n      // start recording\n      console.log('mc onstart');\n    }\n    mc.onstop = (e) => {\n      console.log('mc onstop');\n\n      //collect all data and dump it\n      //const blob = new Blob(chunks, {type: 'video/webm'});\n      // each browser has different idea what mimeType is supported. so safari: video/mp4, firefox & chrome: video/webm\n      const blob = new Blob(chunks, { type: mcMimeType });\n      chunks = [];\n\n      //put the blob in a video gallery\n      console.log('pushing new blob with memeType', mcMimeType );\n      var url = URL.createObjectURL(blob);\n      // console.log('url', url);\n      var videoTag = document.createElement('video');\n      videoTag.autoplay = true;\n      videoTag.controls = true;\n      videoTag.height = 480;\n      videoTag.width = 854;\n      videoTag.src = url;\n\n      //always replace what's ever in the preview gallery\n      document.querySelector('#video-preview-gallery').textContent = '';\n      document.querySelector('#video-preview-gallery').appendChild(videoTag);\n\n\n      //trigger to push video content to questionDetails.zoomMeetings\n      this.$store.dispatch('teacherCreateAssignment/handleZoomQuestion', url);\n      // URL.revokeObjectURL(url);\n\n      // for debug, video content for debugging\n      // console.log('record url dump', url);\n    }\n    mc.ondataavailable = (e) => {\n      // move data from buffer to array\n      console.log('mc ondataavailable');\n\n      //pump data in the chunks array.\n      chunks.push(e.data);\n\n      // after stop `dataavilable` event run one more time\n      if (mc.state === 'recording') {\n          mc.stop();\n      }\n      this.status = \"Recording. Pushing data to cache ...\";\n    }\n\n  },\n  methods: {\n    async createZoomMeeting(e) {\n      //happens when create a zoom meeting clicked\n\n      console.log('create a zoom meeting');\n      this.status = \"Joining meeting ...\"\n      client.init('en-US', 'CDN');\n\n      //create session\n      // 1. generate jwt\n\n      //console.log('generate jwt');\n      const iat = Math.round((new Date().getTime() - 30000) / 1000)\n      const exp = iat + 60 * 60 * 2\n\n      const oHeader = { alg: 'HS256', typ: 'JWT' }\n\n      const oPayload = {\n        app_key: process.env.VUE_APP_ZOOM_VIDEO_SDK_KEY,\n        tpc: sessionTopic,\n        version: 1,\n        role_type: 1,\n        iat: iat,\n        exp: exp,\n        pwd: sessionPassword,\n      }\n\n      const sHeader = JSON.stringify(oHeader)\n      const sPayload = JSON.stringify(oPayload)\n      const signature = KJUR.jws.JWS.sign('HS256', sHeader, sPayload, process.env.VUE_APP_ZOOM_VIDEO_SDK_SECRET);\n      //console.log('signature:', signature);\n\n      // 2. actually create the session\n      console.log('create a zoom session');\n      // await client.join('session', signature, 'erwinkarim@gmail.com', 'password').then((res) => {\n      await client.join(sessionTopic, signature, this.$store.state.authUser.email, sessionPassword).then((res) => {\n        stream = client.getMediaStream();\n        console.log('res', res);\n        this.status = `Join successful. Session ID: ${sessionTopic}, Password: ${sessionPassword}`;\n\n        /*\n        console.log('stream', stream);\n        console.log('client', client);\n        console.log('sessionInfo', client.getSessionInfo());\n        console.log('clientinfo', client.getCurrentUserInfo().userId);\n        */\n      }).catch((error) => {\n        this.status = \"Join Failed. Check if ad-blocker is active.\";\n        console.log('join failed; check connection or ad-blocks');\n        console.log(error)\n      })\n\n      // event listener to see when desktop Safari audio has been initialized\n      client.on('media-sdk-change', (payload) => {\n        if (payload.type === 'audio' && payload.result === 'success') {\n          if (payload.action === 'encode') {\n            // encode for sending audio stream (speak)\n            safariAudioEncode = true\n          } else if (payload.action === 'decode') {\n            // decode for receiving audio stream (hear)\n            safariAudioDecode = true\n          }\n        };\n\n        if(window.safari !== undefined) {\n          // desktop Safari, check if desktop Safari audio has been initialized\n          if (safariAudioEncode && safariAudioDecode) {\n            // desktop Safari audio has been initialized\n            try {\n              // try to start audio automatically in Safari\n              stream.startAudio({ autoStartAudioInSafari: true })\n            } catch (error) {\n              // starting audio automatically in Safari failed, retry or handle error\n              console.log(error)\n            }\n          } else {\n            // desktop Safari audio has not been initialized, retry or handle error\n            console.log('safari audio has not finished initializing')\n          }\n        };\n      })\n\n      console.log('join success');\n      this.$store.commit('teacherCreateAssignment/toggleIsInZoomMeeting');\n\n      // detect 'stop sharing' controlled by the browser\n      client.on('passively-stop-share', (payload) => {\n        console.log('detected screen share is off', payload);\n        this.toggleShareScreenButton();\n      });\n\n    },\n    leaveZoomMeeting(e) {\n      // switch off camera, mic, screen share and recording if they are on\n      if(this.$store.state.teacherCreateAssignment.states.isVideoOn){\n          this.toggleVideoButton();\n      }\n      if(this.$store.state.teacherCreateAssignment.states.isMicOn){\n        this.toggleMicButton();\n      }\n      if(this.$store.state.teacherCreateAssignment.states.isScreenShare){\n        this.toggleShareScreenButton();\n      }\n      if(this.$store.state.teacherCreateAssignment.states.isRecording){\n        this.stopRecording();\n      }\n\n      // leave zoom meeting\n      client.leave(true);\n\n      console.log('leave success');\n      this.status = \"Left the meeting.\";\n      this.$store.commit('teacherCreateAssignment/toggleIsInZoomMeeting');\n    },\n    async toggleVideoButton() {\n      var videoState = this.$store.state.teacherCreateAssignment.states.isVideoOn;\n\n      if (videoState){\n        // video is on, stop video\n        this.status = 'Camera turned off';\n        stream.stopVideo();\n        canvasRenderHandleCtx.clearRect(0,0, canvasRenderHandle.width, canvasRenderHandle.height);\n      } else {\n        // video is off, start video\n        this.status = 'Camera turned on';\n\n        console.log('checking SharedArrayBuffer', typeof SharedArrayBuffer);\n        if(!!window.chrome && !(typeof SharedArrayBuffer === 'function')) {\n        // if(!(typeof SharedArrayBuffer === 'function')) {\n          // if desktop Chrome or Edge (Chromium) with SharedArrayBuffer not enabled\n          console.log('site is chrome and w/o SharedArrayBuffer');\n          console.log('trying to put video on ', canvasHandler);\n\n          stream.startVideo({ videoElement: canvasHandler });\n\n        } else {\n          // all other browsers and desktop Chrome or Edge (Chromium) with SharedArrayBuffer enabled\n\n          console.log('other browsers or chrome w/ SharedArrayBuffer')\n          console.log('trying to put video on ', canvasHandler);\n\n          /*\n          stream.startVideo(() => {\n            stream.renderVideo(canvasHandler, client.getCurrentUserInfo().userId, 300, 200, 0, 0, 3);\n          })\n          */\n         stream.startVideo().then(() => {\n          stream.renderVideo(canvasHandler, client.getCurrentUserInfo().userId,\n            canvasHandler.width, canvasHandler.height, 0, 0, 3\n          ).then(() => {\n            console.log('succesfully rendered video');\n          }).catch((e) => {\n            console.log('error render video', e);\n          });\n         })\n        }\n\n        canvasRenderHandle.width = canvasHandler.width;\n        canvasRenderHandle.height = canvasHandler.height;\n      }\n      this.$store.commit('teacherCreateAssignment/toggleVideo');\n    },\n    async toggleShareScreenButton(e) {\n      /*\n        have to figure out how to do PiP when starting both video and share screen.\n        - see if i can use renderVideo fn to do this.\n      */\n      console.log('toggle share screen button pressed');\n\n      var screenShareState = this.$store.state.teacherCreateAssignment.states.isScreenShare;\n\n      if (screenShareState) {\n        console.log('turning screen share off');\n        // screen share is on, toggle off\n        stream.stopShareScreen();\n        canvasRenderHandleCtx.clearRect(0,0, canvasRenderHandle.width, canvasRenderHandle.height);\n        this.status = 'Screen share turned off';\n      } else {\n        // screen share is off, toggle on\n        console.log('starting screen share on', screenHandler);\n        stream.startShareScreen(screenHandler).then(() => {\n          console.log(`setting the render screen to ${screenHandler.width} x ${screenHandler.height}`)\n          if(screenHandler.width == 0) {\n            canvasRenderHandle.width=1024;\n            canvasRenderHandle.height=800;\n\n          } else {\n            canvasRenderHandle.width = screenHandler.width;\n            canvasRenderHandle.height = screenHandler.height;\n          }\n        }).catch((e) => {\n          console.log('error sharing screen', e);\n        });\n        this.status = 'Screen share turned on';\n\n      }\n\n      // update the toggle state\n      this.$store.commit('teacherCreateAssignment/toggleShareScreen');\n\n    },\n    async toggleMicButton(e){\n      console.log('toggle the mic');\n\n      var micState = this.$store.state.teacherCreateAssignment.states.isMicOn;\n\n      if (micState) {\n        // mic is on, turn it off\n        stream.stopAudio();\n        micTrack.getAudioTracks()[0].enabled = false;\n        canvasRenderHandleCtx.clearRect(0,0, canvasRenderHandle.width, canvasRenderHandle.height);\n        this.status = 'Microphone is turned off';\n      } else {\n        // mic is off, turn it on\n        stream.startAudio();\n        micTrack.getAudioTracks()[0].enabled = true;\n        this.status = 'Microphone is turned on';\n      }\n\n      // toggle the mic state\n      this.$store.commit('teacherCreateAssignment/toggleMic');\n    },\n    async startRecording(){\n      console.log('start record');\n\n      mc.start();\n\n      this.$store.commit('teacherCreateAssignment/toggleRecording');\n      this.status = 'Recording started';\n    },\n    stopRecording(){\n      console.log('stop record');\n\n      mc.stop();\n\n      this.$store.commit('teacherCreateAssignment/toggleRecording');\n      this.status = 'Recording stopped';\n    },\n  },\n  components: {\n    CropIcon, PenIcon, CameraIcon, TrashIcon, IconBaseTwo,\n    VueCropper, PhoneIcon, PlusIcon, ArrowRightIcon, ZoomIcon,\n    MicrophoneIcon, MicrophoneSlashIcon, StopIcon, CircleIcon, PersonToDoorIcon, \n    DisplayIcon, DisplaySlashIcon, VideoIcon, VideoSlashIcon,\n  },\n\n};\n\n</script>\n\n<style scoped>\n\n</style>\n"],"mappings":"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"}]}