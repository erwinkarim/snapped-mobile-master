{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport DashboardLayout from \"@/views/layout/DashboardLayout\";\nimport PageTitle from \"@/components/PageTitle\";\nimport SectionTitle from \"@/components/SectionTitle\";\nimport AuthenticationRepository from \"@/repositories/AuthenticationRepository\";\nimport PageHeaderThree from \"@/components/PageHeaderThree\";\nimport NavBack from \"@/components/NavBack\";\nexport default {\n  name: \"Edit\",\n  data() {\n    return {\n      form: {},\n      states: {\n        isSubmitting: false\n      },\n      changePassword: {\n        old: null,\n        new: null,\n        new_confirmation: null\n      },\n      success: null,\n      errors: []\n    };\n  },\n  computed: {\n    validForm() {\n      return this.errors.length === 0;\n    },\n    navBackRoute() {\n      let routeName = '';\n      if (this.$store.getters.getAuthUserRole === 'Teacher') {\n        routeName = 'teacher.settings';\n      }\n      if (this.$store.getters.getAuthUserRole === 'Student') {\n        routeName = 'student.settings';\n      }\n    }\n  },\n  methods: {\n    validateForm() {\n      // determine if user is updating password\n      let isUpdatingPassword = this.changePassword.old !== null || this.changePassword.new !== '' || this.changePassword.new !== null || this.changePassword.new !== '' || this.changePassword.new_confirmation !== null || this.changePassword.new_confirmation !== '';\n\n      // If user is updating password, check if user left any password inputs null or empty string\n      if (isUpdatingPassword) {\n        if (!this.changePassword.old) this.errors.push('Please enter current password.');\n        if (!this.changePassword.new) this.errors.push('Please enter new password.');\n        if (!this.changePassword.new_confirmation) this.errors.push('Please confirm new password.');\n      }\n    },\n    submit() {\n      this.resetSuccessErrorBar();\n      this.validateForm();\n      let payload = {\n        old_password: this.changePassword.old,\n        password: this.changePassword.new,\n        password_confirmation: this.changePassword.new_confirmation\n      };\n      if (this.validForm && !this.isSubmitting) {\n        this.states.isSubmitting = true;\n        AuthenticationRepository.updateUserDetails(payload).then(response => {\n          this.states.isSubmitting = false;\n          if (response.data.success) {\n            this.success = response.data.message;\n          } else {\n            this.errors.push(response.data.data.error);\n          }\n        }).catch(error => {\n          this.states.isSubmitting = false;\n        });\n      }\n    },\n    resetSuccessErrorBar() {\n      this.success = null;\n      this.errors = [];\n    },\n    resetInputs() {\n      this.changePassword.old = null;\n      this.changePassword.new = null;\n      this.changePassword.new_confirmation = null;\n    }\n  },\n  components: {\n    NavBack,\n    PageHeaderThree,\n    SectionTitle,\n    PageTitle,\n    DashboardLayout\n  }\n};","map":{"version":3,"names":["DashboardLayout","PageTitle","SectionTitle","AuthenticationRepository","PageHeaderThree","NavBack","name","data","form","states","isSubmitting","changePassword","old","new","new_confirmation","success","errors","computed","validForm","length","navBackRoute","routeName","$store","getters","getAuthUserRole","methods","validateForm","isUpdatingPassword","push","submit","resetSuccessErrorBar","payload","old_password","password","password_confirmation","updateUserDetails","then","response","message","error","catch","resetInputs","components"],"sources":["/Users/erwinkarim/Websites/Snapped/snapped-mobile-master/src/views/auth/Edit.vue"],"sourcesContent":["<template>\n  <dashboard-layout\n      :has-custom-bottom-bar=\"true\"\n  >\n\n    <template v-slot:pageHeader>\n\n      <page-header-three>\n        <template v-slot:leftAction>\n          <nav-back :to=\"navBackRoute\"\n                    stroke-color=\"bg-purple-primary\"\n                    class=\"w-2/7\"\n          />\n        </template>\n        <template v-slot:mini-title>\n          <div class=\"truncate\">\n            Edit Profile\n          </div>\n        </template>\n      </page-header-three>\n    </template>\n\n    <template v-slot:content>\n      <div class=\"absolute h-full w-full my-auto flex flex-col px-4 mt-20\">\n\n        <!-- FORM INPUTS -->\n        <div class=\"px-3 w-full md:max-w-xl lg:max-w-2xl mx-auto mt-5\">\n\n          <div v-if=\"success\"\n              class=\"bg-green-300 mb-4 py-3 mb-2 px-4 text-left text-purple-primary text-xs rounded-lg\"\n          >\n             {{success}}\n          </div>\n          <!-- ERROR BAR -->\n          <div v-if=\"errors.length\"\n               class=\"bg-red-500 mb-4 py-3 mb-2 px-4 text-left text-white text-xs rounded-lg\"\n          >\n            <ul>\n              <li v-for=\"error in errors\">{{ error }}</li>\n            </ul>\n          </div>\n\n          <div class=\"w-full mt-5\">\n            <section-title class=\"text-left my-4\" title=\"Change Password\"/>\n            <div class=\"mb-8\">\n              <input v-model=\"changePassword.old\"\n                     type=\"password\"\n                     @click=\"resetSuccessErrorBar\"\n                     placeholder=\"Current Password\"\n                     class=\"appearance-none border rounded border-none w-full py-2 pl-5 pr-2 md:h-20 md:text-xl mt-3 bg-gray-secondary text-gray-700 font-normal leading-tight focus:outline-none focus:shadow-outline placeholder-purple-secondary h-14\"\n              >\n              <input v-model=\"changePassword.new\"\n                     type=\"password\"\n                     @click=\"resetSuccessErrorBar\"\n                     placeholder=\"New Password\"\n                     class=\"appearance-none border rounded border-none w-full py-2 pl-5 pr-2 md:h-20 md:text-xl mt-3 bg-gray-secondary text-gray-700 font-normal leading-tight focus:outline-none focus:shadow-outline placeholder-purple-secondary h-14\"\n              >\n              <input v-model=\"changePassword.new_confirmation\"\n                     type=\"password\"\n                     @click=\"resetSuccessErrorBar\"\n                     placeholder=\"Confirm New Password\"\n                     class=\"appearance-none border rounded border-none w-full py-2 pl-5 pr-2 md:h-20 md:text-xl mt-3 bg-gray-secondary text-gray-700 font-normal leading-tight focus:outline-none focus:shadow-outline placeholder-purple-secondary h-14\"\n              >\n            </div>\n          </div>\n\n        </div>\n\n      </div>\n    </template>\n\n    <template v-slot:bottomBar>\n      <button @click=\"submit\"\n              class=\"w-full font-bold focus:outline-none rounded-full text-purple-primary text-sm bg-white border-2 border-purple-primary py-3 px-1 flex flex-row justify-center\">\n        Submit\n      </button>\n    </template>\n  </dashboard-layout>\n</template>\n\n<script>\nimport DashboardLayout from \"@/views/layout/DashboardLayout\";\nimport PageTitle from \"@/components/PageTitle\";\nimport SectionTitle from \"@/components/SectionTitle\";\nimport AuthenticationRepository from \"@/repositories/AuthenticationRepository\";\nimport PageHeaderThree from \"@/components/PageHeaderThree\";\nimport NavBack from \"@/components/NavBack\";\n\nexport default {\n  name: \"Edit\",\n  data() {\n    return {\n      form: {},\n\n      states: {\n        isSubmitting: false,\n      },\n\n      changePassword: {\n        old: null,\n        new: null,\n        new_confirmation: null\n      },\n      success: null,\n      errors: []\n    }\n  },\n\n  computed: {\n    validForm() {\n      return this.errors.length === 0;\n    },\n    navBackRoute() {\n      let routeName = '';\n\n      if(this.$store.getters.getAuthUserRole === 'Teacher'){\n        routeName = 'teacher.settings'\n      }\n\n      if(this.$store.getters.getAuthUserRole === 'Student'){\n        routeName = 'student.settings'\n      }\n    }\n  },\n\n  methods: {\n\n    validateForm() {\n\n      // determine if user is updating password\n      let isUpdatingPassword = (\n          this.changePassword.old !== null\n          || this.changePassword.new !== ''\n          || this.changePassword.new !== null\n          || this.changePassword.new !== ''\n          || this.changePassword.new_confirmation !== null\n          || this.changePassword.new_confirmation !== ''\n      );\n\n      // If user is updating password, check if user left any password inputs null or empty string\n      if (isUpdatingPassword) {\n        if (!this.changePassword.old) this.errors.push('Please enter current password.')\n        if (!this.changePassword.new) this.errors.push('Please enter new password.')\n        if (!this.changePassword.new_confirmation) this.errors.push('Please confirm new password.')\n      }\n    },\n\n    submit() {\n\n      this.resetSuccessErrorBar();\n      this.validateForm();\n\n      let payload = {\n        old_password: this.changePassword.old,\n        password: this.changePassword.new,\n        password_confirmation: this.changePassword.new_confirmation,\n      }\n\n      if (this.validForm && !this.isSubmitting) {\n\n        this.states.isSubmitting = true;\n\n        AuthenticationRepository.updateUserDetails(payload)\n            .then(response => {\n\n              this.states.isSubmitting = false;\n\n              if (response.data.success) {\n                this.success = response.data.message;\n              } else {\n                this.errors.push(response.data.data.error)\n              }\n            })\n            .catch(error => {\n              this.states.isSubmitting = false;\n            })\n      }\n\n    },\n    resetSuccessErrorBar() {\n      this.success = null;\n      this.errors = [];\n    },\n\n    resetInputs() {\n      this.changePassword.old = null;\n      this.changePassword.new = null;\n      this.changePassword.new_confirmation = null;\n    }\n\n  },\n  components: {NavBack, PageHeaderThree, SectionTitle, PageTitle, DashboardLayout}\n}\n</script>\n\n<style scoped>\n\n</style>\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}